<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title> 1 Знайомство з R | Методи статистичної обробки даних</title>
  <meta name="description" content=" 1 Знайомство з R | Методи статистичної обробки даних" />
  <meta name="generator" content="bookdown 0.20 and GitBook 2.6.7" />

  <meta property="og:title" content=" 1 Знайомство з R | Методи статистичної обробки даних" />
  <meta property="og:type" content="book" />
  
  
  
  

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content=" 1 Знайомство з R | Методи статистичної обробки даних" />
  
  
  

<meta name="author" content="Г.В. Лівінська, І.В. Розора" />


<meta name="date" content="2020-09-03" />

  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<link rel="prev" href="index.html"/>
<link rel="next" href="ch2.html"/>
<script src="libs/header-attrs-2.3/header-attrs.js"></script>
<script src="libs/jquery-2.2.3/jquery.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />









<script src="libs/accessible-code-block-0.0.1/empty-anchor.js"></script>
<script src="libs/kePrint-0.0.1/kePrint.js"></script>
<link href="libs/lightable-0.0.1/lightable.css" rel="stylesheet" />


<style type="text/css">
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>

<link rel="stylesheet" href="style.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li><a href="./">Зміст</a></li>

<li class="divider"></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i>Вступ</a></li>
<li class="chapter" data-level="1" data-path="ch1.html"><a href="ch1.html"><i class="fa fa-check"></i><b>1</b> Знайомство з R</a>
<ul>
<li class="chapter" data-level="1.1" data-path="ch1.html"><a href="ch1.html#початок-роботи"><i class="fa fa-check"></i><b>1.1</b> Початок роботи</a>
<ul>
<li class="chapter" data-level="1.1.1" data-path="ch1.html"><a href="ch1.html#довідка"><i class="fa fa-check"></i><b>1.1.1</b> Довідка</a></li>
<li class="chapter" data-level="1.1.2" data-path="ch1.html"><a href="ch1.html#арифметичні-дії"><i class="fa fa-check"></i><b>1.1.2</b> Арифметичні дії</a></li>
<li class="chapter" data-level="1.1.3" data-path="ch1.html"><a href="ch1.html#порівняння-величин"><i class="fa fa-check"></i><b>1.1.3</b> Порівняння величин</a></li>
<li class="chapter" data-level="1.1.4" data-path="ch1.html"><a href="ch1.html#пакети-в-r"><i class="fa fa-check"></i><b>1.1.4</b> Пакети в R</a></li>
<li class="chapter" data-level="1.1.5" data-path="ch1.html"><a href="ch1.html#функції-в-r"><i class="fa fa-check"></i><b>1.1.5</b> Функції в R</a></li>
<li class="chapter" data-level="1.1.6" data-path="ch1.html"><a href="ch1.html#умовний-оператор-та-цикли"><i class="fa fa-check"></i><b>1.1.6</b> Умовний оператор та цикли</a></li>
<li class="chapter" data-level="1.1.7" data-path="ch1.html"><a href="ch1.html#написання-власних-функцій"><i class="fa fa-check"></i><b>1.1.7</b> Написання власних функцій</a></li>
</ul></li>
<li class="chapter" data-level="1.2" data-path="ch1.html"><a href="ch1.html#типи-даних-в-r"><i class="fa fa-check"></i><b>1.2</b> Типи даних в R</a></li>
<li class="chapter" data-level="1.3" data-path="ch1.html"><a href="ch1.html#структури-даних-в-r"><i class="fa fa-check"></i><b>1.3</b> Структури даних в R</a>
<ul>
<li class="chapter" data-level="1.3.1" data-path="ch1.html"><a href="ch1.html#вектори"><i class="fa fa-check"></i><b>1.3.1</b> Вектори</a></li>
<li class="chapter" data-level="1.3.2" data-path="ch1.html"><a href="ch1.html#матриці"><i class="fa fa-check"></i><b>1.3.2</b> Матриці</a></li>
<li class="chapter" data-level="1.3.3" data-path="ch1.html"><a href="ch1.html#категоризовані-дані.-фактори"><i class="fa fa-check"></i><b>1.3.3</b> Категоризовані дані. Фактори</a></li>
<li class="chapter" data-level="1.3.4" data-path="ch1.html"><a href="ch1.html#фрейми-таблиці-даних"><i class="fa fa-check"></i><b>1.3.4</b> Фрейми (таблиці) даних</a></li>
<li class="chapter" data-level="1.3.5" data-path="ch1.html"><a href="ch1.html#списки"><i class="fa fa-check"></i><b>1.3.5</b> Списки</a></li>
</ul></li>
<li class="chapter" data-level="1.4" data-path="ch1.html"><a href="ch1.html#елементи-графіки-в-r"><i class="fa fa-check"></i><b>1.4</b> Елементи графіки в R</a>
<ul>
<li class="chapter" data-level="1.4.1" data-path="ch1.html"><a href="ch1.html#пакет-graphics"><i class="fa fa-check"></i><b>1.4.1</b> Пакет graphics</a></li>
<li class="chapter" data-level="1.4.2" data-path="ch1.html"><a href="ch1.html#графічні-можливості-пакету-ggplot2"><i class="fa fa-check"></i><b>1.4.2</b> Графічні можливості пакету ggplot2</a></li>
</ul></li>
<li class="chapter" data-level="1.5" data-path="ch1.html"><a href="ch1.html#ймовірнісні-розподіли-в-r"><i class="fa fa-check"></i><b>1.5</b> Ймовірнісні розподіли в R</a>
<ul>
<li class="chapter" data-level="1.5.1" data-path="ch1.html"><a href="ch1.html#генерування-випадкової-вибірки"><i class="fa fa-check"></i><b>1.5.1</b> Генерування випадкової вибірки</a></li>
<li class="chapter" data-level="1.5.2" data-path="ch1.html"><a href="ch1.html#генерування-комбінацій"><i class="fa fa-check"></i><b>1.5.2</b> Генерування комбінацій</a></li>
<li class="chapter" data-level="1.5.3" data-path="ch1.html"><a href="ch1.html#ймовірнісні-розподіли"><i class="fa fa-check"></i><b>1.5.3</b> Ймовірнісні розподіли</a></li>
</ul></li>
<li class="chapter" data-level="1.6" data-path="ch1.html"><a href="ch1.html#створення-звітів-за-допомогою-r-markdown"><i class="fa fa-check"></i><b>1.6</b> Створення звітів за допомогою R Markdown</a></li>
</ul></li>
<li class="chapter" data-level="2" data-path="ch2.html"><a href="ch2.html"><i class="fa fa-check"></i><b>2</b> Попередня обробка даних</a>
<ul>
<li class="chapter" data-level="2.1" data-path="ch2.html"><a href="ch2.html#дескриптивні-статистики"><i class="fa fa-check"></i><b>2.1</b> Дескриптивні статистики</a></li>
<li class="chapter" data-level="2.2" data-path="ch2.html"><a href="ch2.html#графічні-методи-аналізу"><i class="fa fa-check"></i><b>2.2</b> Графічні методи аналізу</a></li>
<li class="chapter" data-level="2.3" data-path="ch2.html"><a href="ch2.html#визначення-розподілу-величини-що-спостерігається"><i class="fa fa-check"></i><b>2.3</b> Визначення розподілу величини, що спостерігається</a></li>
<li class="chapter" data-level="2.4" data-path="ch2.html"><a href="ch2.html#лабораторна-робота-1"><i class="fa fa-check"></i><b>2.4</b> Лабораторна робота 1</a></li>
</ul></li>
<li class="chapter" data-level="3" data-path="кореляційний-аналіз.html"><a href="кореляційний-аналіз.html"><i class="fa fa-check"></i><b>3</b> Кореляційний аналіз</a></li>
<li class="chapter" data-level="4" data-path="регресійний-аналіз.html"><a href="регресійний-аналіз.html"><i class="fa fa-check"></i><b>4</b> Регресійний аналіз</a>
<ul>
<li class="chapter" data-level="4.1" data-path="регресійний-аналіз.html"><a href="регресійний-аналіз.html#example-one"><i class="fa fa-check"></i><b>4.1</b> Example one</a></li>
<li class="chapter" data-level="4.2" data-path="регресійний-аналіз.html"><a href="регресійний-аналіз.html#example-two"><i class="fa fa-check"></i><b>4.2</b> Example two</a></li>
</ul></li>
<li class="chapter" data-level="5" data-path="ch5.html"><a href="ch5.html"><i class="fa fa-check"></i><b>5</b> Дисперсійний аналіз</a>
<ul>
<li class="chapter" data-level="5.1" data-path="регресійний-аналіз.html"><a href="регресійний-аналіз.html#example-one"><i class="fa fa-check"></i><b>5.1</b> Example one</a></li>
<li class="chapter" data-level="5.2" data-path="регресійний-аналіз.html"><a href="регресійний-аналіз.html#example-two"><i class="fa fa-check"></i><b>5.2</b> Example two</a></li>
</ul></li>
<li class="chapter" data-level="6" data-path="часові-ряди.html"><a href="часові-ряди.html"><i class="fa fa-check"></i><b>6</b> Часові ряди</a>
<ul>
<li class="chapter" data-level="6.1" data-path="часові-ряди.html"><a href="часові-ряди.html#аналіз-часових-рядів"><i class="fa fa-check"></i><b>6.1</b> Аналіз часових рядів</a></li>
<li class="chapter" data-level="6.2" data-path="часові-ряди.html"><a href="часові-ряди.html#побудова-прогнозу-часового-ряду"><i class="fa fa-check"></i><b>6.2</b> Побудова прогнозу часового ряду</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="references.html"><a href="references.html"><i class="fa fa-check"></i>References</a></li>
<li class="chapter" data-level="" data-path="references.html"><a href="references.html#references"><i class="fa fa-check"></i>References</a></li>
<li class="chapter" data-level="7" data-path="prerequisites.html"><a href="prerequisites.html"><i class="fa fa-check"></i><b>7</b> Prerequisites</a></li>
<li class="chapter" data-level="8" data-path="prerequisites.html"><a href="prerequisites.html#prerequisites"><i class="fa fa-check"></i><b>8</b> Prerequisites</a></li>
<li class="divider"></li>
<li><a href="https://github.com/rstudio/bookdown" target="blank">Published with bookdown</a></li>

</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">Методи статистичної обробки даних</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="ch1" class="section level1" number="1">
<h1><span class="header-section-number"> 1</span> Знайомство з R</h1>
<p>R — це програмно-статистичне середовище з інтерфейсом командного рядка та відкритим вихідним кодом. Все необхідне програмне забезпечення для встановлення R для різних операційних систем є на кількох сайтах, базовим є офіційний сайт <a href="http://www.r-project.org/">http://www.r-project.org/</a>.
Як записано на офіційному сайті, R – це мова програмування та середовище для статистичної обробки даних та роботи з графікою (R is a language and environment for statistical computing and graphics).</p>
<p>R застосовується скрізь, де потрібна робота з даними, та дозволяє провести як базову попередню обробку даних (графіки, базові характеристики, таблиці спряженості), так і будувати різноманітні складні моделі, проводити їх аналіз за допомогою величезного спектру класичних та найсучасніших методів аналізу даних. Фактично для всіх галузей науки та для всіх добре відомих (та не дуже відомих) статистичних методик в R є функції та пакети розширень, які їх підтримують.</p>
<p>Головні переваги R:</p>
<ol style="list-style-type: decimal">
<li><p>Ця програма є безкоштовною разом з усіма пакетами та додатками.</p></li>
<li><p>Вона доволі просто встановлюється під різні операційні системи.</p></li>
<li><p>Під цю програму написано (і перманентно додаються) дуже багато пакетів для розв’язування широкого кола задач практично для усіх галузей, де так чи інакше використовується статистика.</p></li>
<li><p>Програма дуже гнучка: дані не мають жорсткої структури, результати роботи функцій можна варіювати за допомогою введення додаткових значень параметрів, можна писати власні функції.</p></li>
<li><p>Є зручна система допомоги та підказок. Велика кількість літератури у вільному доступі.</p></li>
<li><p>Чудові графічні можливості.</p></li>
</ol>
<p>На офіційній сторінці ми бачимо багато інших посилань, серед яких ті, які дозволяють завантажити R для різних операційних систем та велика кількість документації. Для завантаження треба переходити за відповідними посиланнями та слідувати інструкціям.</p>
<p>Розроблено кілька оболонок, які мають за мету зробити роботу в R зручнішою. Вони також безкоштовні та можуть бути встановлені після того, як завантажено R. Найбільш популярними є</p>
<ul>
<li><p>RStudio: <a href="www.rstudio.com">www.rstudio.com</a></p></li>
<li><p>RCommander: <a href="www.rcommander.com/">www.rcommander.com/</a></p></li>
</ul>
<p>Cеред переваг, наприклад, RStudio, варто вказати виведення на екран одночасно кількох вікон з командним рядком та результатами роботи, зручно організоване меню, процеси збереження історії, завантаження нових бібліотек з інтернету. Зручно також те, що RStudio виводить підказки під час набору команд на консолі.</p>
<p>Варто звернути увагу на посилання CRAN – Comprehensive R Archive Network – «CRAN is a network of ftp and web servers around the world that store identical, up-to-date, versions of code and documentation for R» <a href="https://cran.r-project.org/">https://cran.r-project.org/</a> – стабільна база пакетів для R та численні доповнення.</p>
<p>Зауважимо, що R тримає всі свої розрахунки в оперативній пам’яті, тому, якщо в процесі роботи, наприклад, вимкнеться живлення, то результати сесії, які не були належним чином збережені в файл, зникнуть. Ця особливість, на жаль, не дозволяє також працювати R з дуже великими розмірами (порядку сотень тисяч та більше) даних, які можливо обробляти з використанням системі аналізу ROOT <a href="https://root.cern.ch/">https://root.cern.ch/</a>.</p>
<p>Одна з корисних особливостей – історія команд: її можна переглядати, редагувати та зберігати у файлі .Rhistory. Проте головна особливість збереження середовища робочих проектів полягає в тому, що всі дані зберігаються в бінарній формі в файлі .RData. Варто регулярно використовувати команду rm() (remove()), щоб збережене середовище даних не розросталося необмежено.</p>
<p>Наразі є дуже багато різноманітних підручників, блогів, присвячених роботі з R. Перш за все для початку корисними будуть підручники <span class="citation">(Майборода <a href="#ref-Майборода2018" role="doc-biblioref">2018</a>)</span>, <span class="citation">(Гнатюк <a href="#ref-Гнатюк2010" role="doc-biblioref">2010</a>)</span>, <span class="citation">(Зарядов <a href="#ref-Зарядов2010-1" role="doc-biblioref">2010</a>)</span>, блог <span class="citation">(Мастицкий, <a href="#ref-Мастицкий2011-2020" role="doc-biblioref">n.d.</a>)</span>, але можете, наприклад, подивитися <span class="citation">(A. Vries <a href="#ref-Vries2012" role="doc-biblioref">2012</a>)</span>, <span class="citation">(Dalgaard <a href="#ref-Dalgaard2008" role="doc-biblioref">2008</a>)</span>, або будь-які інші посібники, вибравши, наприклад, звідси: <a href="https://cran.r-project.org/doc/contrib/">https://cran.r-project.org/doc/contrib/</a>
. Для кожного розділу аналізу даних будемо додатково давати посилання на ту літературу, яка, на наш погляд, повно та зрозуміло дає необхідну інформацію.</p>
<div id="початок-роботи" class="section level2" number="1.1">
<h2><span class="header-section-number">1.1</span> Початок роботи</h2>
<p>Для уникнення безладу в файлах, варто починати роботу зі створення нового проекту (в RStudio відповідна кнопка знаходиться в правому верхньому кутку).</p>
<p>Програми, які складаються з команд R та які потім завантажуються в R та інтерпретуються ним називаються скриптами. Вони мають розширення .r. Варто створювати скрипти, навіть для таких задач, які здаються простими – це в майбутньому може зберегти час. В базовій оболонці можна відкрити вікно редактора для створення нового скрипту або завантажити вже існуючий скрипт, використовуючи пункти головного меню File - New script або File – Open script відповідно. Виконати завантажений у вікні редактора скрипт можна повністю (Edit – Run all) або виділену частину (Run line or selection). Закінчивши роботу зі скриптом, можна історію команд зберегти, використовуючи File – Save History (з розширенням .Rhistory, який можна редагувати в будь-якому текстовому редакторі). Створити історію команд можна також за допомогою спеціальних команд.</p>
<p>Перед тим, як завантажити дані, збережені в одному з файлів .RData, варто очистити робочу область (видалити всі завантажені змінні) за допомогою команди <code>rm(list = ls())</code>. Ця команда видалить всі завантажені об’єкти.</p>
<p>Головна робота, проте, іде в консолі. Знак &gt; на початку командного рядка – це запрошення до роботи, він з’являється після кожної виконаної операції.</p>
<p>З історією введених команд R працює традиційно: попередні команди можна викликати натисканням клавіші-стрілки вгору, а пошук в історії команд – комбінацією <code>^r</code>.</p>
<p>R ігнорує рядки, що починаються з <code>#</code> – вони можуть бути використані для коментарів в коді.</p>
<p>На присвоєння назв об’єктам в R є певні обмеження:</p>
<ul>
<li><p>назви об’єктів можуть містити цифри, але не можуть з них починатися;</p></li>
<li><p>в назвах об’єктів не можна використовувати спеціальні символи;</p></li>
<li><p>крапка та нижнє підкреслювання можуть використовуватись, причому назва об’єкту навіть може починатися з крапки.</p></li>
</ul>
<p>Довгу команду доцільно розбити на кілька рядків, причому при переході на наступний рядок автоматично виводиться символ продовження <code>+</code>. R сам визначає за синтаксисом, що команда не завершена. Тому певні синтаксичні помилки (наприклад, загублені дужки) можуть сприйматися як незакінчені команди. В цьому випадку R виставить <code>+</code> на початку наступного рядка та перейде в режим очікування. Щоб перейти в режим введення нової команди без завершення попередньої, треба натиснути esc.</p>
<p>Багато команд приводять до появи вікон, що вспливають, з графіками, малюнками або діаграмами даних. Деталі вікон залежать від платформи та налаштувань. Графіки можна перенаправляти для збереження в зовнішніх файлах для подальшого використання.</p>
<p>Присвоювання значення виконується за допомогою знаків <code>&lt;-</code> (присвоювання ліворуч), <code>-&gt;</code> (присвоювання праворуч) або також знака <code>=</code> в операціях високого рівня (не у вкладених виразах). Якщо є сумніви щодо використання знака рівності, безпечніше використовувати стрілку.</p>
<p>Для того, щоб вийти з програми, достатньо ввести команду виходу та відповісти на запитання:</p>
<div class="sourceCode" id="cb1"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1-1"><a href="ch1.html#cb1-1"></a><span class="kw">q</span>()</span></code></pre></div>
<p>або</p>
<div class="sourceCode" id="cb2"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb2-1"><a href="ch1.html#cb2-1"></a><span class="kw">quit</span>()</span></code></pre></div>
<p>та відповісти на запитання:</p>
<p><code>Save workspace image? [y/n/c]: n</code></p>
<p>Тут вже видно, що в R будь-яка команда є функцією, у якої є аргументи, які можна або треба задавати, в багатьох випадках аргументи мають певне значення за замовчуванням. Проте, навіть якщо аргумент не вказується, дужки все одно потрібні.</p>
<p>Проте вийти з R можна, не відповідаючи на питання, що з’являється, якщо задати відповідний аргумент (зверніть увагу на лапки: їх треба обов’язково використовувати в цій команді, як і в багатьох інших, а деякі команди без лапок просто не працюють):</p>
<div class="sourceCode" id="cb3"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb3-1"><a href="ch1.html#cb3-1"></a><span class="kw">q</span>(<span class="st">&quot;no&quot;</span>)</span></code></pre></div>
<p>Що означає це питання та ця відповідь? Якщо дати ствердну відповідь, в робочу папку R (ту, з якої він викликаний) запишуться два файли: бінарний .Rdata та текстовий .Rhistory. Перший містить всі об’єкти, створені за час сесії, другий – повну історію введених команд. Якщо навмисне чи випадково при виході зберегти ці файли, то при наступному старті вони завантажаться автоматично. Інколи це потрібно, інколи заважає. Отже, пильнуйте.</p>
<div id="довідка" class="section level3" number="1.1.1">
<h3><span class="header-section-number">1.1.1</span> Довідка</h3>
<p>Для того, щоб узнати деталі використання тої чи іншої функції (або певного датасету), треба скористатися довідкою. Для цього є дві основні команди (в дужках – назва функції, інформація щодо якої потрібна):</p>
<div class="sourceCode" id="cb4"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb4-1"><a href="ch1.html#cb4-1"></a><span class="kw">help</span>(q)</span></code></pre></div>
<p>або</p>
<div class="sourceCode" id="cb5"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb5-1"><a href="ch1.html#cb5-1"></a>?q</span></code></pre></div>
<p>Це дуже корисна функція, варто звикнути користуватися нею регулярно.</p>
<p>Окрім вказаних команд, є інші, які дозволяють отримати певну довідку:
+ <code>help.start()</code> – загальна довідкова система R;</p>
<ul>
<li><p><code>apropos("object")</code> повертає перелік всіх функцій, які містять рядок <code>object</code>;</p></li>
<li><p><code>example(function)</code> повертає приклад використання функції <code>function</code>;</p></li>
<li><p><code>help.search("object")</code> – пошук за вказаним словом в довідковій системі R;</p></li>
<li><p><code>??object</code> – те саме, що <code>help.search("object")</code>;</p></li>
<li><p><code>RSiteSearch("function")</code> – пошук інформації про функцію <code>function</code> в допоміжній літературі та архіві</p></li>
</ul>
<p>Якщо точна назва функції невідома, використовуються функції <code>help.search()</code>, <code>??keyword</code>, <code>RSiteSearch()</code>.</p>
</div>
<div id="арифметичні-дії" class="section level3" number="1.1.2">
<h3><span class="header-section-number">1.1.2</span> Арифметичні дії</h3>
<p>Звичайно, R можна використовувати і в якості калькулятора. Арифметичні процедури вводяться традиційно (<code>+, -, *, /</code> – головні арифметичні дії, <code>^</code> та <code>**</code> – піднесення в степінь, <code>%%</code> повертає залишок від ділення), порядок арифметичних дій та використання дужок – теж:</p>
<div class="sourceCode" id="cb6"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb6-1"><a href="ch1.html#cb6-1"></a><span class="dv">7</span><span class="op">+</span><span class="dv">12</span></span>
<span id="cb6-2"><a href="ch1.html#cb6-2"></a>[<span class="dv">1</span>] <span class="dv">19</span></span></code></pre></div>
<div class="sourceCode" id="cb7"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb7-1"><a href="ch1.html#cb7-1"></a>(<span class="kw">sqrt</span>(<span class="dv">9</span>)<span class="op">+</span><span class="dv">3</span><span class="op">^</span><span class="dv">2</span>)<span class="op">*</span><span class="dv">10</span></span>
<span id="cb7-2"><a href="ch1.html#cb7-2"></a>[<span class="dv">1</span>] <span class="dv">120</span></span></code></pre></div>
<p>Основні логарифмічні та експоненційні функції:</p>
<ul>
<li><p><code>exp(x)</code> – обчислення <span class="math inline">\(e^x\)</span>;</p></li>
<li><p><code>log(x, base= )</code> та <code>logb(x, base= )</code> – обчислення лгарифма за основою, вказаною аргументом <code>base</code> (за замовчуванням цей аргумент рівний <span class="math inline">\(e\)</span>);</p></li>
<li><p><code>log10(x)</code>, log2(x)` логарифми відповідно за основою 10 та 2.</p></li>
</ul>
<p>Зверніть увагу на те, що перед числовою відповіддю стоїть одиниця в квадратних дужках. Вона означає номер елементу вектора, оскільки R результат будь-якої операції з числами трактує як вектор одиничної довжини, елементи вектора нумеруються з одиниці. Скалярних величин, власне, в R немає.</p>
<p>Якщо результатом виконання є вектор, значення якого виписані в кілька рядків, то кожен наступний рядок буде починатися з порядкового номеру відповідного елемента вектора, взятого у квадратні дужки.</p>
</div>
<div id="порівняння-величин" class="section level3" number="1.1.3">
<h3><span class="header-section-number">1.1.3</span> Порівняння величин</h3>
<p>R має операції порівняння, які повертають логічну змінну, що каже про справедливість трердження. Окрім традиційних більше-менше, використовуються такі логічні оператори:</p>
<p>– “рівне” <code>==</code></p>
<p>– “не рівне” <code>!=</code></p>
<p>– “менше або рівне” <code>&lt;=</code></p>
<p>– “більше або рівне” <code>&gt;=</code></p>
<p>– “логічне І” <code>&amp;</code></p>
<p>– “логічне АБО” <code>|</code></p>
<p>– “логічне НЕ” <code>!</code></p>
<div class="sourceCode" id="cb8"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb8-1"><a href="ch1.html#cb8-1"></a><span class="dv">7</span><span class="op">&gt;</span><span class="dv">9</span></span>
<span id="cb8-2"><a href="ch1.html#cb8-2"></a>[<span class="dv">1</span>] <span class="ot">FALSE</span></span></code></pre></div>
<div class="sourceCode" id="cb9"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb9-1"><a href="ch1.html#cb9-1"></a><span class="dv">5</span><span class="op">==</span><span class="dv">5</span></span>
<span id="cb9-2"><a href="ch1.html#cb9-2"></a>[<span class="dv">1</span>] <span class="ot">TRUE</span></span></code></pre></div>
<div class="sourceCode" id="cb10"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb10-1"><a href="ch1.html#cb10-1"></a><span class="st">&quot;cat&quot;</span><span class="op">!=</span><span class="st">&quot;dog&quot;</span></span>
<span id="cb10-2"><a href="ch1.html#cb10-2"></a>[<span class="dv">1</span>] <span class="ot">TRUE</span></span></code></pre></div>
<p>Результат порівняння можна зберігати (як скалярну величину, вектор, матрицю, тощо, залежно від того,що порівнюється)</p>
</div>
<div id="пакети-в-r" class="section level3" number="1.1.4">
<h3><span class="header-section-number">1.1.4</span> Пакети в R</h3>
<p>Ще одна перевага R – наявність для нього численних розширень та пакетів буквально на всі випадки, хоча навіть базовий R має дуже великий набір пакетів для реалізації математичних, графічних та статистичних процедур (базові пакети, без яких R просто не працює, наприклад, пакет, який так і називається base, або пакет grDevices, який керує виведенням графіків, та «рекомендовані» пакети, як то пакет для спеціалізованого кластерного аналізу cluster, пакет для аналізу нелінійних моделей nlme, тощо). Пакет – це комплект наборів даних або способів (функцій) певної методики обробки даних – файли зі скриптами та їх описом. Кожен пакет повинен мати також help-документацію. Індивідуальні користувачі та організації постійно розробляють додаткові функції та формують з них пакети після достатнього опрацювання. Це великою мірою розширяє функціональність R.</p>
<p>Оскільки пакети створюються різними розробниками, незалежно один від одного, між ними можуть існувати неузгодженості. Зокрема в різних пакетах часто трапляються однакові функції з різними іменами та параметрами. Для правильного використання функцій при наявності дублюючих рекомендується завантажувати для роботи не всі інстальовані на комп’ютер пакети, а лише ті, які потрібні для роботи в даний момент.</p>
<p>На CRAN є в доступі тисячі пакетів, будь-який з них можна завантажити. В R-studio це робиться через Packages-Install (в базовому R це можна зробити подібним чином). Після скачування вихідників пакету перед використанням часом його треба спочатку зкомпілювати, тому що багато пакетів містять код на Fortran чи С. Прямо під час сесії роботи інсталювати пакет можна командою install.packeges().</p>
<p>Щойно пакет встановлено, він готовий до роботи. його треба тільки ініціалізувати перед використанням (завантажити в робочу область пам’яті). Для цього є команда library(). Варто зауважити, що поняття «бібліотека» відрізняється від поняття «пакет»: під бібліотекою розуміють каталог, в якому знаходиться пакет. Проте для більшості користувачів ця різниця не є суттєвою.</p>
<p>Перелік доступних на CRAN пакетів за відповідним напрямом аналізу даних (та деяких інших напрямів) можна знайти за посиланням <a href="https://cran.r-project.org/web/views/">https://cran.r-project.org/web/views/</a>.
Наприклад, перелік пакетів, пов’язаних з викладенням статистики є за посиланням
<a href="https://cran.r-project.org/web/views/TeachingStatistics.html">https://cran.r-project.org/web/views/TeachingStatistics.html</a>.
Зауважимо, що ми переважно будемо працювати з даними, які вже завантажені в пакетах R. Детально про те, як імпортувати дані в R, можна подивитися за посиланням <a href="https://r-analytics.blogspot.com/2011/07/r_24.html">https://r-analytics.blogspot.com/2011/07/r_24.html</a>.</p>
<div id="приклад-1." class="section level4 unnumbered" number="">
<h4>Приклад 1.</h4>
<p>Для завантаження пакету faraway ( )</p>
<ol style="list-style-type: decimal">
<li><p>Інсталюйте пакет використовуючи або меню Packages-Install package(s) GUI-меню (В цьому випадку перед інсталяцією треба вибрати «дзеркало CRAN» – географічно близький інтернет-архів, з якого робиться інсталяція. Варіант 0-cloud, що пропонується за замовчуванням, цілком підходить), або аналогічні пункти меню RStudio, RCommander, тощо. Коли відкриється вікно з назвою Packages, прокрутіть перелік пакетів, оберіть faraway та двічі клікніть (або натисніть ОК), щоб його інсталювати. Цей пакет дає нам доступ до багатьох наборів даних, з якими ми також будемо працювати. Є інші шляхи інсталяції пакетів, але вказаний, мабуть, найпростіший для початку.</p></li>
<li><p>В R GUI, в оболонках, головне вікно – це консоль (R Console). Набравши тут <code>ls()</code> (функція, яка видає перелік об’єктів у роботі) можна побачити, що наразі немає датасетів, доступних в робочому просторі. Щоб переконатись, що дані пакету Faraway стали доступними, наберіть</p></li>
</ol>
<div class="sourceCode" id="cb11"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb11-1"><a href="ch1.html#cb11-1"></a><span class="kw">data</span>(<span class="dt">package=</span>’faraway’)</span></code></pre></div>
<p>Тепер можна побачити, які саме датасети знаходяться в цьому пакеті. Очевидно, що в інших пакетах є інші набори даних. Щоб побачити, які датасети є в базовій поставці R, наберіть <code>data()</code>. В RStudio в Packages є перелік наявних пакетів. Якщо тут клікнути на назву пакета, висвітиться його вміст.</p>
<ol start="3" style="list-style-type: decimal">
<li>Просто зараз переглянемо датасет, отриманий при проведенні експерименту, в якому тварин тримали на різних дієтах. Через деякий час, коли наслідки дотримання дієти теоретично могли мати місце, був виміряний час згортання крові піддослідних тварин. Ці дані взяті з книги Statistics for Experimenters: An Introduction to Design, Data Analysis, and Model Building (Box, Hunter, &amp; Hunter, 1978). Для того, щоб завантажити ці дані, в консолі наберіть</li>
</ol>
<div class="sourceCode" id="cb12"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb12-1"><a href="ch1.html#cb12-1"></a><span class="kw">data</span>(coagulation, <span class="dt">package=</span>’faraway’)</span></code></pre></div>
<p>Відповіді ви не побачите ніякої, але якщо тепер знову набрати <code>ls()</code>, ви побачите, що датасет <code>coagulation</code> готовий до роботи. Щоб переглянути самі дані, введіть</p>
<div class="sourceCode" id="cb13"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb13-1"><a href="ch1.html#cb13-1"></a>coagulation</span></code></pre></div>
<p>Ви побачите 24 рядки даних у вашій консолі (ми виводимо лише перші з них):</p>
<pre><code>  coag diet
1   62    A
2   60    A
3   63    A
4   59    A
5   63    B
6   67    B</code></pre>
<p>В перший стовпчик внесено номер піддослідної тварини, в другий – час згортання крові в секундах у відповідної тварини (змінна під назвою <code>coag</code>), в третьому – тип дієти, на якій ця тварина утримувалась (змінна <code>diet</code>).</p>
<p>В R подібні дані зберігаються як фрейм даних. Щодо типів даних ми говоритимемо пізніше. Зараз важливо зрозуміти, що багато датасетів організовані таким чином, що над різними індивідами (випадками) проводяться спосереження, причому кожен індивідуум має кілька різних змінних – аспектів (параметрів, характеристик), які вимірюються за допомогою чисел або ж шляхом віднесення до певної категорії. В даному датасеті перша тварина утримувалась на дієті А та мала час згортання крові 62 с.</p>
<p>Фрейми дуже зручні для обробки даних. Зокрема, R, залежно від типу даних, поводить себе відповідним чином. Наприклад, щоб зобразити для даного датасету «ящик з вусами», п’ятиточкову характеристику вибірки, достатньо ввести в консоль</p>
<div class="sourceCode" id="cb15"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb15-1"><a href="ch1.html#cb15-1"></a><span class="kw">plot</span>(coag<span class="op">~</span>diet, <span class="dt">data=</span>coagulation)</span></code></pre></div>
<p><img src="MMOI-RMarkdown_files/figure-html/unnamed-chunk-15-1.png" width="672" /></p>
<p>В подальшому ми побачимо, що функція <code>plot()</code> для інших типів даних будуватиме іншу діаграму. Тут зараз ми бачимо залежність величини часу згортання від типу дієти (<code>coag~diet</code>). Оскільки тип дієти – це номінальна змінна (див. теоретичний матеріал), то R будує діаграму, яка найкраще зображує залежність чисельного показника від номінальної змінної (групи) – «ящик з вусами».</p>
<p>Зауважте, що в команді вказано, з якого датасету беруться дані (<code>data=coagulation</code>). Лише в цьому разі змінні <code>coag</code> та <code>diet</code> будуть доступні, без цього аргументу R видасть помилку. Це важливо особливо тоді, коли ви працюєте одночасно з кількома датасетами.</p>
<p>Дивлячись на цю діаграму, виникає природне питання, чи впливає тип дієти на час згортання крові. Відповідь на це питання можна отримати за допомогою методики дисперсійного аналізу, який ми розглядатимемо пізніше (<a href="ch5.html#ch5">5</a>).</p>
<p>Якщо ви маєте бажання продивитися значення кожної змінної окремо, ви можете використати знак <code>$</code>, щоб виокремити певну змінну:</p>
<div class="sourceCode" id="cb16"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb16-1"><a href="ch1.html#cb16-1"></a>coagulation<span class="op">$</span>diet</span>
<span id="cb16-2"><a href="ch1.html#cb16-2"></a> [<span class="dv">1</span>] A A A A B B B B B B C C C C C C D D D D D D D D</span>
<span id="cb16-3"><a href="ch1.html#cb16-3"></a>Levels<span class="op">:</span><span class="st"> </span>A B C D</span></code></pre></div>
<div class="sourceCode" id="cb17"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb17-1"><a href="ch1.html#cb17-1"></a>coagulation<span class="op">$</span>coag</span>
<span id="cb17-2"><a href="ch1.html#cb17-2"></a> [<span class="dv">1</span>] <span class="dv">62</span> <span class="dv">60</span> <span class="dv">63</span> <span class="dv">59</span> <span class="dv">63</span> <span class="dv">67</span> <span class="dv">71</span> <span class="dv">64</span> <span class="dv">65</span> <span class="dv">66</span> <span class="dv">68</span> <span class="dv">66</span> <span class="dv">71</span> <span class="dv">67</span> <span class="dv">68</span> <span class="dv">68</span> <span class="dv">56</span> <span class="dv">62</span> <span class="dv">60</span> <span class="dv">61</span> <span class="dv">63</span> <span class="dv">64</span> <span class="dv">63</span> <span class="dv">59</span></span></code></pre></div>
</div>
<div id="вправа." class="section level4 unnumbered" number="">
<h4>Вправа.</h4>
<ol style="list-style-type: decimal">
<li>Завантажте датасет за допомогою команди</li>
</ol>
<div class="sourceCode" id="cb18"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb18-1"><a href="ch1.html#cb18-1"></a><span class="kw">data</span>(rats, <span class="dt">package=</span><span class="st">&#39;faraway&#39;</span>)</span></code></pre></div>
<p>Опис датасетів, зібраних в пакеті <code>Faraway</code> можна подивитися за посиланням:
<a href="http://cran.r-project.org/web/packages/faraway/faraway.pdf">http://cran.r-project.org/web/packages/faraway/faraway.pdf</a></p>
<ol start="2" style="list-style-type: decimal">
<li>Побудуйте ящик з вусами для часу виживання залежно від отрути та часу виживання залежно від догляду (<code>plot(time~treat,data=rats)</code>).</li>
</ol>
</div>
</div>
<div id="функції-в-r" class="section level3" number="1.1.5">
<h3><span class="header-section-number">1.1.5</span> Функції в R</h3>
<p>R – мова функціонального програмування. Функції здійснюють операції над об’єктом та повертають результат, при цьому сам об’єкт не змінюється. Вбудовані функції – це ті, які є складовою частиною програмного середовища R.</p>
<p>Будь-яка операція в R – це функція:</p>
<div class="sourceCode" id="cb19"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb19-1"><a href="ch1.html#cb19-1"></a><span class="dv">4</span><span class="op">+</span><span class="dv">3</span></span>
<span id="cb19-2"><a href="ch1.html#cb19-2"></a>[<span class="dv">1</span>] <span class="dv">7</span></span></code></pre></div>
<div class="sourceCode" id="cb20"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb20-1"><a href="ch1.html#cb20-1"></a><span class="st">&#39;+&#39;</span>(<span class="dv">4</span><span class="op">+</span><span class="dv">3</span>)</span>
<span id="cb20-2"><a href="ch1.html#cb20-2"></a>[<span class="dv">1</span>] <span class="dv">7</span></span></code></pre></div>
<p>В R є дуже багато вбудованих функцій, в рамках цього посібника ми не описуватимемо абсолютну їх більшість. Проте згадуватимемо частину з них як корисні для статистичного аналізу в рамках наших потреб.</p>
<p>Перелік найкорисніших функцій та їх головних аргументів, які варто було б запам’ятати чи, принаймні, знати про їх існування, можна знайти в “шпаргалці” на сайті <a href="https://cran.r-project.org/doc/contrib/Short-refcard.pdf">CRAN</a></p>
<p>Як було вказано вище, функції в R мають аргументи, часто дуже багато, хоча найбільш вживаними є, зазвичай, невелика їх кількість. Система аргументів працює розумно, є значення аргументів за замовчуванням (by default). Деякі аргументи мають імена, а отже аргументи можна викликати не по номерах, а за іменами.</p>
<div id="приклад-2." class="section level4 unnumbered" number="">
<h4>Приклад 2.</h4>
<p>Продемонструємо, як можна за допомогою значень аргументів змінити зображення на прикладі простої команди <code>hist()</code> для побудови гістограми базового пакету <code>stats</code>. Головним і єдиним необхідним (без якого функція не працює) аргументом є <code>data</code> – датасет, для якого має бути побудована гістограма. Насправді ця функція має багато інших аргументів, про які можна дізнатися, викликавши довідку по цій функції. Проте ці аргументи мають значення за замовчуванням (by default), і, в принципі, гістограма так чи інакше буде зображена для вказаного датасету.</p>
<p>Візьмемо датасет <code>Loblolly</code> в базовому R – 84 виміри висоти дерева ладанної сосни (Loblolly pine tree). Зобразимо для цих даних гістограму, не вказуючи додаткових параметрів:</p>
<div class="sourceCode" id="cb21"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb21-1"><a href="ch1.html#cb21-1"></a><span class="kw">hist</span>(Loblolly<span class="op">$</span>height)</span></code></pre></div>
<p><img src="MMOI-RMarkdown_files/figure-html/unnamed-chunk-21-1.png" width="672" /></p>
<p>Матимемо сіру гістограму з підписами, які повторюють назву змінної в датасеті та абсолютними частотами спостережень, зображеними по вісі ординат. Все це можна змінити. Наприклад, так:</p>
<div class="sourceCode" id="cb22"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb22-1"><a href="ch1.html#cb22-1"></a><span class="kw">hist</span>(Loblolly<span class="op">$</span>height, <span class="dt">xlab=</span><span class="st">&#39;Висота ладанної сосни&#39;</span>,  <span class="dt">ylab=</span><span class="st">&#39;Відносна частота&#39;</span>, <span class="dt">main=</span><span class="st">&#39;Гістограма висот ладанної сосни&#39;</span>, <span class="dt">freq=</span>F, <span class="dt">col=</span><span class="st">&#39;green&#39;</span>, <span class="dt">breaks=</span><span class="dv">15</span>)</span></code></pre></div>
<p><img src="MMOI-RMarkdown_files/figure-html/unnamed-chunk-22-1.png" width="672" /></p>
<p>Чи стала гістограма виглядати краще – це питання смаку, проте різниця очевидна. Зауважимо, що у функції <code>hist()</code> є ще інші параметри, які можна було б задати для вдосконалення зображення, проте поки що цього робити не будемо. Більш детально про сенс параметрів цієї функції буде сказано у розділі (<a href="ch2.html#ch2">2</a>)</p>
</div>
</div>
<div id="умовний-оператор-та-цикли" class="section level3" number="1.1.6">
<h3><span class="header-section-number">1.1.6</span> Умовний оператор та цикли</h3>
<p>Оператори керування – цикли та умовні оператори, насправді, використовуються в R рідко, перш за все завдяки тому, що багато операцій векторизовано та можна використовувати логічні змінні для вибору певних елементів. Проте за деяких ситуацій вони все ж необхідні. Структура їх абсолютно аналогічна подібним структурам в інших мовах програмування.</p>
<p>Група функцій, на яку варто звернути увагу, і яка зокрема дає можливість організовувати певне керування даними – це сімейство функцій <code>apply</code>.</p>
<p>В цьому посібнику ми не наводимо ні операторів керування, ані опису <code>apply</code>-функцій, інформацію про них можна знайти в будь-якій літературі по R.</p>
</div>
<div id="написання-власних-функцій" class="section level3" number="1.1.7">
<h3><span class="header-section-number">1.1.7</span> Написання власних функцій</h3>
<p>В R неважко створити власну функцію. Загальна форма функції, що створюється <code>new_function_name&lt;-function(аргументи){вираз}</code>. Тут</p>
<ul>
<li><code>new_function_name</code> – ім’я функції, що створюється;
-<code>function</code> – ключове слово, яке повідомляє R про те, що буде створена функція;</li>
<li>аргументи функції – перелік формальних аргументів функції, розділених комою, від яких залежить вираз. Аргументом може бути символ(ім’я змінної), вираз типу символ=вираз (наприклад, <code>x=TRUE</code>)`, інша функція, спеціальний формальний аргумент – трикрапка(…, означає, що потім функції буде передано довільну кількість аргументів). Деяким аргументам іноді присвоюють значення за замовчуванням.</li>
<li>вираз (тіло функції) є командою або блоком команд, що залежать зазвичай від визначених раніше аргументів функції. Окремі команди пишуться з нового рядка або через крапку з комою (;).</li>
</ul>
<p>В якості значення функція повертає останнього виразу в фігурних дужках.</p>
<p>Виклик функції має вид <code>new_function_name(аргументи)</code>. Можливі різні варіанти перерахунку аргументів залежно від ситуації.</p>
<p>Якщо функція викликається з іншого скриптового файлу, треба вказати ім’я файла, де знаходиться ця функція, за допомогою команди <code>source("file_name.R")</code>.
Можна використати повну форму запису для створення функції:
<code>new_function_name&lt;-function(аргументи){вираз  return(значення) }</code></p>
</div>
</div>
<div id="типи-даних-в-r" class="section level2" number="1.2">
<h2><span class="header-section-number">1.2</span> Типи даних в R</h2>
<p>Кожна змінна належить до певного типу даних. В R є такі типи даних в порядку зростання приорітету:</p>
<ol style="list-style-type: decimal">
<li><p>Логічні (<code>logical</code>) – TRUE, FALSE, обов’язково пишуться великими літерами;</p></li>
<li><p>Дійсні числа (<code>numeric</code>), які поділяються на цілі (<code>integer</code>) та власне дійсні (<code>double</code> або <code>real</code>) числа;</p></li>
<li><p>Комлексні числа (<code>complex</code>);</p></li>
<li><p>Текстові (символьні) (<code>character</code>), використовуються в лапках (“Helloworld”).</p></li>
</ol>
<p>Визначити тип даних можна за допомогою функції <code>class()</code>:</p>
<div class="sourceCode" id="cb23"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb23-1"><a href="ch1.html#cb23-1"></a><span class="kw">class</span>(<span class="st">&quot;Helloworld&quot;</span>)</span>
<span id="cb23-2"><a href="ch1.html#cb23-2"></a>[<span class="dv">1</span>] <span class="st">&quot;character&quot;</span></span></code></pre></div>
<p>Об’єкт класу <code>numeric</code> створюється за допомогою команди <code>numeric(n)</code>, де <code>n</code> – кількість елементів даного типу. Створюється нульовий вектор довжини n. Об’єкти типів <code>integer</code> та <code>double</code> створюються відповідно за допомогою функцій <code>integer(n)</code> та <code>double(n)</code>. Десятинна частина відділяється за допомогою крапки.</p>
<div class="sourceCode" id="cb24"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb24-1"><a href="ch1.html#cb24-1"></a>a=<span class="kw">numeric</span>(<span class="dv">6</span>)</span>
<span id="cb24-2"><a href="ch1.html#cb24-2"></a>a</span>
<span id="cb24-3"><a href="ch1.html#cb24-3"></a>[<span class="dv">1</span>] <span class="dv">0</span> <span class="dv">0</span> <span class="dv">0</span> <span class="dv">0</span> <span class="dv">0</span> <span class="dv">0</span></span></code></pre></div>
<p>Об’єкт класу <code>logical</code> створюється подібним чином за допомогою команди <code>logical(n)</code>, але в цьому випадку створюється логічний вектор довжини n, що складається лише зі значень FALSE.</p>
<p>Об’єкт типу <code>character</code> створюється функцією <code>character(n)</code>, результат – порожній символьний вектор довжини <code>n</code>.</p>
<p>Перетворення типів даних один в одний реалізується за допомогою групи функцій, що починаються на <code>as.</code> Зокрема, перевести об’єкт в логічний можна за допомогою функції <code>as.logical()</code>, при цьому значення, що не дорівнюють нулю, перетворюються на TRUE, а нульові значення на FALSE. Якщо переводити дані з логічного типу в один з числових, то буде лише два значення: 0, що відповідає значенню до перетворення FALSE та 1, що відповідає значенню TRUE. Символьний об’єкт можна перевести в числовий, якщо він представляє собою число в лапках. Якщо ж в лапках стояв власне символ (або набір символів), то таке перетворення приведе до появи NA (Not Available). Символьні змінні <code>"T"</code> та <code>"F"</code> (як і символьні <code>"TRUE"</code> і <code>"FALSE"</code>) можна перевести в логічні <code>TRUE</code> <code>FALSE</code>.</p>
<div class="sourceCode" id="cb25"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb25-1"><a href="ch1.html#cb25-1"></a>a=<span class="kw">c</span>(<span class="dv">0</span>, <span class="dv">1</span>, <span class="dv">2</span>)</span>
<span id="cb25-2"><a href="ch1.html#cb25-2"></a>b=<span class="kw">as.logical</span>(a)</span>
<span id="cb25-3"><a href="ch1.html#cb25-3"></a>b</span>
<span id="cb25-4"><a href="ch1.html#cb25-4"></a>[<span class="dv">1</span>] <span class="ot">FALSE</span>  <span class="ot">TRUE</span>  <span class="ot">TRUE</span></span>
<span id="cb25-5"><a href="ch1.html#cb25-5"></a>c=<span class="kw">as.character</span>(a)</span>
<span id="cb25-6"><a href="ch1.html#cb25-6"></a>c</span>
<span id="cb25-7"><a href="ch1.html#cb25-7"></a>[<span class="dv">1</span>] <span class="st">&quot;0&quot;</span> <span class="st">&quot;1&quot;</span> <span class="st">&quot;2&quot;</span></span></code></pre></div>
<div class="sourceCode" id="cb26"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb26-1"><a href="ch1.html#cb26-1"></a><span class="kw">as.double</span>(b)</span>
<span id="cb26-2"><a href="ch1.html#cb26-2"></a>[<span class="dv">1</span>] <span class="dv">0</span> <span class="dv">1</span> <span class="dv">1</span></span>
<span id="cb26-3"><a href="ch1.html#cb26-3"></a><span class="kw">as.numeric</span>(c)</span>
<span id="cb26-4"><a href="ch1.html#cb26-4"></a>[<span class="dv">1</span>] <span class="dv">0</span> <span class="dv">1</span> <span class="dv">2</span></span></code></pre></div>
<p>В R існує кілька особливих об’єктів, які можна використовувати у виразах:</p>
<ul>
<li><p><code>Inf</code> (<span class="math inline">\(\infty\)</span>) – нескінченність та <code>-Inf</code> (<span class="math inline">\(-\infty\)</span>) – від’ємна нескінченність.</p></li>
<li><p><code>NA</code> (Not Available) – значення, яке не існує;</p></li>
<li><p><code>NaN</code> (Not a Number) – не число;</p></li>
<li><p><code>NULL</code> – “нічого”, порожній об’єкт. Обнулити об’єкт можна за допомогою команди <code>is.null()</code>.</p></li>
</ul>
</div>
<div id="структури-даних-в-r" class="section level2" number="1.3">
<h2><span class="header-section-number">1.3</span> Структури даних в R</h2>
<p>Основними структурами даних є вектори, матриці, масиви, фрейми та списки.</p>
<div id="вектори" class="section level3" number="1.3.1">
<h3><span class="header-section-number">1.3.1</span> Вектори</h3>
<p>Базовим об’єктом даних в R є вектор. Різні види векторів додають такі можливості, як робота з матрицями, (багатовимірними) масивами даних, (різнорідними) списками, факторами та фреймами.</p>
<p>Вектор – це одновимірний об’єкт, що містить елементи одного типу.</p>
<div id="створення-векторів" class="section level4 unnumbered" number="">
<h4>Створення векторів</h4>
<p>Основна функція для створення векторів – <code>c()</code> (concatenation). В якості аргументів цієї функції перераховують значення (або інші вектори), розділені комою, які треба об’єднати у вектор. Якщо об’єднати вектори різних типів даних, то R зведе їх до одного, більш пріоритетного:</p>
<div class="sourceCode" id="cb27"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb27-1"><a href="ch1.html#cb27-1"></a>v1=<span class="kw">c</span>(<span class="ot">TRUE</span>, <span class="ot">TRUE</span>, <span class="ot">FALSE</span>)</span>
<span id="cb27-2"><a href="ch1.html#cb27-2"></a>v1</span>
<span id="cb27-3"><a href="ch1.html#cb27-3"></a>[<span class="dv">1</span>]  <span class="ot">TRUE</span>  <span class="ot">TRUE</span> <span class="ot">FALSE</span></span></code></pre></div>
<div class="sourceCode" id="cb28"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb28-1"><a href="ch1.html#cb28-1"></a>v2=<span class="kw">c</span>(<span class="dv">1</span>, <span class="dv">2</span>, <span class="dv">4</span>, <span class="dv">5</span>)</span>
<span id="cb28-2"><a href="ch1.html#cb28-2"></a>v2</span>
<span id="cb28-3"><a href="ch1.html#cb28-3"></a>[<span class="dv">1</span>] <span class="dv">1</span> <span class="dv">2</span> <span class="dv">4</span> <span class="dv">5</span></span></code></pre></div>
<div class="sourceCode" id="cb29"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb29-1"><a href="ch1.html#cb29-1"></a>v3=<span class="kw">c</span>(<span class="st">&quot;Hanna&quot;</span>, <span class="st">&quot;Katrin&quot;</span>, <span class="st">&quot;Natalia&quot;</span>)</span>
<span id="cb29-2"><a href="ch1.html#cb29-2"></a>v3</span>
<span id="cb29-3"><a href="ch1.html#cb29-3"></a>[<span class="dv">1</span>] <span class="st">&quot;Hanna&quot;</span>   <span class="st">&quot;Katrin&quot;</span>  <span class="st">&quot;Natalia&quot;</span></span></code></pre></div>
<div class="sourceCode" id="cb30"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb30-1"><a href="ch1.html#cb30-1"></a>v4=<span class="kw">c</span>(v3, <span class="dv">5</span><span class="op">:</span><span class="dv">7</span>)</span>
<span id="cb30-2"><a href="ch1.html#cb30-2"></a>v4</span>
<span id="cb30-3"><a href="ch1.html#cb30-3"></a>[<span class="dv">1</span>] <span class="st">&quot;Hanna&quot;</span>   <span class="st">&quot;Katrin&quot;</span>  <span class="st">&quot;Natalia&quot;</span> <span class="st">&quot;5&quot;</span>       <span class="st">&quot;6&quot;</span>       <span class="st">&quot;7&quot;</span>      </span></code></pre></div>
<div class="sourceCode" id="cb31"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb31-1"><a href="ch1.html#cb31-1"></a><span class="kw">c</span>(<span class="dv">1</span><span class="op">:</span><span class="dv">10</span>)</span>
<span id="cb31-2"><a href="ch1.html#cb31-2"></a> [<span class="dv">1</span>]  <span class="dv">1</span>  <span class="dv">2</span>  <span class="dv">3</span>  <span class="dv">4</span>  <span class="dv">5</span>  <span class="dv">6</span>  <span class="dv">7</span>  <span class="dv">8</span>  <span class="dv">9</span> <span class="dv">10</span></span></code></pre></div>
<div class="sourceCode" id="cb32"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb32-1"><a href="ch1.html#cb32-1"></a><span class="kw">c</span>(<span class="op">-</span><span class="fl">3.14</span><span class="op">:</span><span class="dv">5</span>)</span>
<span id="cb32-2"><a href="ch1.html#cb32-2"></a>[<span class="dv">1</span>] <span class="fl">-3.14</span> <span class="fl">-2.14</span> <span class="fl">-1.14</span> <span class="fl">-0.14</span>  <span class="fl">0.86</span>  <span class="fl">1.86</span>  <span class="fl">2.86</span>  <span class="fl">3.86</span>  <span class="fl">4.86</span></span></code></pre></div>
<div class="sourceCode" id="cb33"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb33-1"><a href="ch1.html#cb33-1"></a><span class="kw">c</span>(<span class="dv">1</span><span class="op">:</span><span class="dv">4</span>, <span class="dv">12</span>, <span class="dv">18</span><span class="op">:</span><span class="dv">20</span>)</span>
<span id="cb33-2"><a href="ch1.html#cb33-2"></a>[<span class="dv">1</span>]  <span class="dv">1</span>  <span class="dv">2</span>  <span class="dv">3</span>  <span class="dv">4</span> <span class="dv">12</span> <span class="dv">18</span> <span class="dv">19</span> <span class="dv">20</span></span></code></pre></div>
<div class="sourceCode" id="cb34"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb34-1"><a href="ch1.html#cb34-1"></a><span class="kw">c</span>(<span class="ot">TRUE</span>, <span class="dv">1</span>)</span>
<span id="cb34-2"><a href="ch1.html#cb34-2"></a>[<span class="dv">1</span>] <span class="dv">1</span> <span class="dv">1</span></span></code></pre></div>
<p>Вектор можна також створити за допомогою функції <code>scan()</code>, яка зчитує значення, які послідовно вводяться з клавіатури. Після кожного нового значення треба натискати клавішу <code>Enter</code>. Завершується виконання команди введенням порожнього рядка. Одним з недоліків цього методу є те, що якщо при вводі значень було зроблено помилку, то доведеться почати вводити дані заново.</p>
<p>Якщо потрібно ввести послідовність чисел, зручно використовувати функцію <code>seq()</code>:</p>
<div class="sourceCode" id="cb35"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb35-1"><a href="ch1.html#cb35-1"></a><span class="kw">seq</span>(<span class="dt">from=</span><span class="dv">2</span>, <span class="dt">to=</span><span class="dv">20</span>, <span class="dt">by=</span><span class="dv">3</span>)</span>
<span id="cb35-2"><a href="ch1.html#cb35-2"></a>[<span class="dv">1</span>]  <span class="dv">2</span>  <span class="dv">5</span>  <span class="dv">8</span> <span class="dv">11</span> <span class="dv">14</span> <span class="dv">17</span> <span class="dv">20</span></span></code></pre></div>
<div class="sourceCode" id="cb36"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb36-1"><a href="ch1.html#cb36-1"></a>v5=<span class="kw">seq</span>(<span class="dv">1</span>, <span class="dv">7</span>)</span>
<span id="cb36-2"><a href="ch1.html#cb36-2"></a>v5</span>
<span id="cb36-3"><a href="ch1.html#cb36-3"></a>[<span class="dv">1</span>] <span class="dv">1</span> <span class="dv">2</span> <span class="dv">3</span> <span class="dv">4</span> <span class="dv">5</span> <span class="dv">6</span> <span class="dv">7</span></span></code></pre></div>
<div class="sourceCode" id="cb37"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb37-1"><a href="ch1.html#cb37-1"></a><span class="kw">seq</span>(<span class="dv">5</span>, <span class="dv">30</span>, <span class="dv">6</span>)</span>
<span id="cb37-2"><a href="ch1.html#cb37-2"></a>[<span class="dv">1</span>]  <span class="dv">5</span> <span class="dv">11</span> <span class="dv">17</span> <span class="dv">23</span> <span class="dv">29</span></span></code></pre></div>
<div class="sourceCode" id="cb38"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb38-1"><a href="ch1.html#cb38-1"></a>v6=<span class="kw">c</span>(<span class="dv">1</span>, <span class="dv">3</span>, <span class="kw">seq</span>(<span class="dv">6</span>, <span class="dv">12</span>, <span class="dv">2</span>))</span>
<span id="cb38-2"><a href="ch1.html#cb38-2"></a>v6</span>
<span id="cb38-3"><a href="ch1.html#cb38-3"></a>[<span class="dv">1</span>]  <span class="dv">1</span>  <span class="dv">3</span>  <span class="dv">6</span>  <span class="dv">8</span> <span class="dv">10</span> <span class="dv">12</span></span></code></pre></div>
<p>Для створення вектора, елементи якого повторюються, є команда <code>rep()</code> (repeat):</p>
<div class="sourceCode" id="cb39"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb39-1"><a href="ch1.html#cb39-1"></a>d=<span class="kw">rep</span>(<span class="ot">TRUE</span>, <span class="dv">6</span>)</span>
<span id="cb39-2"><a href="ch1.html#cb39-2"></a>d</span>
<span id="cb39-3"><a href="ch1.html#cb39-3"></a>[<span class="dv">1</span>] <span class="ot">TRUE</span> <span class="ot">TRUE</span> <span class="ot">TRUE</span> <span class="ot">TRUE</span> <span class="ot">TRUE</span> <span class="ot">TRUE</span></span></code></pre></div>
<p>Елементи вектора можуть мати імена. Можна додати імена, створивши інший вектор:</p>
<div class="sourceCode" id="cb40"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb40-1"><a href="ch1.html#cb40-1"></a>v=<span class="kw">c</span>(<span class="dv">1</span>, <span class="dv">2</span>, <span class="dv">3</span>)</span>
<span id="cb40-2"><a href="ch1.html#cb40-2"></a><span class="kw">names</span>(v)=<span class="kw">c</span>(<span class="st">&quot;a&quot;</span>, <span class="st">&quot;b&quot;</span>, <span class="st">&quot;c&quot;</span>)</span>
<span id="cb40-3"><a href="ch1.html#cb40-3"></a>v</span>
<span id="cb40-4"><a href="ch1.html#cb40-4"></a>a b c </span>
<span id="cb40-5"><a href="ch1.html#cb40-5"></a><span class="dv">1</span> <span class="dv">2</span> <span class="dv">3</span> </span></code></pre></div>
<p>Або</p>
<div class="sourceCode" id="cb41"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb41-1"><a href="ch1.html#cb41-1"></a>v=<span class="kw">c</span>(<span class="st">&quot;a&quot;</span>=<span class="dv">1</span>, <span class="st">&quot;b&quot;</span>=<span class="dv">2</span>, <span class="st">&quot;c&quot;</span>=<span class="dv">3</span>)</span>
<span id="cb41-2"><a href="ch1.html#cb41-2"></a>v</span>
<span id="cb41-3"><a href="ch1.html#cb41-3"></a>a b c </span>
<span id="cb41-4"><a href="ch1.html#cb41-4"></a><span class="dv">1</span> <span class="dv">2</span> <span class="dv">3</span> </span></code></pre></div>
<p>Імена вектора також можуть бути виведені:</p>
<div class="sourceCode" id="cb42"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb42-1"><a href="ch1.html#cb42-1"></a><span class="kw">names</span>(v)</span>
<span id="cb42-2"><a href="ch1.html#cb42-2"></a>[<span class="dv">1</span>] <span class="st">&quot;a&quot;</span> <span class="st">&quot;b&quot;</span> <span class="st">&quot;c&quot;</span></span></code></pre></div>
<p>Видалення імен здійснюється присвоєнням спеціального типу <code>NULL</code>:</p>
<div class="sourceCode" id="cb43"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb43-1"><a href="ch1.html#cb43-1"></a><span class="kw">names</span>(v)=<span class="ot">NULL</span></span>
<span id="cb43-2"><a href="ch1.html#cb43-2"></a>v</span>
<span id="cb43-3"><a href="ch1.html#cb43-3"></a>[<span class="dv">1</span>] <span class="dv">1</span> <span class="dv">2</span> <span class="dv">3</span></span></code></pre></div>
</div>
<div id="операції-над-векторами" class="section level4 unnumbered" number="">
<h4>Операції над векторами</h4>
<p>Більшість операцій над векторами та однорідними елементами проводяться поелементно. Отже, для того, щоб зробити щось над елементами вектора даних, не потрібен цикл, оскільки можна просто виконати операцію одразу з усіма елементами вектора. Можна також оперувати лише елементами з певними індексами, використовуючи «індексний масив». Або можна оперувати тільки елементами, які мають певну властивість.</p>
<p>Всі арифметичні операції над кількома векторами проводяться поелементно і результатом є також вектор:</p>
<div class="sourceCode" id="cb44"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb44-1"><a href="ch1.html#cb44-1"></a>a=<span class="kw">c</span>(<span class="dv">1</span>, <span class="dv">2</span>, <span class="dv">3</span>)</span>
<span id="cb44-2"><a href="ch1.html#cb44-2"></a>a<span class="op">+</span><span class="dv">2</span></span>
<span id="cb44-3"><a href="ch1.html#cb44-3"></a>[<span class="dv">1</span>] <span class="dv">3</span> <span class="dv">4</span> <span class="dv">5</span></span></code></pre></div>
<div class="sourceCode" id="cb45"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb45-1"><a href="ch1.html#cb45-1"></a>b=<span class="kw">c</span>(<span class="dv">4</span>, <span class="dv">5</span>, <span class="dv">6</span>)</span>
<span id="cb45-2"><a href="ch1.html#cb45-2"></a>a<span class="op">+</span>b</span>
<span id="cb45-3"><a href="ch1.html#cb45-3"></a>[<span class="dv">1</span>] <span class="dv">5</span> <span class="dv">7</span> <span class="dv">9</span></span></code></pre></div>
<div class="sourceCode" id="cb46"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb46-1"><a href="ch1.html#cb46-1"></a>a<span class="op">^</span>b</span>
<span id="cb46-2"><a href="ch1.html#cb46-2"></a>[<span class="dv">1</span>]   <span class="dv">1</span>  <span class="dv">32</span> <span class="dv">729</span></span></code></pre></div>
<div class="sourceCode" id="cb47"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb47-1"><a href="ch1.html#cb47-1"></a>(a<span class="op">+</span>b)<span class="op">^</span><span class="dv">2-5</span></span>
<span id="cb47-2"><a href="ch1.html#cb47-2"></a>[<span class="dv">1</span>] <span class="dv">20</span> <span class="dv">44</span> <span class="dv">76</span></span></code></pre></div>
<div class="sourceCode" id="cb48"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb48-1"><a href="ch1.html#cb48-1"></a><span class="kw">c</span>(<span class="dv">1</span><span class="op">:</span><span class="dv">5</span>)<span class="op">+</span><span class="kw">c</span>(<span class="dv">2</span><span class="op">:</span><span class="dv">6</span>)</span>
<span id="cb48-2"><a href="ch1.html#cb48-2"></a>[<span class="dv">1</span>]  <span class="dv">3</span>  <span class="dv">5</span>  <span class="dv">7</span>  <span class="dv">9</span> <span class="dv">11</span></span></code></pre></div>
<p>При цьому, якщо два вектори мають різну кількість елементів, то вектор меншої довжини буде повторюватися стільки разів, щоб відповідати довжині більшого вектора.</p>
<div class="sourceCode" id="cb49"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb49-1"><a href="ch1.html#cb49-1"></a>a=<span class="kw">c</span>(<span class="dv">1</span><span class="op">:</span><span class="dv">7</span>)</span>
<span id="cb49-2"><a href="ch1.html#cb49-2"></a>b=<span class="kw">c</span>(<span class="dv">1</span><span class="op">:</span><span class="dv">10</span>)</span>
<span id="cb49-3"><a href="ch1.html#cb49-3"></a>a<span class="op">+</span>b</span>
<span id="cb49-4"><a href="ch1.html#cb49-4"></a>Warning <span class="cf">in</span> a <span class="op">+</span><span class="st"> </span>b<span class="op">:</span><span class="st"> </span>longer object length is not a multiple of shorter object</span>
<span id="cb49-5"><a href="ch1.html#cb49-5"></a>length</span>
<span id="cb49-6"><a href="ch1.html#cb49-6"></a> [<span class="dv">1</span>]  <span class="dv">2</span>  <span class="dv">4</span>  <span class="dv">6</span>  <span class="dv">8</span> <span class="dv">10</span> <span class="dv">12</span> <span class="dv">14</span>  <span class="dv">9</span> <span class="dv">11</span> <span class="dv">13</span></span></code></pre></div>
<p>Якщо довжина більшого вектора кратна довжині меншого, то попередження не виводиться.</p>
<p>Окрім того є ряд зручних операцій, аргументом яких є вектор, а результатом – число, підраховане певним чином. Наприклад, функція <code>sum()</code> повертає суму елементів вектора, функція <code>mean()</code> рахує середнє арифметичне елементів вектора (взагалі кажучи, всього, що знаходиться в дужках).</p>
<p>Для впорядкування елементів вектора за зростанням чи за спаданням, використовується функція <code>sort()</code> з аргументом <code>decreasing = FALSE</code> або <code>decreasing = TRUE</code> відповідно:</p>
<div class="sourceCode" id="cb50"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb50-1"><a href="ch1.html#cb50-1"></a>a=<span class="kw">c</span>(<span class="dv">2</span>, <span class="dv">5</span>, <span class="dv">1</span>, <span class="dv">4</span>)</span>
<span id="cb50-2"><a href="ch1.html#cb50-2"></a><span class="kw">sort</span>(a, <span class="dt">decreasing =</span> <span class="ot">FALSE</span>)</span>
<span id="cb50-3"><a href="ch1.html#cb50-3"></a>[<span class="dv">1</span>] <span class="dv">1</span> <span class="dv">2</span> <span class="dv">4</span> <span class="dv">5</span></span>
<span id="cb50-4"><a href="ch1.html#cb50-4"></a><span class="kw">sort</span>(a, <span class="dt">decreasing =</span> <span class="ot">TRUE</span>)</span>
<span id="cb50-5"><a href="ch1.html#cb50-5"></a>[<span class="dv">1</span>] <span class="dv">5</span> <span class="dv">4</span> <span class="dv">2</span> <span class="dv">1</span></span></code></pre></div>
<p>Склеїти символьних елементів можна функцією paste(). В найпростішому варіанті, коли елементи – символьні, повертається рядок з пробілами в якості розділювачів:</p>
<div class="sourceCode" id="cb51"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb51-1"><a href="ch1.html#cb51-1"></a><span class="kw">paste</span>(<span class="st">&quot;без&quot;</span>, <span class="st">&quot;муки&quot;</span>, <span class="st">&quot;немає&quot;</span>, <span class="st">&quot;науки&quot;</span>)</span>
<span id="cb51-2"><a href="ch1.html#cb51-2"></a>[<span class="dv">1</span>] <span class="st">&quot;без муки немає науки&quot;</span></span></code></pre></div>
</div>
<div id="виділення-елементів-вектора" class="section level4 unnumbered" number="">
<h4>Виділення елементів вектора</h4>
<p>Елементи вектора можуть бути виділені за допомогою індексів, які вказуються у квадратних дужках. Перший елемент має номер 1, другий – 2 і т.д. Причому індекси можна вказувати по одному, послідовністю, або з використанням функції <code>c()</code>, створюючи вектор потрібних індексів. Вибрані елементи відповідатимуть індексам незалежно від порядку їх використання:</p>
<div class="sourceCode" id="cb52"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb52-1"><a href="ch1.html#cb52-1"></a>v3=<span class="kw">c</span>(<span class="st">&quot;Hanna&quot;</span>, <span class="st">&quot;Katrin&quot;</span>, <span class="st">&quot;Natalia&quot;</span>)</span>
<span id="cb52-2"><a href="ch1.html#cb52-2"></a>v3[<span class="dv">1</span>]</span>
<span id="cb52-3"><a href="ch1.html#cb52-3"></a>[<span class="dv">1</span>] <span class="st">&quot;Hanna&quot;</span></span>
<span id="cb52-4"><a href="ch1.html#cb52-4"></a>v3[<span class="kw">c</span>(<span class="dv">2</span>, <span class="dv">1</span>)]</span>
<span id="cb52-5"><a href="ch1.html#cb52-5"></a>[<span class="dv">1</span>] <span class="st">&quot;Katrin&quot;</span> <span class="st">&quot;Hanna&quot;</span> </span></code></pre></div>
<div class="sourceCode" id="cb53"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb53-1"><a href="ch1.html#cb53-1"></a>v5=<span class="kw">c</span>(<span class="dv">1</span>, <span class="dv">3</span>, <span class="kw">seq</span>(<span class="dv">6</span>, <span class="dv">12</span>, <span class="dv">2</span>))</span>
<span id="cb53-2"><a href="ch1.html#cb53-2"></a>v5[<span class="dv">2</span><span class="op">:</span><span class="dv">5</span>]</span>
<span id="cb53-3"><a href="ch1.html#cb53-3"></a>[<span class="dv">1</span>]  <span class="dv">3</span>  <span class="dv">6</span>  <span class="dv">8</span> <span class="dv">10</span></span>
<span id="cb53-4"><a href="ch1.html#cb53-4"></a>v5[<span class="kw">c</span>(<span class="dv">1</span>,<span class="dv">5</span>)]</span>
<span id="cb53-5"><a href="ch1.html#cb53-5"></a>[<span class="dv">1</span>]  <span class="dv">1</span> <span class="dv">10</span></span></code></pre></div>
<div class="sourceCode" id="cb54"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb54-1"><a href="ch1.html#cb54-1"></a><span class="kw">c</span>(<span class="dv">1</span>, <span class="dv">2</span>, <span class="dv">5</span>, <span class="dv">9</span>)[<span class="kw">c</span>(<span class="dv">4</span>, <span class="dv">2</span>)]</span>
<span id="cb54-2"><a href="ch1.html#cb54-2"></a>[<span class="dv">1</span>] <span class="dv">9</span> <span class="dv">2</span></span></code></pre></div>
<p>Аналогічно можна видалити певні елементи вектора. поставивши знак “мінус” перед відповідними індексами:</p>
<div class="sourceCode" id="cb55"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb55-1"><a href="ch1.html#cb55-1"></a>v5[<span class="op">-</span><span class="kw">c</span>(<span class="dv">1</span>,<span class="dv">5</span>)]</span>
<span id="cb55-2"><a href="ch1.html#cb55-2"></a>[<span class="dv">1</span>]  <span class="dv">3</span>  <span class="dv">6</span>  <span class="dv">8</span> <span class="dv">12</span></span></code></pre></div>
<p>Використовуючи індекси, можна здійснювати операції над певними елементами різних векторів.</p>
<p>Оскільки елементи вектора мають імена, можна також виділити частину вектора за їх іменами:</p>
<div class="sourceCode" id="cb56"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb56-1"><a href="ch1.html#cb56-1"></a>v=<span class="kw">c</span>(<span class="dv">177</span>, <span class="dv">178</span>, <span class="dv">175</span>)</span>
<span id="cb56-2"><a href="ch1.html#cb56-2"></a><span class="kw">names</span>(v)=<span class="kw">c</span>(<span class="st">&quot;Hanna&quot;</span>, <span class="st">&quot;Katrin&quot;</span>, <span class="st">&quot;Iryna&quot;</span>)</span>
<span id="cb56-3"><a href="ch1.html#cb56-3"></a>v[<span class="st">&quot;Katrin&quot;</span>]</span>
<span id="cb56-4"><a href="ch1.html#cb56-4"></a>Katrin </span>
<span id="cb56-5"><a href="ch1.html#cb56-5"></a>   <span class="dv">178</span> </span></code></pre></div>
<p>В якості критерію для вибору значень може бути логічний вираз:</p>
<div class="sourceCode" id="cb57"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb57-1"><a href="ch1.html#cb57-1"></a>v[v<span class="op">&gt;</span><span class="dv">176</span>]</span>
<span id="cb57-2"><a href="ch1.html#cb57-2"></a> Hanna Katrin </span>
<span id="cb57-3"><a href="ch1.html#cb57-3"></a>   <span class="dv">177</span>    <span class="dv">178</span> </span></code></pre></div>
<p>Можна виділити частину вектора, використовуючи булеві змінні:</p>
<div class="sourceCode" id="cb58"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb58-1"><a href="ch1.html#cb58-1"></a>h=<span class="kw">c</span>(<span class="st">&quot;small&quot;</span>, <span class="st">&quot;large&quot;</span>, <span class="st">&quot;huge&quot;</span>)</span>
<span id="cb58-2"><a href="ch1.html#cb58-2"></a>big=h<span class="op">!=</span><span class="st">&quot;small&quot;</span></span>
<span id="cb58-3"><a href="ch1.html#cb58-3"></a>big</span>
<span id="cb58-4"><a href="ch1.html#cb58-4"></a>[<span class="dv">1</span>] <span class="ot">FALSE</span>  <span class="ot">TRUE</span>  <span class="ot">TRUE</span></span>
<span id="cb58-5"><a href="ch1.html#cb58-5"></a>h[big]</span>
<span id="cb58-6"><a href="ch1.html#cb58-6"></a>[<span class="dv">1</span>] <span class="st">&quot;large&quot;</span> <span class="st">&quot;huge&quot;</span> </span></code></pre></div>
<div class="sourceCode" id="cb59"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb59-1"><a href="ch1.html#cb59-1"></a>w=<span class="kw">c</span>(<span class="dv">1</span>, <span class="dv">2</span>, <span class="dv">4</span>, <span class="dv">4</span>, <span class="dv">6</span>)</span>
<span id="cb59-2"><a href="ch1.html#cb59-2"></a>j=w<span class="op">&lt;</span><span class="dv">4</span></span>
<span id="cb59-3"><a href="ch1.html#cb59-3"></a>w[j]</span>
<span id="cb59-4"><a href="ch1.html#cb59-4"></a>[<span class="dv">1</span>] <span class="dv">1</span> <span class="dv">2</span></span>
<span id="cb59-5"><a href="ch1.html#cb59-5"></a>k=w<span class="op">==</span><span class="dv">4</span></span>
<span id="cb59-6"><a href="ch1.html#cb59-6"></a>w[k]</span>
<span id="cb59-7"><a href="ch1.html#cb59-7"></a>[<span class="dv">1</span>] <span class="dv">4</span> <span class="dv">4</span></span></code></pre></div>
<div class="sourceCode" id="cb60"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb60-1"><a href="ch1.html#cb60-1"></a>b=<span class="kw">c</span>(<span class="dv">4</span>, <span class="dv">2</span>, <span class="dv">3</span>, <span class="dv">2</span>, <span class="dv">4</span>, <span class="dv">5</span>)</span>
<span id="cb60-2"><a href="ch1.html#cb60-2"></a>b[b<span class="op">==</span><span class="dv">2</span>]</span>
<span id="cb60-3"><a href="ch1.html#cb60-3"></a>[<span class="dv">1</span>] <span class="dv">2</span> <span class="dv">2</span></span>
<span id="cb60-4"><a href="ch1.html#cb60-4"></a>b[b<span class="op">&gt;</span><span class="kw">mean</span>(b)]</span>
<span id="cb60-5"><a href="ch1.html#cb60-5"></a>[<span class="dv">1</span>] <span class="dv">4</span> <span class="dv">4</span> <span class="dv">5</span></span></code></pre></div>
</div>
</div>
<div id="матриці" class="section level3" number="1.3.2">
<h3><span class="header-section-number">1.3.2</span> Матриці</h3>
<p>Матриця (<code>matrix</code>) – це двовимірний набір елементів одного типу (Зауважимо, що аналогічною структурою є масив (<code>array</code>) – сукупність однотипних елементів розмірністю більше двох). Основна функція для створення матриць – <code>matrix()</code>, головними аргументами є вектор даних, який треба перетворити у матрицю, <code>nrow</code> – кількість рядків матриці, що утворюється, або <code>ncol</code> – кількість стовпчиків. Ця функція розставляє елементи зверху донизу, починаючи з першого стовпчика. Але можна змінити порядок розстановки елементів (зліва направо по рядках), зазначивши аргумент <code>byrow= TRUE</code> (за замовчуванням значення цього аргумента <code>FALSE</code>).</p>
<div class="sourceCode" id="cb61"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb61-1"><a href="ch1.html#cb61-1"></a><span class="kw">matrix</span>(<span class="dv">1</span><span class="op">:</span><span class="dv">6</span>, <span class="dt">nrow=</span><span class="dv">2</span>)</span>
<span id="cb61-2"><a href="ch1.html#cb61-2"></a>     [,<span class="dv">1</span>] [,<span class="dv">2</span>] [,<span class="dv">3</span>]</span>
<span id="cb61-3"><a href="ch1.html#cb61-3"></a>[<span class="dv">1</span>,]    <span class="dv">1</span>    <span class="dv">3</span>    <span class="dv">5</span></span>
<span id="cb61-4"><a href="ch1.html#cb61-4"></a>[<span class="dv">2</span>,]    <span class="dv">2</span>    <span class="dv">4</span>    <span class="dv">6</span></span></code></pre></div>
<div class="sourceCode" id="cb62"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb62-1"><a href="ch1.html#cb62-1"></a><span class="kw">matrix</span>(<span class="dv">1</span><span class="op">:</span><span class="dv">6</span>, <span class="dt">nrow=</span><span class="dv">2</span>, <span class="dt">byrow =</span> <span class="ot">TRUE</span>)</span>
<span id="cb62-2"><a href="ch1.html#cb62-2"></a>     [,<span class="dv">1</span>] [,<span class="dv">2</span>] [,<span class="dv">3</span>]</span>
<span id="cb62-3"><a href="ch1.html#cb62-3"></a>[<span class="dv">1</span>,]    <span class="dv">1</span>    <span class="dv">2</span>    <span class="dv">3</span></span>
<span id="cb62-4"><a href="ch1.html#cb62-4"></a>[<span class="dv">2</span>,]    <span class="dv">4</span>    <span class="dv">5</span>    <span class="dv">6</span></span></code></pre></div>
<p>Якщо елементів вказаного вектора не вистачає для заповнення матриці вказаного розміру, елементи, яких не вистачає, будуть взяті з того ж вектора, при цьому виведеться відповідне попередження:</p>
<div class="sourceCode" id="cb63"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb63-1"><a href="ch1.html#cb63-1"></a><span class="kw">matrix</span>(<span class="dv">1</span><span class="op">:</span><span class="dv">6</span>, <span class="dt">nrow=</span><span class="dv">2</span>, <span class="dt">ncol =</span> <span class="dv">5</span>)</span>
<span id="cb63-2"><a href="ch1.html#cb63-2"></a>Warning <span class="cf">in</span> <span class="kw">matrix</span>(<span class="dv">1</span><span class="op">:</span><span class="dv">6</span>, <span class="dt">nrow =</span> <span class="dv">2</span>, <span class="dt">ncol =</span> <span class="dv">5</span>)<span class="op">:</span><span class="st"> </span>data length [<span class="dv">6</span>] is not a sub<span class="op">-</span></span>
<span id="cb63-3"><a href="ch1.html#cb63-3"></a>multiple or multiple of the number of columns [<span class="dv">5</span>]</span>
<span id="cb63-4"><a href="ch1.html#cb63-4"></a>     [,<span class="dv">1</span>] [,<span class="dv">2</span>] [,<span class="dv">3</span>] [,<span class="dv">4</span>] [,<span class="dv">5</span>]</span>
<span id="cb63-5"><a href="ch1.html#cb63-5"></a>[<span class="dv">1</span>,]    <span class="dv">1</span>    <span class="dv">3</span>    <span class="dv">5</span>    <span class="dv">1</span>    <span class="dv">3</span></span>
<span id="cb63-6"><a href="ch1.html#cb63-6"></a>[<span class="dv">2</span>,]    <span class="dv">2</span>    <span class="dv">4</span>    <span class="dv">6</span>    <span class="dv">2</span>    <span class="dv">4</span></span></code></pre></div>
<p>Визначити розмірність матриці можна за допомогою функції <code>dim()</code> (<code>dimension</code>), яка поверне два значення: кількість рядків та кількість стовпчиків:</p>
<div class="sourceCode" id="cb64"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb64-1"><a href="ch1.html#cb64-1"></a>m=<span class="kw">matrix</span>(<span class="dv">1</span><span class="op">:</span><span class="dv">6</span>, <span class="dt">nrow=</span><span class="dv">2</span>)</span>
<span id="cb64-2"><a href="ch1.html#cb64-2"></a><span class="kw">dim</span>(m)</span>
<span id="cb64-3"><a href="ch1.html#cb64-3"></a>[<span class="dv">1</span>] <span class="dv">2</span> <span class="dv">3</span></span></code></pre></div>
<p>В якості назв рядків та стовпчиків матриці, що утворюється, автоматично виводяться відповідні індексні номери (рядки – [1,], [2,], стовпчики – [,1] [,2] [,3]). Проте рядкам та стовпчикам можна присвоїти імена за допомогою відповідно функцій <code>rownames()</code> та <code>colnames()</code>:</p>
<div class="sourceCode" id="cb65"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb65-1"><a href="ch1.html#cb65-1"></a>m=<span class="kw">matrix</span>(<span class="kw">c</span>(<span class="dv">177</span>, <span class="dv">178</span>, <span class="dv">175</span>), <span class="dt">nrow=</span><span class="dv">1</span>)</span>
<span id="cb65-2"><a href="ch1.html#cb65-2"></a><span class="kw">rownames</span>(m)=<span class="kw">c</span>(<span class="st">&quot;height&quot;</span>)</span>
<span id="cb65-3"><a href="ch1.html#cb65-3"></a><span class="kw">colnames</span>(m)=<span class="kw">c</span>(<span class="st">&quot;Hanna&quot;</span>, <span class="st">&quot;Katrin&quot;</span>, <span class="st">&quot;Iryna&quot;</span>)</span>
<span id="cb65-4"><a href="ch1.html#cb65-4"></a>m</span>
<span id="cb65-5"><a href="ch1.html#cb65-5"></a>       Hanna Katrin Iryna</span>
<span id="cb65-6"><a href="ch1.html#cb65-6"></a>height   <span class="dv">177</span>    <span class="dv">178</span>   <span class="dv">175</span></span></code></pre></div>
<p>Матрицю можна також створити, “склеївши” кілька векторів-стовпчиків або векторів-рядків за допомогою відповідно функцій <code>cbind()</code> та <code>rbind()</code>. Склеїти можна не тільки вектори, але й матриці:</p>
<div class="sourceCode" id="cb66"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb66-1"><a href="ch1.html#cb66-1"></a>m1=<span class="kw">matrix</span>(<span class="dv">1</span><span class="op">:</span><span class="dv">3</span>, <span class="dt">nrow=</span><span class="dv">1</span>)</span>
<span id="cb66-2"><a href="ch1.html#cb66-2"></a>m2=<span class="kw">matrix</span>(<span class="dv">4</span><span class="op">:</span><span class="dv">9</span>, <span class="dt">nrow=</span><span class="dv">2</span>)</span>
<span id="cb66-3"><a href="ch1.html#cb66-3"></a><span class="kw">rbind</span>(m1, m2)</span>
<span id="cb66-4"><a href="ch1.html#cb66-4"></a>     [,<span class="dv">1</span>] [,<span class="dv">2</span>] [,<span class="dv">3</span>]</span>
<span id="cb66-5"><a href="ch1.html#cb66-5"></a>[<span class="dv">1</span>,]    <span class="dv">1</span>    <span class="dv">2</span>    <span class="dv">3</span></span>
<span id="cb66-6"><a href="ch1.html#cb66-6"></a>[<span class="dv">2</span>,]    <span class="dv">4</span>    <span class="dv">6</span>    <span class="dv">8</span></span>
<span id="cb66-7"><a href="ch1.html#cb66-7"></a>[<span class="dv">3</span>,]    <span class="dv">5</span>    <span class="dv">7</span>    <span class="dv">9</span></span></code></pre></div>
<div class="sourceCode" id="cb67"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb67-1"><a href="ch1.html#cb67-1"></a>a=<span class="kw">c</span>(<span class="dv">1</span><span class="op">:</span><span class="dv">4</span>)</span>
<span id="cb67-2"><a href="ch1.html#cb67-2"></a>b=<span class="kw">c</span>(<span class="dv">5</span><span class="op">:</span><span class="dv">8</span>)</span>
<span id="cb67-3"><a href="ch1.html#cb67-3"></a><span class="kw">cbind</span>(a, b)</span>
<span id="cb67-4"><a href="ch1.html#cb67-4"></a>     a b</span>
<span id="cb67-5"><a href="ch1.html#cb67-5"></a>[<span class="dv">1</span>,] <span class="dv">1</span> <span class="dv">5</span></span>
<span id="cb67-6"><a href="ch1.html#cb67-6"></a>[<span class="dv">2</span>,] <span class="dv">2</span> <span class="dv">6</span></span>
<span id="cb67-7"><a href="ch1.html#cb67-7"></a>[<span class="dv">3</span>,] <span class="dv">3</span> <span class="dv">7</span></span>
<span id="cb67-8"><a href="ch1.html#cb67-8"></a>[<span class="dv">4</span>,] <span class="dv">4</span> <span class="dv">8</span></span></code></pre></div>
<div id="виділення-елементів-матриці" class="section level4 unnumbered" number="">
<h4>Виділення елементів матриці</h4>
<p>Елементи матриць виділяються аналогічно тому, як це робиться для векторів. Зрозуміло, що тепер в квадратних дужках треба вказати подвійний індекс – номер рядка та номер стовпчика, на перетині яких знаходиться потрібний елемент. Можна вибрати кілька елементів з послідовними номерами або дані з певних рядків чи стовпчиків:</p>
<div class="sourceCode" id="cb68"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb68-1"><a href="ch1.html#cb68-1"></a>m=<span class="kw">matrix</span>(<span class="dv">1</span><span class="op">:</span><span class="dv">6</span>, <span class="dt">nrow=</span><span class="dv">2</span>)</span>
<span id="cb68-2"><a href="ch1.html#cb68-2"></a>m[<span class="dv">1</span>, <span class="dv">2</span>]</span>
<span id="cb68-3"><a href="ch1.html#cb68-3"></a>[<span class="dv">1</span>] <span class="dv">3</span></span>
<span id="cb68-4"><a href="ch1.html#cb68-4"></a>m[ , <span class="dv">2</span>]</span>
<span id="cb68-5"><a href="ch1.html#cb68-5"></a>[<span class="dv">1</span>] <span class="dv">3</span> <span class="dv">4</span></span>
<span id="cb68-6"><a href="ch1.html#cb68-6"></a>m[<span class="dv">1</span>, ]</span>
<span id="cb68-7"><a href="ch1.html#cb68-7"></a>[<span class="dv">1</span>] <span class="dv">1</span> <span class="dv">3</span> <span class="dv">5</span></span>
<span id="cb68-8"><a href="ch1.html#cb68-8"></a>m[<span class="dv">1</span>, <span class="dv">2</span><span class="op">:</span><span class="dv">3</span>]</span>
<span id="cb68-9"><a href="ch1.html#cb68-9"></a>[<span class="dv">1</span>] <span class="dv">3</span> <span class="dv">5</span></span></code></pre></div>
</div>
<div id="операції-з-матрицями" class="section level4 unnumbered" number="">
<h4>Операції з матрицями</h4>
<p>Арифметичні операції, як і для векторів, проводяться поелементно. Такі операції як <code>sum()</code> та <code>mean()</code> повертають суму та відповідне середнє арифметичне всіх елементів матриці</p>
<div class="sourceCode" id="cb69"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb69-1"><a href="ch1.html#cb69-1"></a>m=<span class="kw">matrix</span>(<span class="dv">1</span><span class="op">:</span><span class="dv">6</span>, <span class="dt">nrow=</span><span class="dv">2</span>)</span>
<span id="cb69-2"><a href="ch1.html#cb69-2"></a><span class="kw">sum</span>(m)</span>
<span id="cb69-3"><a href="ch1.html#cb69-3"></a>[<span class="dv">1</span>] <span class="dv">21</span></span>
<span id="cb69-4"><a href="ch1.html#cb69-4"></a><span class="kw">mean</span>(m)</span>
<span id="cb69-5"><a href="ch1.html#cb69-5"></a>[<span class="dv">1</span>] <span class="fl">3.5</span></span>
<span id="cb69-6"><a href="ch1.html#cb69-6"></a><span class="kw">mean</span>(m[ ,<span class="dv">2</span><span class="op">:</span><span class="dv">3</span>])</span>
<span id="cb69-7"><a href="ch1.html#cb69-7"></a>[<span class="dv">1</span>] <span class="fl">4.5</span></span></code></pre></div>
<p>Операція транспонування здійснюється функцією <code>t()</code> (transpose):</p>
<div class="sourceCode" id="cb70"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb70-1"><a href="ch1.html#cb70-1"></a>m</span>
<span id="cb70-2"><a href="ch1.html#cb70-2"></a>     [,<span class="dv">1</span>] [,<span class="dv">2</span>] [,<span class="dv">3</span>]</span>
<span id="cb70-3"><a href="ch1.html#cb70-3"></a>[<span class="dv">1</span>,]    <span class="dv">1</span>    <span class="dv">3</span>    <span class="dv">5</span></span>
<span id="cb70-4"><a href="ch1.html#cb70-4"></a>[<span class="dv">2</span>,]    <span class="dv">2</span>    <span class="dv">4</span>    <span class="dv">6</span></span>
<span id="cb70-5"><a href="ch1.html#cb70-5"></a><span class="kw">t</span>(m)</span>
<span id="cb70-6"><a href="ch1.html#cb70-6"></a>     [,<span class="dv">1</span>] [,<span class="dv">2</span>]</span>
<span id="cb70-7"><a href="ch1.html#cb70-7"></a>[<span class="dv">1</span>,]    <span class="dv">1</span>    <span class="dv">2</span></span>
<span id="cb70-8"><a href="ch1.html#cb70-8"></a>[<span class="dv">2</span>,]    <span class="dv">3</span>    <span class="dv">4</span></span>
<span id="cb70-9"><a href="ch1.html#cb70-9"></a>[<span class="dv">3</span>,]    <span class="dv">5</span>    <span class="dv">6</span></span></code></pre></div>
<p>Ще декілька функцій для матриць:</p>
<ul>
<li><code>diag(m)</code> повертає діагональ матриці <code>m</code>;</li>
<li><code>%*%</code> – оператор множення матриць;</li>
<li><code>solve(a, b)</code> знаходить розв’язок <code>x</code> матричного рівняння <code>a %*% x = b</code>, де
<code>a</code> і <code>b</code> - матриці;</li>
<li><code>solve(m)</code> повертає матрицю, обернену до матриці <code>m</code>;</li>
<li><code>rowsum(m)</code> та <code>rowSums(m)</code> рахують суми по кожному з рядків матриці <code>m</code> або іншого схожого за структурою об’єкта;</li>
<li><code>colsum(m)</code>, <code>colSums(m)</code> аналогічні попередній функції, але рахують суми по стовпчиках;</li>
<li><code>rowMeans(m)</code> рахує середні значення по рядках матриці <code>m</code>;</li>
<li><code>colMeans(m)</code> рахує середні значення по стовпчиках матриці <code>m</code>.</li>
</ul>
</div>
</div>
<div id="категоризовані-дані.-фактори" class="section level3" number="1.3.3">
<h3><span class="header-section-number">1.3.3</span> Категоризовані дані. Фактори</h3>
<p>В R фактори (<code>factor</code>) зберігають дані, які приймають значення зі скінченної кількості категорій (група крові, стать, належність до вікової групи), та представляють номінальну чи рангову шкалу.</p>
<div class="sourceCode" id="cb71"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb71-1"><a href="ch1.html#cb71-1"></a>v=<span class="kw">c</span>(<span class="st">&quot;woman&quot;</span>, <span class="st">&quot;woman&quot;</span>, <span class="st">&quot;man&quot;</span>)</span>
<span id="cb71-2"><a href="ch1.html#cb71-2"></a><span class="kw">factor</span>(v)</span>
<span id="cb71-3"><a href="ch1.html#cb71-3"></a>[<span class="dv">1</span>] woman woman man  </span>
<span id="cb71-4"><a href="ch1.html#cb71-4"></a>Levels<span class="op">:</span><span class="st"> </span>man woman</span></code></pre></div>
<p>Рівні фактора (<code>levels</code>) – це можливі категорії, і вони виводяться разом з даними в алфавітному порядку. Коли фактори створюються за допомогою функції <code>factor()</code>, R автоматично виділяє рівні. Рівні фактору можна побачити за допомогою функції <code>levels()</code>. За бажанням їх можна перейменувати, при цьому спосіб виведення даних також змінюється.</p>
<div class="sourceCode" id="cb72"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb72-1"><a href="ch1.html#cb72-1"></a>v=<span class="kw">c</span>(<span class="st">&quot;woman&quot;</span>, <span class="st">&quot;woman&quot;</span>, <span class="st">&quot;man&quot;</span>)</span>
<span id="cb72-2"><a href="ch1.html#cb72-2"></a>f=<span class="kw">factor</span>(v)</span>
<span id="cb72-3"><a href="ch1.html#cb72-3"></a><span class="kw">levels</span>(f)</span>
<span id="cb72-4"><a href="ch1.html#cb72-4"></a>[<span class="dv">1</span>] <span class="st">&quot;man&quot;</span>   <span class="st">&quot;woman&quot;</span></span>
<span id="cb72-5"><a href="ch1.html#cb72-5"></a><span class="kw">levels</span>(f)=<span class="kw">c</span>(<span class="st">&quot;m&quot;</span>, <span class="st">&quot;w&quot;</span>)</span>
<span id="cb72-6"><a href="ch1.html#cb72-6"></a><span class="kw">levels</span>(f)</span>
<span id="cb72-7"><a href="ch1.html#cb72-7"></a>[<span class="dv">1</span>] <span class="st">&quot;m&quot;</span> <span class="st">&quot;w&quot;</span></span>
<span id="cb72-8"><a href="ch1.html#cb72-8"></a>f</span>
<span id="cb72-9"><a href="ch1.html#cb72-9"></a>[<span class="dv">1</span>] w w m</span>
<span id="cb72-10"><a href="ch1.html#cb72-10"></a>Levels<span class="op">:</span><span class="st"> </span>m w</span></code></pre></div>
<div id="групування-категоризованих-даних" class="section level4 unnumbered" number="">
<h4>Групування категоризованих даних</h4>
<p>Збереження даних у фактори дозволяє робити корисні речі. Наприклад, побачити абсолютні частоти спостережень кожної категорії (рівня), використовуючи функцію <code>summary()</code>:</p>
<div class="sourceCode" id="cb73"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb73-1"><a href="ch1.html#cb73-1"></a><span class="kw">summary</span>(f)</span>
<span id="cb73-2"><a href="ch1.html#cb73-2"></a>m w </span>
<span id="cb73-3"><a href="ch1.html#cb73-3"></a><span class="dv">1</span> <span class="dv">2</span> </span></code></pre></div>
<p>Якщо застосувати цю функцію безпосередньо до вектора з текстовими змінними, матимемо:</p>
<div class="sourceCode" id="cb74"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb74-1"><a href="ch1.html#cb74-1"></a>v=<span class="kw">c</span>(<span class="st">&quot;woman&quot;</span>, <span class="st">&quot;woman&quot;</span>, <span class="st">&quot;man&quot;</span>)</span>
<span id="cb74-2"><a href="ch1.html#cb74-2"></a><span class="kw">summary</span>(v)</span>
<span id="cb74-3"><a href="ch1.html#cb74-3"></a>   Length     Class      Mode </span>
<span id="cb74-4"><a href="ch1.html#cb74-4"></a>        <span class="dv">3</span> character character </span></code></pre></div>
<p>Можна виділити фактор квадратними дужками, як у векторах. При цьому все одно виводяться всі рівні фактора:</p>
<div class="sourceCode" id="cb75"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb75-1"><a href="ch1.html#cb75-1"></a>v=<span class="kw">c</span>(<span class="st">&quot;woman&quot;</span>, <span class="st">&quot;woman&quot;</span>, <span class="st">&quot;man&quot;</span>)</span>
<span id="cb75-2"><a href="ch1.html#cb75-2"></a>f=<span class="kw">factor</span>(v)</span>
<span id="cb75-3"><a href="ch1.html#cb75-3"></a>f[<span class="dv">1</span>]</span>
<span id="cb75-4"><a href="ch1.html#cb75-4"></a>[<span class="dv">1</span>] woman</span>
<span id="cb75-5"><a href="ch1.html#cb75-5"></a>Levels<span class="op">:</span><span class="st"> </span>man woman</span></code></pre></div>
<p>Знаки порівняння можуть порівнювати текстові величини за алфавітом. Проте неможна порівнювати фактори без визначеного порядку. Ординальні змінні (яким властивий порядок) можуть бути представлені в R як впорядковані (<code>ordered</code>) фактори за використання у функції <code>factor()</code> аргументу <code>ordered=TRUE</code>. Текстові змінні автоматично впорядковуються за алфавітом.</p>
<div class="sourceCode" id="cb76"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb76-1"><a href="ch1.html#cb76-1"></a>h=<span class="kw">c</span>(<span class="st">&quot;small&quot;</span>, <span class="st">&quot;small&quot;</span>, <span class="st">&quot;large&quot;</span>, <span class="st">&quot;huge&quot;</span>)</span>
<span id="cb76-2"><a href="ch1.html#cb76-2"></a><span class="kw">factor</span>(h, <span class="dt">ordered =</span> <span class="ot">TRUE</span>)</span>
<span id="cb76-3"><a href="ch1.html#cb76-3"></a>[<span class="dv">1</span>] small small large huge </span>
<span id="cb76-4"><a href="ch1.html#cb76-4"></a>Levels<span class="op">:</span><span class="st"> </span>huge <span class="op">&lt;</span><span class="st"> </span>large <span class="op">&lt;</span><span class="st"> </span>small</span></code></pre></div>
<p>Для того, щоб вказати правильний порядок, треба окрім аргументу <code>ordered=TRUE</code> додати аргумент <code>levels</code> функції <code>factor()</code> з вказаними рівнями в потрібному порядку. В цьому випадку буде введено порядок рівнів, заданий аргументом <code>levels</code>:</p>
<div class="sourceCode" id="cb77"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb77-1"><a href="ch1.html#cb77-1"></a>h=<span class="kw">c</span>(<span class="st">&quot;small&quot;</span>, <span class="st">&quot;small&quot;</span>, <span class="st">&quot;large&quot;</span>, <span class="st">&quot;huge&quot;</span>)</span>
<span id="cb77-2"><a href="ch1.html#cb77-2"></a><span class="kw">factor</span>(h, <span class="dt">levels =</span> <span class="kw">c</span>(<span class="st">&quot;small&quot;</span>, <span class="st">&quot;large&quot;</span>, <span class="st">&quot;huge&quot;</span>), <span class="dt">ordered =</span> <span class="ot">TRUE</span>)</span>
<span id="cb77-3"><a href="ch1.html#cb77-3"></a>[<span class="dv">1</span>] small small large huge </span>
<span id="cb77-4"><a href="ch1.html#cb77-4"></a>Levels<span class="op">:</span><span class="st"> </span>small <span class="op">&lt;</span><span class="st"> </span>large <span class="op">&lt;</span><span class="st"> </span>huge</span></code></pre></div>
<p>Тепер фактори можна порівнювати:</p>
<div class="sourceCode" id="cb78"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb78-1"><a href="ch1.html#cb78-1"></a>h=<span class="kw">c</span>(<span class="st">&quot;small&quot;</span>, <span class="st">&quot;small&quot;</span>, <span class="st">&quot;large&quot;</span>, <span class="st">&quot;huge&quot;</span>)</span>
<span id="cb78-2"><a href="ch1.html#cb78-2"></a>f=<span class="kw">factor</span>(h, <span class="dt">levels =</span> <span class="kw">c</span>(<span class="st">&quot;small&quot;</span>, <span class="st">&quot;large&quot;</span>, <span class="st">&quot;huge&quot;</span>), <span class="dt">ordered =</span> <span class="ot">TRUE</span>)</span>
<span id="cb78-3"><a href="ch1.html#cb78-3"></a>f[<span class="dv">1</span>]<span class="op">&lt;</span>f[<span class="dv">4</span>]</span>
<span id="cb78-4"><a href="ch1.html#cb78-4"></a>[<span class="dv">1</span>] <span class="ot">TRUE</span></span></code></pre></div>
</div>
</div>
<div id="фрейми-таблиці-даних" class="section level3" number="1.3.4">
<h3><span class="header-section-number">1.3.4</span> Фрейми (таблиці) даних</h3>
<p>Фрейми даних (<code>data frame</code>) – це, як і матриця, двомірний набір даних (таблиця), проте, на відміну від матриць, стовпчики у фреймах можуть містити дані різного типу. Тип даних всередині кожного стовпчика є сталим. Створити фрейм можна з кількох заданих векторів (які будуть стовпчиками таблиці) за допомогою функції <code>data.frame()</code>:</p>
<div class="sourceCode" id="cb79"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb79-1"><a href="ch1.html#cb79-1"></a>sex=<span class="kw">c</span>(<span class="st">&quot;man&quot;</span>, <span class="st">&quot;woman&quot;</span>, <span class="st">&quot;man&quot;</span>)</span>
<span id="cb79-2"><a href="ch1.html#cb79-2"></a>age=<span class="kw">c</span>(<span class="dv">56</span>, <span class="dv">45</span>, <span class="dv">29</span>)</span>
<span id="cb79-3"><a href="ch1.html#cb79-3"></a>desease&lt;-<span class="kw">c</span>(<span class="ot">TRUE</span>, <span class="ot">FALSE</span>, <span class="ot">FALSE</span>)</span>
<span id="cb79-4"><a href="ch1.html#cb79-4"></a>d&lt;-<span class="kw">data.frame</span>(sex, age, desease)</span>
<span id="cb79-5"><a href="ch1.html#cb79-5"></a>d</span>
<span id="cb79-6"><a href="ch1.html#cb79-6"></a>    sex age desease</span>
<span id="cb79-7"><a href="ch1.html#cb79-7"></a><span class="dv">1</span>   man  <span class="dv">56</span>    <span class="ot">TRUE</span></span>
<span id="cb79-8"><a href="ch1.html#cb79-8"></a><span class="dv">2</span> woman  <span class="dv">45</span>   <span class="ot">FALSE</span></span>
<span id="cb79-9"><a href="ch1.html#cb79-9"></a><span class="dv">3</span>   man  <span class="dv">29</span>   <span class="ot">FALSE</span></span></code></pre></div>
<p>Лівий стовпчик з номерами не є стовпчиком фрейма, в ньому – номери (мітки) рядків (спостережень). Якщо даних дуже багато, функції <code>head()</code> та <code>tail()</code> дають можливість продивитися кілька перших чи відповідно останніх рядків.</p>
<p>Ще одна корисна функція – <code>str()</code>, яка повертає структуру вказаного датасету (не лише для фреймів):</p>
<div class="sourceCode" id="cb80"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb80-1"><a href="ch1.html#cb80-1"></a><span class="kw">str</span>(d)</span>
<span id="cb80-2"><a href="ch1.html#cb80-2"></a><span class="st">&#39;data.frame&#39;</span><span class="op">:</span>	<span class="dv">3</span> obs. of  <span class="dv">3</span> variables<span class="op">:</span></span>
<span id="cb80-3"><a href="ch1.html#cb80-3"></a><span class="st"> </span><span class="er">$</span><span class="st"> </span>sex    <span class="op">:</span><span class="st"> </span>chr  <span class="st">&quot;man&quot;</span> <span class="st">&quot;woman&quot;</span> <span class="st">&quot;man&quot;</span></span>
<span id="cb80-4"><a href="ch1.html#cb80-4"></a> <span class="op">$</span><span class="st"> </span>age    <span class="op">:</span><span class="st"> </span>num  <span class="dv">56</span> <span class="dv">45</span> <span class="dv">29</span></span>
<span id="cb80-5"><a href="ch1.html#cb80-5"></a> <span class="op">$</span><span class="st"> </span>desease<span class="op">:</span><span class="st"> </span>logi  <span class="ot">TRUE</span> <span class="ot">FALSE</span> <span class="ot">FALSE</span></span></code></pre></div>
<div id="виділення-елементів-фрейма" class="section level4 unnumbered" number="">
<h4>Виділення елементів фрейма</h4>
<p>В останньому прикладі, зокрема, видно, що кожен стовпчик має назву, за якою до нього можна звернутися. Тобто, окрім традиційного для векторів та матриць виділення елемента за числовим індексом у квадратних дужках (як і для матриць, можна вказати по одному числу для номера рядка та стовпчика, можна вибрати кілька стовпчиків чи рядків), можна звернутися до стовпчика фрейма, вказавши його назву зі знаком $:</p>
<div class="sourceCode" id="cb81"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb81-1"><a href="ch1.html#cb81-1"></a>d<span class="op">$</span>age</span>
<span id="cb81-2"><a href="ch1.html#cb81-2"></a>[<span class="dv">1</span>] <span class="dv">56</span> <span class="dv">45</span> <span class="dv">29</span></span>
<span id="cb81-3"><a href="ch1.html#cb81-3"></a>d<span class="op">$</span>age[<span class="dv">2</span>]</span>
<span id="cb81-4"><a href="ch1.html#cb81-4"></a>[<span class="dv">1</span>] <span class="dv">45</span></span>
<span id="cb81-5"><a href="ch1.html#cb81-5"></a>d[<span class="dv">2</span>, <span class="dv">1</span>]</span>
<span id="cb81-6"><a href="ch1.html#cb81-6"></a>[<span class="dv">1</span>] <span class="st">&quot;woman&quot;</span></span>
<span id="cb81-7"><a href="ch1.html#cb81-7"></a>d[<span class="dv">2</span><span class="op">:</span><span class="dv">3</span>, <span class="dv">1</span><span class="op">:</span><span class="dv">2</span>]</span>
<span id="cb81-8"><a href="ch1.html#cb81-8"></a>    sex age</span>
<span id="cb81-9"><a href="ch1.html#cb81-9"></a><span class="dv">2</span> woman  <span class="dv">45</span></span>
<span id="cb81-10"><a href="ch1.html#cb81-10"></a><span class="dv">3</span>   man  <span class="dv">29</span></span>
<span id="cb81-11"><a href="ch1.html#cb81-11"></a>d[ ,<span class="dv">3</span>]</span>
<span id="cb81-12"><a href="ch1.html#cb81-12"></a>[<span class="dv">1</span>]  <span class="ot">TRUE</span> <span class="ot">FALSE</span> <span class="ot">FALSE</span></span></code></pre></div>
<p>Зверніть увагу, що якщо виділити стовпчик фрейма, то результатом цієї операції буде вектор. Якщо треба, щоб результат операції був також фреймом, треба додати при виборі додатковий аргумент <code>drop=FALSE</code>:</p>
<div class="sourceCode" id="cb82"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb82-1"><a href="ch1.html#cb82-1"></a>d[ ,<span class="dv">3</span>, drop =<span class="st"> </span><span class="ot">FALSE</span>]</span>
<span id="cb82-2"><a href="ch1.html#cb82-2"></a>  desease</span>
<span id="cb82-3"><a href="ch1.html#cb82-3"></a><span class="dv">1</span>    <span class="ot">TRUE</span></span>
<span id="cb82-4"><a href="ch1.html#cb82-4"></a><span class="dv">2</span>   <span class="ot">FALSE</span></span>
<span id="cb82-5"><a href="ch1.html#cb82-5"></a><span class="dv">3</span>   <span class="ot">FALSE</span></span></code></pre></div>
<p>Рядкам також можна присвоїти імена та звертатися до них за іменами:</p>
<div class="sourceCode" id="cb83"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb83-1"><a href="ch1.html#cb83-1"></a>d&lt;-<span class="kw">data.frame</span>(sex, age, desease, <span class="dt">row.names =</span> <span class="kw">c</span>(<span class="st">&quot;case1&quot;</span>, <span class="st">&quot;case2&quot;</span>, <span class="st">&quot;case3&quot;</span>))</span>
<span id="cb83-2"><a href="ch1.html#cb83-2"></a>d[<span class="st">&quot;case1&quot;</span>, ]</span>
<span id="cb83-3"><a href="ch1.html#cb83-3"></a>      sex age desease</span>
<span id="cb83-4"><a href="ch1.html#cb83-4"></a>case1 man  <span class="dv">56</span>    <span class="ot">TRUE</span></span></code></pre></div>
<p>Від’ємні індекси, як і раніше, використовуються для видалення відповідних стовпчиків та рядків.</p>
<p>Ще один корисний спосіб виділити рядки – використання булевого вектора. Такий вектор вказує, які рядки фрейма треба залишити (відповідні елементам вектора зі значенням <code>TRUE</code>), а які – викинути (<code>FALSE</code>).</p>
<div class="sourceCode" id="cb84"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb84-1"><a href="ch1.html#cb84-1"></a>v&lt;-<span class="st"> </span>d<span class="op">$</span>age <span class="op">&gt;</span><span class="st"> </span><span class="dv">30</span> </span>
<span id="cb84-2"><a href="ch1.html#cb84-2"></a>v</span>
<span id="cb84-3"><a href="ch1.html#cb84-3"></a>[<span class="dv">1</span>]  <span class="ot">TRUE</span>  <span class="ot">TRUE</span> <span class="ot">FALSE</span></span>
<span id="cb84-4"><a href="ch1.html#cb84-4"></a>d[v, ]</span>
<span id="cb84-5"><a href="ch1.html#cb84-5"></a>        sex age desease</span>
<span id="cb84-6"><a href="ch1.html#cb84-6"></a>case1   man  <span class="dv">56</span>    <span class="ot">TRUE</span></span>
<span id="cb84-7"><a href="ch1.html#cb84-7"></a>case2 woman  <span class="dv">45</span>   <span class="ot">FALSE</span></span></code></pre></div>
<p>Для виділення рядків, що задовольняють кільком умовам, можна використати більш ніж одну логічну операцію:</p>
<div class="sourceCode" id="cb85"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb85-1"><a href="ch1.html#cb85-1"></a>d[d<span class="op">$</span>age <span class="op">&gt;</span><span class="st"> </span><span class="dv">30</span> <span class="op">&amp;</span><span class="st"> </span>d<span class="op">$</span>sex <span class="op">==</span><span class="st"> &quot;man&quot;</span>, ]</span>
<span id="cb85-2"><a href="ch1.html#cb85-2"></a>      sex age desease</span>
<span id="cb85-3"><a href="ch1.html#cb85-3"></a>case1 man  <span class="dv">56</span>    <span class="ot">TRUE</span></span></code></pre></div>
<p>Функція <code>subset()</code> також повертає підмножину фрейма даних, зокрема згідно відповідному булевому вектору, який фіксує виконання бажаної умови та створюється аналогічно попередньому випадку, або безпосередньо вказуючи умову (або умови) в аргументах функції <code>subset()</code>, яка поверне ті рядки фрейма, для яких вказана умова виконується:</p>
<div class="sourceCode" id="cb86"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb86-1"><a href="ch1.html#cb86-1"></a><span class="kw">subset</span>(d, sex<span class="op">==</span><span class="st">&quot;man&quot;</span>)</span>
<span id="cb86-2"><a href="ch1.html#cb86-2"></a>      sex age desease</span>
<span id="cb86-3"><a href="ch1.html#cb86-3"></a>case1 man  <span class="dv">56</span>    <span class="ot">TRUE</span></span>
<span id="cb86-4"><a href="ch1.html#cb86-4"></a>case3 man  <span class="dv">29</span>   <span class="ot">FALSE</span></span>
<span id="cb86-5"><a href="ch1.html#cb86-5"></a><span class="kw">subset</span>(d, d<span class="op">$</span>sex<span class="op">==</span><span class="st">&quot;man&quot;</span> <span class="op">&amp;</span><span class="st"> </span>d<span class="op">$</span>age<span class="op">&gt;</span><span class="dv">50</span>)</span>
<span id="cb86-6"><a href="ch1.html#cb86-6"></a>      sex age desease</span>
<span id="cb86-7"><a href="ch1.html#cb86-7"></a>case1 man  <span class="dv">56</span>    <span class="ot">TRUE</span></span>
<span id="cb86-8"><a href="ch1.html#cb86-8"></a><span class="kw">subset</span>(d, d<span class="op">$</span>age <span class="op">&gt;</span><span class="st"> </span><span class="kw">mean</span>(d<span class="op">$</span>age))</span>
<span id="cb86-9"><a href="ch1.html#cb86-9"></a>        sex age desease</span>
<span id="cb86-10"><a href="ch1.html#cb86-10"></a>case1   man  <span class="dv">56</span>    <span class="ot">TRUE</span></span>
<span id="cb86-11"><a href="ch1.html#cb86-11"></a>case2 woman  <span class="dv">45</span>   <span class="ot">FALSE</span></span></code></pre></div>
</div>
<div id="зміна-порядку-в-даних" class="section level4 unnumbered" number="">
<h4>Зміна порядку в даних</h4>
<p>Функція <code>order()</code> повертає індекси тих елементів вектора, які треба було б поставити на відповідне місце при побудові варіаційного ряду з вихідного вектора:</p>
<div class="sourceCode" id="cb87"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb87-1"><a href="ch1.html#cb87-1"></a>b=<span class="kw">c</span>(<span class="dv">4</span>, <span class="dv">2</span>, <span class="dv">3</span>, <span class="dv">2</span>, <span class="dv">4</span>, <span class="dv">5</span>)</span>
<span id="cb87-2"><a href="ch1.html#cb87-2"></a><span class="kw">order</span>(b)</span>
<span id="cb87-3"><a href="ch1.html#cb87-3"></a>[<span class="dv">1</span>] <span class="dv">2</span> <span class="dv">4</span> <span class="dv">3</span> <span class="dv">1</span> <span class="dv">5</span> <span class="dv">6</span></span></code></pre></div>
<p>В даному випадку для побудови варіаційного ряду (елементи вибірки розташовані в порядку неспадання) з вектора <code>b</code>, треба на перше місце поставити елемент <code>b[2]</code> (тобто 2), на друге місце – <code>b[4]</code> (2), далі – <code>b[3]</code> (3) і т.д. Отже, варіаційним рядом буде вектор <code>(b[2], b[4], b[3], b[1], b[5], b[6])</code>.</p>
<p>Для фрейма відповідно можна використати цю функцію для одного зі стовпчиків:</p>
<div class="sourceCode" id="cb88"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb88-1"><a href="ch1.html#cb88-1"></a><span class="kw">order</span>(d<span class="op">$</span>age)</span>
<span id="cb88-2"><a href="ch1.html#cb88-2"></a>[<span class="dv">1</span>] <span class="dv">3</span> <span class="dv">2</span> <span class="dv">1</span></span></code></pre></div>
<p>– тобто наймолодшою є особа під номером 3, другою за віком є особа 2, найстаршою – особа 1.</p>
<p>Для того, щоб змінити порядок даних при виводі фрейма, базуючись на порядку певного стовпчика, також можна використати функцію <code>order()</code>. В цьому випадку дані розміщуватимуться в порядку зростання вказаної величини (стовпчика), номери рядків при цьому залишатимуться прикріпленими до первісних номерів спостережень (рядків):</p>
<div class="sourceCode" id="cb89"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb89-1"><a href="ch1.html#cb89-1"></a>d[<span class="kw">order</span>(d<span class="op">$</span>age), ]</span>
<span id="cb89-2"><a href="ch1.html#cb89-2"></a>        sex age desease</span>
<span id="cb89-3"><a href="ch1.html#cb89-3"></a>case3   man  <span class="dv">29</span>   <span class="ot">FALSE</span></span>
<span id="cb89-4"><a href="ch1.html#cb89-4"></a>case2 woman  <span class="dv">45</span>   <span class="ot">FALSE</span></span>
<span id="cb89-5"><a href="ch1.html#cb89-5"></a>case1   man  <span class="dv">56</span>    <span class="ot">TRUE</span></span></code></pre></div>
<p>Зверніть увагу на те, що аргумент <code>order()</code> стоїть перед комою. Це – правильний шлях розсортувати рядки фрейму <code>d</code> за зростанням значень стовпчика <code>d$age</code>.</p>
</div>
</div>
<div id="списки" class="section level3" number="1.3.5">
<h3><span class="header-section-number">1.3.5</span> Списки</h3>
<p>Списки (<code>lists</code>) містять впорядкований набір елементів, кожен з яких може бути вектором, матрицею, масивом, фреймом, списком. Для створення списку використовується функція <code>list()</code>:</p>
<div class="sourceCode" id="cb90"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb90-1"><a href="ch1.html#cb90-1"></a><span class="kw">list</span>(<span class="dv">1</span><span class="op">:</span><span class="dv">3</span>, <span class="kw">matrix</span>(<span class="dv">1</span><span class="op">:</span><span class="dv">6</span>, <span class="dt">nrow=</span><span class="dv">2</span>))</span>
<span id="cb90-2"><a href="ch1.html#cb90-2"></a>[[<span class="dv">1</span>]]</span>
<span id="cb90-3"><a href="ch1.html#cb90-3"></a>[<span class="dv">1</span>] <span class="dv">1</span> <span class="dv">2</span> <span class="dv">3</span></span>
<span id="cb90-4"><a href="ch1.html#cb90-4"></a></span>
<span id="cb90-5"><a href="ch1.html#cb90-5"></a>[[<span class="dv">2</span>]]</span>
<span id="cb90-6"><a href="ch1.html#cb90-6"></a>     [,<span class="dv">1</span>] [,<span class="dv">2</span>] [,<span class="dv">3</span>]</span>
<span id="cb90-7"><a href="ch1.html#cb90-7"></a>[<span class="dv">1</span>,]    <span class="dv">1</span>    <span class="dv">3</span>    <span class="dv">5</span></span>
<span id="cb90-8"><a href="ch1.html#cb90-8"></a>[<span class="dv">2</span>,]    <span class="dv">2</span>    <span class="dv">4</span>    <span class="dv">6</span></span></code></pre></div>
<p>Імена елементам списку можна присвоювати одразу при його створенні:</p>
<div class="sourceCode" id="cb91"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb91-1"><a href="ch1.html#cb91-1"></a><span class="kw">list</span>(<span class="dt">element.1=</span><span class="dv">1</span><span class="op">:</span><span class="dv">3</span>, <span class="dt">element.2=</span><span class="kw">matrix</span>(<span class="dv">1</span><span class="op">:</span><span class="dv">6</span>, <span class="dt">nrow=</span><span class="dv">2</span>))</span>
<span id="cb91-2"><a href="ch1.html#cb91-2"></a><span class="op">$</span>element<span class="fl">.1</span></span>
<span id="cb91-3"><a href="ch1.html#cb91-3"></a>[<span class="dv">1</span>] <span class="dv">1</span> <span class="dv">2</span> <span class="dv">3</span></span>
<span id="cb91-4"><a href="ch1.html#cb91-4"></a></span>
<span id="cb91-5"><a href="ch1.html#cb91-5"></a><span class="op">$</span>element<span class="fl">.2</span></span>
<span id="cb91-6"><a href="ch1.html#cb91-6"></a>     [,<span class="dv">1</span>] [,<span class="dv">2</span>] [,<span class="dv">3</span>]</span>
<span id="cb91-7"><a href="ch1.html#cb91-7"></a>[<span class="dv">1</span>,]    <span class="dv">1</span>    <span class="dv">3</span>    <span class="dv">5</span></span>
<span id="cb91-8"><a href="ch1.html#cb91-8"></a>[<span class="dv">2</span>,]    <span class="dv">2</span>    <span class="dv">4</span>    <span class="dv">6</span></span></code></pre></div>
<p>Або використовуючи функцію <code>names()</code>:</p>
<div class="sourceCode" id="cb92"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb92-1"><a href="ch1.html#cb92-1"></a>l=<span class="kw">list</span>(<span class="dv">1</span><span class="op">:</span><span class="dv">3</span>, <span class="kw">matrix</span>(<span class="dv">1</span><span class="op">:</span><span class="dv">6</span>, <span class="dt">nrow=</span><span class="dv">2</span>))</span>
<span id="cb92-2"><a href="ch1.html#cb92-2"></a><span class="kw">names</span>(l)=<span class="kw">c</span>(<span class="st">&quot;el.1&quot;</span>, <span class="st">&quot;el.2&quot;</span>)</span>
<span id="cb92-3"><a href="ch1.html#cb92-3"></a>l</span>
<span id="cb92-4"><a href="ch1.html#cb92-4"></a><span class="op">$</span>el<span class="fl">.1</span></span>
<span id="cb92-5"><a href="ch1.html#cb92-5"></a>[<span class="dv">1</span>] <span class="dv">1</span> <span class="dv">2</span> <span class="dv">3</span></span>
<span id="cb92-6"><a href="ch1.html#cb92-6"></a></span>
<span id="cb92-7"><a href="ch1.html#cb92-7"></a><span class="op">$</span>el<span class="fl">.2</span></span>
<span id="cb92-8"><a href="ch1.html#cb92-8"></a>     [,<span class="dv">1</span>] [,<span class="dv">2</span>] [,<span class="dv">3</span>]</span>
<span id="cb92-9"><a href="ch1.html#cb92-9"></a>[<span class="dv">1</span>,]    <span class="dv">1</span>    <span class="dv">3</span>    <span class="dv">5</span></span>
<span id="cb92-10"><a href="ch1.html#cb92-10"></a>[<span class="dv">2</span>,]    <span class="dv">2</span>    <span class="dv">4</span>    <span class="dv">6</span></span></code></pre></div>
<p>Отже, списки можуть містити багато різних елементів, кожен з яких має номер (який записується в подвійних квадратних дужках: <code>[[1]]</code>, якщо виділити елемент в звичайних одинарних квадратних дужках, то результатом буде список (по структурі), який містить один елемент), або ім’я (<code>$el.1</code>), за якими можна викликати потрібний елемент списку. Можна поєднувати перераховані вище способи виклику елемента.</p>
<div class="sourceCode" id="cb93"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb93-1"><a href="ch1.html#cb93-1"></a>l[[<span class="dv">1</span>]]</span>
<span id="cb93-2"><a href="ch1.html#cb93-2"></a>[<span class="dv">1</span>] <span class="dv">1</span> <span class="dv">2</span> <span class="dv">3</span></span>
<span id="cb93-3"><a href="ch1.html#cb93-3"></a><span class="kw">class</span>(l[[<span class="dv">1</span>]])</span>
<span id="cb93-4"><a href="ch1.html#cb93-4"></a>[<span class="dv">1</span>] <span class="st">&quot;integer&quot;</span></span>
<span id="cb93-5"><a href="ch1.html#cb93-5"></a>l[<span class="dv">1</span>]</span>
<span id="cb93-6"><a href="ch1.html#cb93-6"></a><span class="op">$</span>el<span class="fl">.1</span></span>
<span id="cb93-7"><a href="ch1.html#cb93-7"></a>[<span class="dv">1</span>] <span class="dv">1</span> <span class="dv">2</span> <span class="dv">3</span></span>
<span id="cb93-8"><a href="ch1.html#cb93-8"></a><span class="kw">class</span>(l[<span class="dv">1</span>])</span>
<span id="cb93-9"><a href="ch1.html#cb93-9"></a>[<span class="dv">1</span>] <span class="st">&quot;list&quot;</span></span>
<span id="cb93-10"><a href="ch1.html#cb93-10"></a>l<span class="op">$</span>el<span class="fl">.2</span></span>
<span id="cb93-11"><a href="ch1.html#cb93-11"></a>     [,<span class="dv">1</span>] [,<span class="dv">2</span>] [,<span class="dv">3</span>]</span>
<span id="cb93-12"><a href="ch1.html#cb93-12"></a>[<span class="dv">1</span>,]    <span class="dv">1</span>    <span class="dv">3</span>    <span class="dv">5</span></span>
<span id="cb93-13"><a href="ch1.html#cb93-13"></a>[<span class="dv">2</span>,]    <span class="dv">2</span>    <span class="dv">4</span>    <span class="dv">6</span></span>
<span id="cb93-14"><a href="ch1.html#cb93-14"></a>l<span class="op">$</span>el<span class="fl">.2</span>[<span class="dv">1</span>,<span class="dv">2</span>]</span>
<span id="cb93-15"><a href="ch1.html#cb93-15"></a>[<span class="dv">1</span>] <span class="dv">3</span></span>
<span id="cb93-16"><a href="ch1.html#cb93-16"></a>l[[<span class="dv">2</span>]][<span class="dv">2</span>, <span class="dv">3</span>]</span>
<span id="cb93-17"><a href="ch1.html#cb93-17"></a>[<span class="dv">1</span>] <span class="dv">6</span></span>
<span id="cb93-18"><a href="ch1.html#cb93-18"></a>l[[<span class="st">&quot;el.1&quot;</span>]][<span class="dv">1</span>]</span>
<span id="cb93-19"><a href="ch1.html#cb93-19"></a>[<span class="dv">1</span>] <span class="dv">1</span></span>
<span id="cb93-20"><a href="ch1.html#cb93-20"></a>l[[<span class="dv">2</span>]][l[[<span class="dv">2</span>]]<span class="op">&gt;=</span><span class="dv">3</span>]</span>
<span id="cb93-21"><a href="ch1.html#cb93-21"></a>[<span class="dv">1</span>] <span class="dv">3</span> <span class="dv">4</span> <span class="dv">5</span> <span class="dv">6</span></span></code></pre></div>
<p>Функція <code>str()</code> демонструє структуру списку:</p>
<div class="sourceCode" id="cb94"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb94-1"><a href="ch1.html#cb94-1"></a>d&lt;-<span class="kw">data.frame</span>(sex, age, desease)</span>
<span id="cb94-2"><a href="ch1.html#cb94-2"></a>v&lt;-<span class="kw">c</span>(<span class="ot">TRUE</span>, <span class="ot">TRUE</span>, <span class="ot">TRUE</span>, <span class="ot">FALSE</span>)</span>
<span id="cb94-3"><a href="ch1.html#cb94-3"></a>new.list&lt;-<span class="kw">list</span>(d, v)</span>
<span id="cb94-4"><a href="ch1.html#cb94-4"></a><span class="kw">str</span>(new.list)</span>
<span id="cb94-5"><a href="ch1.html#cb94-5"></a>List of <span class="dv">2</span></span>
<span id="cb94-6"><a href="ch1.html#cb94-6"></a> <span class="op">$</span><span class="st"> </span><span class="er">:</span><span class="st">&#39;data.frame&#39;</span><span class="op">:</span>	<span class="dv">3</span> obs. of  <span class="dv">3</span> variables<span class="op">:</span></span>
<span id="cb94-7"><a href="ch1.html#cb94-7"></a><span class="st">  </span>..<span class="op">$</span><span class="st"> </span>sex    <span class="op">:</span><span class="st"> </span>chr [<span class="dv">1</span><span class="op">:</span><span class="dv">3</span>] <span class="st">&quot;man&quot;</span> <span class="st">&quot;woman&quot;</span> <span class="st">&quot;man&quot;</span></span>
<span id="cb94-8"><a href="ch1.html#cb94-8"></a>  ..<span class="op">$</span><span class="st"> </span>age    <span class="op">:</span><span class="st"> </span>num [<span class="dv">1</span><span class="op">:</span><span class="dv">3</span>] <span class="dv">56</span> <span class="dv">45</span> <span class="dv">29</span></span>
<span id="cb94-9"><a href="ch1.html#cb94-9"></a>  ..<span class="op">$</span><span class="st"> </span>desease<span class="op">:</span><span class="st"> </span>logi [<span class="dv">1</span><span class="op">:</span><span class="dv">3</span>] <span class="ot">TRUE</span> <span class="ot">FALSE</span> <span class="ot">FALSE</span></span>
<span id="cb94-10"><a href="ch1.html#cb94-10"></a> <span class="op">$</span><span class="st"> </span><span class="er">:</span><span class="st"> </span>logi [<span class="dv">1</span><span class="op">:</span><span class="dv">4</span>] <span class="ot">TRUE</span> <span class="ot">TRUE</span> <span class="ot">TRUE</span> <span class="ot">FALSE</span></span></code></pre></div>
</div>
</div>
<div id="елементи-графіки-в-r" class="section level2" number="1.4">
<h2><span class="header-section-number">1.4</span> Елементи графіки в R</h2>
<p>Графічні можливості R – це його велика перевага. І роль різноманітних графіків в аналізі даних важко переоцінити. В базовому R кілька пакетів відповідають за графіку. Окрім того є додаткові пакети з розширеними графічними можливостями. Ми будемо переважно спиратися на базову графіку пакету <code>graphics</code> та часом на графічні можливості додаткового пакету <code>ggplot2</code>, в якому є деякі додаткові можливості, дещо інакше зображення та дещо інша логіка виклику додаткових опцій. В подальшому викладенні частину прикладів будемо наводити з використанням базової графіки, деякі – з використанням <code>ggplot2</code>.
Ще раз наголосимо, що графічних можливостей насправді дуже багато, і ми наведемо лише поверхневий огляд головних функцій, які нам будуть потрібні для подальшої роботи. Більш глибоко щодо графіки в R можна прочитати, наприклад, в <span class="citation">(Майборода <a href="#ref-Майборода2018" role="doc-biblioref">2018</a>)</span>, <span class="citation">(Murrell <a href="#ref-Murrell2006" role="doc-biblioref">2006</a>)</span>, <span class="citation">(Wickham <a href="#ref-Wickham2016" role="doc-biblioref">2016</a>)</span>, або в одному з подібних видань.</p>
<div id="пакет-graphics" class="section level3" number="1.4.1">
<h3><span class="header-section-number">1.4.1</span> Пакет graphics</h3>
<p>Що можна зобразити за допомогою функцій цього пакету? Перш за все, широкий спектр стандартних графіків та зображень, зокрема:</p>
<ul>
<li>лінійний граф: <code>plot()</code></li>
<li>гістограму <code>hist()</code></li>
<li>стовпчикову діаграму <code>barchart()</code></li>
<li>ящик з вусами <code>boxplot()</code></li>
<li>3D-графік <code>persp()</code></li>
<li>секторну діаграму <code>pie()</code></li>
<li>тощо.</li>
</ul>
<p>Неможливо описати всі можливості побудови графіків навіть засобами базового пакету, зважаючи на різноманіття параметрів кожної функції. Наведемо деякі загальні принципи.
В базовому пакеті graphics можна виділити три групи функцій:</p>
<ul>
<li>функції високого рівня – приводять до створення графічного вікна, в якому будується задане зображення;</li>
<li>функції низького рівня – дозволяють доповнити вже побудоване раніше зображення (часто дублюючи аргументи функцій високого рівня), але самі вони не можуть створити графічне вікно;</li>
<li>інтерактивні функції – дозволяють за побудованим зображенням отримати певну інформацію.</li>
</ul>
<div id="керування-графічними-вікнами" class="section level4 unnumbered" number="">
<h4>Керування графічними вікнами</h4>
<p>Коли в R задається графічна функція, відкривається графічне вікно з відповідним графіком.</p>
<p>Функція <code>split.screen()</code> ділить активне графічне вікно. Наприклад, <code>split.screen(c(1,2))</code> ділить вікно на дві частини, які можуть бути викликані командами <code>screen(1)</code> та <code>screen(2)</code>.</p>
<p>Функція <code>layout()</code> дозволяє розділити активне графічне вікно на кілька частин, де графіки будуть зображені послідовно. Наприклад,</p>
<div class="sourceCode" id="cb95"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb95-1"><a href="ch1.html#cb95-1"></a><span class="kw">layout</span>(<span class="kw">matrix</span>(<span class="dv">1</span><span class="op">:</span><span class="dv">6</span>), <span class="dv">3</span>, <span class="dv">2</span>)</span></code></pre></div>
<p>створить шість підвікон, які будуть розташовані в три рядки та два стовпчика (заповнюється графіками по стовпчиках).</p>
<p>Підвікна можуть мати різні розміри. Наприклад, команда</p>
<div class="sourceCode" id="cb96"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb96-1"><a href="ch1.html#cb96-1"></a><span class="kw">layout</span>(<span class="kw">matrix</span>(<span class="kw">c</span>(<span class="dv">1</span>,<span class="dv">2</span>,<span class="dv">3</span>,<span class="dv">4</span>,<span class="dv">5</span>,<span class="dv">5</span>), <span class="dv">3</span>, <span class="dv">2</span>))</span></code></pre></div>
<p>буде ділити загальне вікно на 6 частин (3 рядки та 2 стовпчика), але при цьому графік з номером 5 буде займати два вікна: п’яте і шосте. Щоб подивитись на розділення, створене за допомогою команди <code>layout()</code>, можна використати функцію <code>layout.show(5)</code>
аргумент цієї функції – кількість вікон, розміщення яких є бажання переглянути.</p>
<div class="sourceCode" id="cb97"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb97-1"><a href="ch1.html#cb97-1"></a><span class="kw">layout</span>(<span class="kw">matrix</span>(<span class="kw">c</span>(<span class="dv">1</span>,<span class="dv">2</span>,<span class="dv">3</span>,<span class="dv">4</span>,<span class="dv">5</span>,<span class="dv">5</span>), <span class="dv">3</span>, <span class="dv">2</span>))</span>
<span id="cb97-2"><a href="ch1.html#cb97-2"></a><span class="kw">layout.show</span>(<span class="dv">5</span>)</span></code></pre></div>
<p><img src="MMOI-RMarkdown_files/figure-html/unnamed-chunk-97-1.png" width="672" /></p>
<p>Створити матрицю розміщення графічних підвікон можна в будь-який інший спосіб:</p>
<div class="sourceCode" id="cb98"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb98-1"><a href="ch1.html#cb98-1"></a><span class="kw">library</span>(carData)</span>
<span id="cb98-2"><a href="ch1.html#cb98-2"></a>Warning<span class="op">:</span><span class="st"> </span>package <span class="st">&#39;carData&#39;</span> was built under R version <span class="dv">4</span>.<span class="fl">0.2</span></span>
<span id="cb98-3"><a href="ch1.html#cb98-3"></a><span class="kw">layout</span>(<span class="kw">rbind</span>(<span class="kw">c</span>(<span class="dv">1</span>,<span class="dv">1</span>), <span class="kw">c</span>(<span class="dv">2</span>,<span class="dv">3</span>)))</span>
<span id="cb98-4"><a href="ch1.html#cb98-4"></a><span class="kw">plot</span>(income <span class="op">~</span><span class="st"> </span>type, <span class="dt">data=</span>Duncan)</span>
<span id="cb98-5"><a href="ch1.html#cb98-5"></a><span class="kw">hist</span>(Duncan<span class="op">$</span>income, <span class="dt">col=</span><span class="st">&quot;yellow&quot;</span>)</span>
<span id="cb98-6"><a href="ch1.html#cb98-6"></a><span class="kw">plot</span>(prestige <span class="op">~</span><span class="st"> </span>income, <span class="dt">col=</span><span class="st">&quot;red&quot;</span>, <span class="dt">data=</span>Duncan)</span></code></pre></div>
<p><img src="MMOI-RMarkdown_files/figure-html/unnamed-chunk-98-1.png" width="672" /></p>
<p>Нове графічне вікно можна також відкрити за допомогою функції <code>x11()</code>.</p>
<p>Інша функція, яка задає постійні графічні параметри та може покращити представлення графіка (несумісна з попередньою), – це функція <code>par()</code>.
<code>par()</code> визначає глобальні параметри графічного вікна, згідно яким будуватимуться всі подальші графіки до наступного використання даної функції або виходу з R. Це звільняє команди, такі як <code>ggplot()</code>, <code>plot()</code>, від необхідності зберігати цю інформацію самостійно.</p>
<p>Наприклад, команда</p>
<div class="sourceCode" id="cb99"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb99-1"><a href="ch1.html#cb99-1"></a><span class="kw">par</span>(<span class="dt">bg=</span> <span class="st">&quot;ivory&quot;</span>)</span></code></pre></div>
<p>виводитиме всі подальші графіки на фоні кольору слонової кістки.</p>
<p>Перед зміною графічних параметрів за допомогою <code>par()</code> може бути корисним зберегти попередні параметри, щоб до них можна було повернутися:</p>
<div class="sourceCode" id="cb100"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb100-1"><a href="ch1.html#cb100-1"></a><span class="kw">par</span>()               <span class="co"># виведе поточний набір графічних установок</span></span></code></pre></div>
<div class="sourceCode" id="cb101"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb101-1"><a href="ch1.html#cb101-1"></a>opar &lt;-<span class="st"> </span><span class="kw">par</span>()                     <span class="co"># збереження поточних установок</span></span>
<span id="cb101-2"><a href="ch1.html#cb101-2"></a><span class="kw">par</span>(<span class="dt">col.main=</span><span class="st">&quot;darkblue&quot;</span>, <span class="dt">col.lab=</span><span class="st">&quot;blue&quot;</span>, <span class="dt">bg=</span><span class="st">&quot;ivory&quot;</span>)   <span class="co">#   активація нових параметрів</span></span>
<span id="cb101-3"><a href="ch1.html#cb101-3"></a><span class="kw">hist</span>(Duncan<span class="op">$</span>income)    <span class="co"># створення графіку з новими графічними установками</span></span></code></pre></div>
<p><img src="MMOI-RMarkdown_files/figure-html/unnamed-chunk-101-1.png" width="672" /></p>
<div class="sourceCode" id="cb102"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb102-1"><a href="ch1.html#cb102-1"></a><span class="kw">par</span>(opar)                         <span class="co"># повернення до базового набору параметрів</span></span></code></pre></div>
<p>Оскільки графічних параметрів багато, то і функція <code>par()</code> має дуже багато аргументів. Повний перелік аргументів та їх значення можна подивитися в довідці, поточні установки виведуться викликом функції <code>par()</code> без аргументів. Наведемо деякі з них.</p>
<ul>
<li><code>adj</code> – керує вирівнюванням тексту (0 – по лівому краю, 0.5 – центрований, 1 – по правому краю);</li>
<li><code>bg</code> (background) – визначає колір фону;</li>
<li><code>cex</code> – значення регулює розмір текстів та символів відносно значення за замовчуванням (cex=0.7 зробить мітки меншими);</li>
<li><code>col.</code> – група аргументів, що задає колір символів: <code>col.axis</code>, <code>col.lab</code>, <code>col.title</code>, <code>col.sub</code>;</li>
<li><code>font.</code> – група аргументів, що задає фонт символів: <code>font.axis</code>, <code>font.lab</code>, <code>font.title</code>, <code>font.sub</code>; можливі значення: 0 – звичайний, 1 – курсив, 2 – напівжирний, 3 – напівжирний курсив;</li>
<li><code>las</code> – вказує орієнтацією надписів по осях (0 – паралельно осям, 1 – 1 – горизонтально, 2 – перпендикулярно осям, 3 – вертикально);</li>
<li><code>lty</code> – задає тип ліній (1 – суцільна, 2 – штрихована, 3 – пунктирна, 4 – штрих-пунктирна, 5 - longdash, 6 – подвійне підкреслення. Може бути рядком до восьми символів (між “0” та “9”), який альтернативно визначає довжину в точках чи пікселях, відображаючи елементи та пробіли;</li>
<li><code>lwd</code> – задає товщину ліній, числове значення;</li>
<li><code>mai</code> – вектор з чотирьох числових значень <code>c(bottom, left, top, right)</code>, які задають величину поля з відповідного боку від графіка, заданого в дюймах;
– <code>mar</code> – вектор з чотирьох числових значень, які задають простір між осями та межею рисунка. Формат <code>c(bottom, left, top, right)</code> за замовчуванням має значення <code>c(5.1, 4.1, 4.1, 2.1)</code>;</li>
<li><code>mfcol=c(nrow, ncol)</code> – числовий вектор, приводить до того, що графічне вікно розбивається на матрицю підвікон, що має nrow рядків та ncol стовпчиків, в яких в подальшому будуть виведені зображення, порядок заповнення – по стовпчиках</li>
<li><code>mfrow= c(nrow, ncol)</code> – те саме, але графіки заповнюють матрицю по рядках;</li>
<li><code>pch</code> – керує типом символів, може бути відповідним символьним значенням у лапках або цілим числом між 1 та 25;</li>
<li><code>ps</code> – ціле число, що задає розмір (в пікселях) текстів та символів;</li>
<li><code>pty</code> – символьний параметр, який має два значення та відповідає за те, який простір відводиться для кожного графіка: “s” – квадрати, “m” – максимальна область;</li>
<li><code>tch</code> – число, що визначає довжину насічок на координатних осях; при <code>tch=1</code> буде намальована координатна сітка.</li>
</ul>
<pre><code>## Warning in par(opar): graphical parameter &quot;cin&quot; cannot be set
## Warning in par(opar): graphical parameter &quot;cra&quot; cannot be set
## Warning in par(opar): graphical parameter &quot;csi&quot; cannot be set
## Warning in par(opar): graphical parameter &quot;cxy&quot; cannot be set
## Warning in par(opar): graphical parameter &quot;din&quot; cannot be set
## Warning in par(opar): graphical parameter &quot;page&quot; cannot be set</code></pre>
<div class="sourceCode" id="cb104"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb104-1"><a href="ch1.html#cb104-1"></a><span class="kw">par</span>(<span class="dt">mfrow=</span><span class="kw">c</span>(<span class="dv">2</span>,<span class="dv">2</span>), <span class="dt">col.main=</span><span class="st">&quot;darkblue&quot;</span>, <span class="dt">bg=</span><span class="st">&quot;wheat&quot;</span>) </span>
<span id="cb104-2"><a href="ch1.html#cb104-2"></a><span class="kw">hist</span>(airquality<span class="op">$</span>Temp)</span>
<span id="cb104-3"><a href="ch1.html#cb104-3"></a><span class="kw">boxplot</span>(airquality<span class="op">$</span>Temp,  <span class="dt">horizontal=</span><span class="ot">TRUE</span>)</span>
<span id="cb104-4"><a href="ch1.html#cb104-4"></a><span class="kw">hist</span>(airquality<span class="op">$</span>Ozone)</span>
<span id="cb104-5"><a href="ch1.html#cb104-5"></a><span class="kw">boxplot</span>(airquality<span class="op">$</span>Ozone, <span class="dt">horizontal=</span><span class="ot">TRUE</span>)</span></code></pre></div>
<p><img src="MMOI-RMarkdown_files/figure-html/unnamed-chunk-104-1.png" width="672" />
Після того, як графік побудовано, треба відмінити установки цієї функції, повернувшись до попередніх параметрів графічного вікна (<code>par(opar)</code>).</p>
<div class="sourceCode" id="cb105"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb105-1"><a href="ch1.html#cb105-1"></a><span class="kw">par</span>(opar)         </span></code></pre></div>
</div>
<div id="функції-високого-рівня" class="section level4 unnumbered" number="">
<h4>Функції високого рівня</h4>
<p>Графічними функціями високого рівня в R називають функції, які створюють графічне вікно. Перерахуємо найбільш вживані з них:</p>
<ul>
<li><code>barplot(x)</code> – побудова стовпчикових діаграм значень вектора <code>x</code>, аргумент <code>horiz=TRUE</code> дозволяє зобразити стовпчики горизонтально;</li>
<li><code>boxplot(x)</code>, <code>boxplot.matrix()</code>, <code>bxp()</code> – побудова ящиків з вусами;</li>
<li><code>contour(x, y, z)</code> – побудова графіків з лініями рівня (використовуються інтерпольовані дані), <code>x</code>, <code>y</code> мають бути векторами, <code>z</code> – матриця відповідної розмірності (<code>dim(z)=c(length(x), length(y))</code>);</li>
<li><code>curve()</code> – побудова кривих; <code>curve(expr, from=NULL, to=NULL, n=101, add=FALSE, type="l", ...)</code> будує графік функції, заданої виразом <code>expr</code> (вираз як функція, залежна від <code>x</code>, або ім’я функції, графік якої треба побудувати) на інтервалі з межами, заданими аргументами <code>from</code>, <code>to</code>; <code>n</code> – кількість точок, в яких визначається значення <code>expr</code>;</li>
<li><code>dotchart(x)</code> – точкові діаграми, якщо <code>x</code> – фрейм (таблиця даних, то буде побудована так звана “діаграма Клівленда”;</li>
<li><code>filled.contour(x,y,z)</code> – те саме, що <code>contour(x, y, z)</code>, але з заповненими певними кольорами областями між лініями контура;</li>
<li><code>frame()</code>, <code>plot.new()</code> – задання нового графічного вікна;</li>
<li><code>hist()</code> – побудова гістограми;</li>
<li><code>image()</code> – побудова кольорової прямокутної сітки заданих кольорів згідно зі значеннями <code>x</code>, <code>y</code> (<code>image(x,y,z)</code> – аналог <code>contour(x, y, z)</code> в кольорі);</li>
<li><code>interaction.plot(f1, f2, y)</code> – для різних значень факторів <code>f1</code> та <code>f2</code> виводить графік середніх значень <code>y</code>; аргумент <code>fun</code> дозволяє вибрати інші описові статистики, окрім вибіркового середнього;</li>
<li><code>matplot(x,y)</code> – матрична діаграма розсіювання;</li>
<li><code>mosaicplot(x)</code> – побудова мозаїчної діаграми;</li>
<li><code>pairs(x)</code> – побудова матричної діаграми розсіювання для всіх можливих пар змінних з <code>x</code>, де <code>x</code> - матриця чи фрейм;</li>
<li><code>par()</code> – створення графічного вікна з заданими параметрами, керування виводом графічних вікон;</li>
<li><code>persp(x,y,z)</code> – побудова тривимірних графіків;</li>
<li><code>pie(x)</code>, <code>piechart(x)</code> – побудова секторних (кругових) діаграм</li>
<li><code>plot(x, y, ...)</code> – група основних функцій для побудови двовимірних графіків. Це – генеруюча функція (generic function), в загальному випадку графічно зображує залежність <code>y</code> (вектор ординат) від <code>x</code> (вектор абсцис). Проте, ця функція зображує різні типи графіків залежно від того, якими даними представлені аргументи <code>x</code> та <code>y</code> (залежно від того, чи вони є чисельними змінними, чи факторами). <code>plot(x)</code> з одним вектором-аргументом побудує графік значень <code>x</code> (по осі ординат), впорядкованих за номером. <code>plot(x, y)</code> будує двовимірний графік (схожа функція – <code>sunflowerplot(x,y)</code>). Як варіант, в якості залежного (першого) аргументу функції <code>plot()</code> можна задати не вектор готових значень, а функцію, яка обчислює значення по вісі <code>y</code>, тоді другий та третій аргументи визначатимуть початкове та кінцеве значення <code>x</code> (<code>plot(cos,-2*pi,2*pi)</code>);</li>
<li><code>plot.ts(x)</code> зображує часовий ряд <code>x</code> (<code>x</code> повинен належати класу <code>ts</code> -– <code>time series</code>);</li>
<li><code>qqnorm(x)</code> виводить емпіричні квантилі значень <code>x</code> проти теоретичних квантилів, які були б, якби <code>x</code> мав би нормальний розподіл;</li>
<li><code>qqplot(x,y)</code> – діаграма залежності квантилів <code>y</code> проти квантилів <code>x</code>;</li>
<li><code>screen()</code> – керування графічним вікном;</li>
<li><code>sunflowerplot(x, y)</code> те саме, що <code>plot(x, y)</code>, але точки з однаковими координатами зображуються у виді “квіточок” з кількістю пелюсток, що пропорційна кількості таких точок, а “точки” залиті кольором;</li>
<li><code>stripchart(x)</code> побудова одновимірної діаграми розсіювання для вектора значень <code>x</code> (або кількох паралельних діаграм, якщо <code>x</code> – це список векторів), зображує значення <code>x</code> вздовж горизонтальної осі, хороша альтернатива функції <code>boxplot()</code> за малого розміру вибірки.</li>
</ul>
<p>Аргументи кожної окремої функції можна подивитися у відповідному довідковому вікні. Головними аргументами зазвичай є матриці або фрейми даних, вектори, іменовані вектори. Деякі з параметрів є ідентичними для більшості графічних функцій. З додаткових аргументів, спільних для більшості графічних функцій, виділимо такі (з їх значеннями за замовчуванням):</p>
<ul>
<li><code>add=FALSE</code> – логічний аргумент, чи треба додавати графік, що будується, до того, що вже існує (<code>add=TRUE</code>), чи буде створюватися нове графічне вікно;</li>
<li><code>ann=TRUE</code> – логічний параметр, чи треба виводити назви рисунка та осей;</li>
<li><code>axes=TRUE</code> – логічний параметр, чи треба виводити обидві осі; значення <code>axes=NULL</code> або <code>FALSE</code> прибирає осі;</li>
<li><code>bg</code> – задає колір фону графічного вікна, за замовчуванням <code>bg="white"</code>;</li>
<li><code>col</code> – символьний чи числовий аргумент, який задає колір графіку;</li>
<li><code>col.axis</code>, <code>col.main</code>, <code>col.sub</code> – колір осей, основного та додаткового заголовків, за замовчуванням <code>col.*="black"</code>;</li>
<li><code>fg</code> – колір рамки навколо графіку;</li>
<li><code>font.axis</code>, <code>font.lab</code>, <code>font.main</code>, <code>font.sub</code> – числові аргументи, що задають тип шрифта для назв осей, основного та додаткового заголовків (1 – простий, за замовчуванням, 2 – жирний, 3 – курсив, 4 – жирний курсив);</li>
<li><code>frame</code> – логічний аргумент, каже про те, чи треба будувати рамку навколо графіку.</li>
<li><code>frame.plot= axes</code> – логічний параметр, якщо вказати значення <code>TRUE</code>, будується рамка навколо графіка;</li>
<li><code>lty=</code> – стиль лінії (<code>"solid"</code> – суцільна лінія, <code>"blank"</code> – відсутня лінія, <code>"dashed"</code> – пунктирна лінія, тощо);</li>
<li><code>lwd</code> – додатне ціле число, товщина лінії, за замовчуванням <code>lwd=1</code>;</li>
<li><code>main=</code> – головний заголовок, має бути символьною змінною;</li>
<li><code>sub=</code> – підзаголовок, також символьна змінна (написаний меншим шріфтом, ніж головний заголовок);</li>
<li><code>type="p"</code> – символьний аргумент, що визначає тип побудови графіка (<code>"p"</code> – точки (насправді кружечки), <code>"l"</code> – лінії, <code>"s"</code> – сходинкова лінія, тощо);</li>
<li><code>xlab=</code>, <code>ylab=</code> – назви осей, мають бути символьними змінними;</li>
<li><code>xlim=</code>, <code>ylim=</code> – верхній та нижній ліміти значень координатних осей (наприклад <code>xlim=c(5, 20)</code>, <code>ylim=range(y)</code>);</li>
<li>тощо.</li>
</ul>
</div>
<div id="графічні-функції-низького-рівня" class="section level4 unnumbered" number="">
<h4>Графічні функції низького рівня</h4>
<p>В R є набір графічних функцій (команд керування графіками нижнього рівня), які застосовуються для графіків, які вже існують. Вони дають можливість додати нові об’єкти до існуючого графіку, відкоригувати оформлення графіку, додати текст в графічне вікно. Деякі з цих параметрів можуть бути встановлені глобально за допомогою функції <code>par()</code> або локально через аргументи графічних функцій.</p>
<p>Наведемо деякі з функцій низького рівня за їх функціональним призначенням.</p>
<div id="додавання-нових-обєктів-на-графік" class="section level5 unnumbered" number="">
<h5>Додавання нових об’єктів на графік</h5>
<ul>
<li><p><code>abline(a = NULL, b = NULL, h = NULL, v = NULL, reg = NULL, coef = NULL, untf = FALSE, ...)</code> – побудова прямих ліній у графічному вікні, яке вже існує; функція додає одну чи кілька прямих ліній виду <code>y=a+bx</code> до створеного раніше графіка. Головні аргументи:</p>
<ul>
<li><code>a</code>, <code>b</code> – коефіцієнти прямої;</li>
<li><code>h</code> – значення по осі y для побудови горизонтальної лінії;</li>
<li><code>v</code> – значення по осі <code>x</code> для побудови вертикальної лінії;</li>
<li><code>coef</code> – числовий вектор <code>c(a, b)</code>, що задає коефіцієнти <code>a</code>, <code>b</code>.</li>
</ul>
<p>Можливі варіанти використання:</p>
<ul>
<li><code>abline(a, b,  ...)</code> або <code>abline(coef=c(a, b),  ...)</code> будує лінію <code>y=a+bx</code>;</li>
<li><code>abline(h=, ...)</code> будує горизонтальну лінію на вказаній висоті;</li>
<li><code>abline(v=,  ...)</code> будує вертикальну лінію на заданій відстані від осі ординат;</li>
<li><code>abline(lm.obj)</code> будує лінію регресії (про це пізніше).</li>
</ul></li>
<li><p><code>arrows(x0,y0,x1,y1, angle=30, code=2)</code> – малювання стрілок, аналогічна попередній функції. <code>code=2</code> задає напрямок стрілок (можливі значення 1, 2, 3), <code>angle=30</code> – “гостроту” вершечка стрілок;</p></li>
<li><p><code>axis(side, at = NULL, labels = TRUE, tick = TRUE, line = NA, pos = NA, outer = FALSE, font = NA, lty = "solid",...)</code> побудова осі графіку, дозволяє створювати координатні осі окремо. Головні аргументи:</p>
<ul>
<li><code>side</code> – число, яке визначає положення осі відносно графіка (1 – знизу, 2 – ліворуч, 3 – зверху, 4 – праворуч)</li>
<li><code>at</code> – числовий вектор – поділки на осях, від найменшого до найбільшого;</li>
<li><code>labels</code> – логічний або символьний аргумент, якщо логічний: чи потрібні мітки поділок? Можна задати символьний вектор міток, довжина якого має співпадати з довжиною вектора <code>at</code>;</li>
<li><code>tick</code> – логічний аргумент, чи треба малювати мітки на самій осі?</li>
<li><code>outer</code> – логічний аргумент, чи повинна вісь виходити за стандартну область графіка?;</li>
</ul></li>
<li><p><code>box(which = "plot", lty = "solid", ...)</code> – побудова рамки (прямокутника) навколо графіку
бажаного кольору та типу лінії. Головним специфічним аргументом є which – символьний аргумент, який може мати значення <code>"plot"</code> (рамка навколо графіка), <code>"figure"</code> (рамка навколо всієї графічної області), <code>"inner"</code> та <code>"outer"</code> (рамка по краю всього графічного вікна);</p></li>
<li><p><code>grid(nx = NULL, ny = nx, col = "lightgray", lty = "dotted", lwd = par("lwd"), equilogs = TRUE)</code> – зображення прямокутної сітки на графіку. Головні аргументи – <code>nx</code>, <code>ny</code> – кількість комірок сітки по вісях координат. Якщо <code>NULL</code>, то сітка будується по поділках осі, якщо якійсь з цих аргументів дорівнює <code>NA</code>, то сітка в цьому напрямку не будується.
Подібну сітку можна також побудувати за допомогою функції <code>abline()</code>;</p></li>
<li><p><code>legend()</code> – створення різноманітних легенд до графіка (див. нижче);</p></li>
<li><p><code>lines(x,y)</code> – побудова ліній, що з’єднують задані точки (аргумент <code>x</code> – список з двох векторів або матриця з двох стовпчиків: перша компонента – абсциси, друга – ординати. Якщо аргумент <code>x</code> – числовий вектор(абсцис), то треба додатково задати аргумент <code>y</code> – числовий вектор ординат (за замовчуванням <code>y=NULL</code>));</p></li>
<li><p><code>points(x,y)</code> – додавання точок на графік (як і попередня функція, має один обов’язковий аргумент <code>x</code>, якщо він є матрицею чи списком, або два аргументи <code>x, y</code> – вектори відповідно абсцис та ординат. Вид точок задається символьним параметром <code>type</code> (як і для головних графічних функцій) або цілочисельним аргументом <code>pch</code>: 0 – квадратики, 1 – кружечки, 2 – трикутники, 3 – плюси, символи 15-25 – геометричні фігури, залиті кольором (задається аргументом <code>bg</code>), тощо );</p></li>
<li><p><code>poligon(x,y)</code> – побудова багатокутника (полігона), обмеженого точками з координатами <code>(x,y)</code> (<code>x</code> та <code>y</code> – вектори);</p></li>
<li><p><code>rect(x1,y1,x2,y2)</code> – побудова прямокутника в межах <code>x1,y1,x2,y2</code>;</p></li>
<li><p><code>rug(a)</code> зображує дані з об’єкту <code>a</code> на осі абсцис у вигляді невеликих вертикальних ліній;</p></li>
<li><p><code>segments(x0, y0, x1, y1)</code> – з’єднання точок з заданими координатами <code>(x0, y0)</code> та <code>(x1, y1)</code> прямими відрізками. Аргументи: <code>x0</code>, <code>y0</code> – координати початку відрізка (можуть бути векторами), <code>x1</code>, <code>y1</code> – координати кінця відрізку (можуть бути векторами));</p></li>
<li><p><code>symbols()</code> – побудова одного з шести видів фігур (круг, квадрат, прямокутник, зірка, термометр, ящик з вусами) на графіку;</p></li>
<li><p><code>text(x,y,labels,... )</code> – додавання тексту (див. нижче);</p></li>
<li><p><code>title(main = NULL, sub = NULL, xlab = NULL, ylab = NULL, line = NA, outer = FALSE, ...)</code> виводить головний (над графіком) та додатковий (під графіком) заголовки, а також назви осей.</p></li>
</ul>
</div>
<div id="додавання-тексту-в-графічному-вікні" class="section level5 unnumbered" number="">
<h5>Додавання тексту в графічному вікні</h5>
<ul>
<li><code>legend(x, y = NULL, legend)</code> додає легенду до графіку в точку з координатами <code>(x,y)</code> (якщо <code>x</code>, <code>y</code> – числа, то <code>(x,y)</code> – координати верхнього лівого кута прямокутника з легендою; якщо <code>x</code>, <code>y</code> задають дві точки, то цим визначаються протилежні кути легенди; положення можна також задати одним з символів: ’bottomright’, ’bottom’, ’bottomleft’, ’left’, ’topleft’, ’top’, ’topright’, ’right’, ’center’, який розмістить легенду у відповідній частині області графіка) з символами, заданими аргументом <code>legend</code> (вектор, символьний або <code>expression</code>);</li>
<li><code>mtext(text, side=3, line=0,...)</code> додає до графіка текст, заданий аргументом <code>text</code>; аргумент <code>side</code> задає розташування тексту відносно графіку; аргумент <code>line</code> визначає відстань від тексту до графіку;</li>
<li><code>text(x,y,labels,... )</code> – додавання тексту, вказаного в аргументі <code>labels</code> до графіка в місця з координатами <code>(x,y)</code> (наприклад, <code>text(y[,1]+ 0.6, y[,2], rownames(y))</code>),
аргумент <code>labels</code> — це або символьнийо вектор ,або вектор, элементами якого є <code>expression(...)</code> (виводить математичне рівняння, задане згідно кодуванню) — задає текст, який виводиться. Бажано, щоб довжина вектора <code>labels</code> співпадала с довжинами векторов, що задають координати. Аргумент <code>adj</code> — одне чи два значення з [0; 1], що визначають положення тексту, який виводиться, відносно координат <code>x</code> та <code>y</code>; <code>pos</code> — альтернативне задання положення тексту відносно координат. Можливі значення: 1 — нижче заданої координати, 2 — ліворуч від неї, 3 — зверху, 4 — праворуч. Подавляє аргумент adj. <code>offset</code> — задає зсув тексту, що виводиться, від заданої координаты (зсув в долях ширини символу). <code>cex</code> — числовий параметр — множник стандартного размеру символу. Значення цього аргументу, помножене на стандартний розмрір символу <code>par(’cex’)</code>, визначає остаточний розмір символів, що виводяться. Значення <code>cex = NULL</code> и <code>cex = NA</code> еквівалентні <code>cex = 1.0</code>. <code>font</code> — тип шрифту. Можливі значення: 1 — звичайний̆ текст (за замовчуванням), 2 — жирний шрифт, 3 — курсив, 4 — жирний курсив.</li>
</ul>
<p>Отже, часом є потреба вивести додаткову інформацію у вигляді тексту та/або формул до побудованого графіку – заголовки, легенди, текст.
Функція <code>expression()</code> дозволяє в текст вводити елементи математичних формул, грецькі букви, тощо. Виклик функції</p>
<div class="sourceCode" id="cb106"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb106-1"><a href="ch1.html#cb106-1"></a><span class="kw">demo</span>(plotmath)       </span></code></pre></div>
<p>дає можливість подивитися на запис різних математичних символів, який можна використати, наприклад, в підписах координатних осей або легенди графіку.
Ще одна корисна функція <code>paste()</code> дає можливість поєднувати в одному рядку значення та елементи тексту:</p>
<div class="sourceCode" id="cb107"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb107-1"><a href="ch1.html#cb107-1"></a><span class="kw">plot</span>(sin, <span class="dv">0</span>, <span class="dv">2</span><span class="op">*</span>pi, <span class="dt">col=</span><span class="st">&quot;darkblue&quot;</span>, <span class="dt">xlab =</span> <span class="kw">expression</span>(phi), </span>
<span id="cb107-2"><a href="ch1.html#cb107-2"></a>     <span class="dt">ylab =</span> <span class="st">&quot;графіки функцій&quot;</span>, </span>
<span id="cb107-3"><a href="ch1.html#cb107-3"></a>     <span class="dt">main=</span> <span class="kw">expression</span>(<span class="kw">paste</span>(<span class="kw">plain</span>(sin)<span class="op">*</span>phi, <span class="st">&quot;  та  &quot;</span>, <span class="kw">plain</span>(cos)<span class="op">*</span>phi)))</span>
<span id="cb107-4"><a href="ch1.html#cb107-4"></a><span class="kw">plot</span>(cos, <span class="dv">0</span>, <span class="dv">2</span><span class="op">*</span>pi, <span class="dt">add=</span><span class="ot">TRUE</span>, <span class="dt">col=</span><span class="st">&quot;darkmagenta&quot;</span>)</span>
<span id="cb107-5"><a href="ch1.html#cb107-5"></a><span class="kw">abline</span>(<span class="dt">h=</span><span class="dv">0</span>) </span></code></pre></div>
<p><img src="MMOI-RMarkdown_files/figure-html/unnamed-chunk-107-1.png" width="672" /></p>
</div>
<div id="задання-кольору" class="section level5 unnumbered" number="">
<h5>Задання кольору</h5>
<p>Задати колір можна кількома способами. Два найзручніших:
1. Вказати символьну змінну – назву потрібного кольору (<code>"ivory"</code>, <code>"wheat"</code>, <code>"azure"</code>, <code>"aliceblue"</code>, <code>"blue"</code>, <code>"green"</code>, <code>"coral"</code>, тощо). Перелік доступних кольорів можна викликати за допомогою функцій <code>color()</code> або <code>c</code>olours()`. Подивитись кольори можна, наприклад, за посиланням:
<a href="https://rstudio-pubs-static.s3.amazonaws.com/3486_79191ad32cf74955b4502b8530aad627.html">https://rstudio-pubs-static.s3.amazonaws.com/3486_79191ad32cf74955b4502b8530aad627.html</a></p>
<ol start="2" style="list-style-type: decimal">
<li>Якщо впродовж документа використовуються одні й ті самі кольори, можна створити власну палітру, вектор кольорів, за допомогою функції <code>palette()</code> та викликати потрібні кольори як елементи цього вектора.</li>
</ol>
<p>Можна не вводити свою власну палітру, а використати стандартну палітру з восьми кольорів, що задається цією функцією за замовчуванням:</p>
<div class="sourceCode" id="cb108"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb108-1"><a href="ch1.html#cb108-1"></a><span class="kw">palette</span>()</span>
<span id="cb108-2"><a href="ch1.html#cb108-2"></a><span class="co">## [1] &quot;black&quot;   &quot;#DF536B&quot; &quot;#61D04F&quot; &quot;#2297E6&quot; &quot;#28E2E5&quot; &quot;#CD0BBC&quot; &quot;#F5C710&quot;</span></span>
<span id="cb108-3"><a href="ch1.html#cb108-3"></a><span class="co">## [8] &quot;gray62&quot;</span></span></code></pre></div>
<p>(насправді “black” “red” “green3” “blue” “cyan” “magenta” “yellow” “gray”)</p>
<div class="sourceCode" id="cb109"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb109-1"><a href="ch1.html#cb109-1"></a>my.palette=<span class="kw">palette</span>(<span class="kw">c</span>(<span class="st">&quot;midnightblue&quot;</span>, <span class="st">&quot;springgreen4&quot;</span>, <span class="st">&quot;coral&quot;</span>, <span class="st">&quot;firebrick&quot;</span>, <span class="st">&quot;yellow&quot;</span>, <span class="st">&quot;lavender&quot;</span>, <span class="st">&quot;cyan3&quot;</span>, <span class="st">&quot;saddlebrown&quot;</span>))</span>
<span id="cb109-2"><a href="ch1.html#cb109-2"></a>my.palette[<span class="dv">4</span>]</span>
<span id="cb109-3"><a href="ch1.html#cb109-3"></a><span class="co">## [1] &quot;#2297E6&quot;</span></span></code></pre></div>
<ol start="3" style="list-style-type: decimal">
<li>Якщо відомий номер потрібного кольору – можна задати безпосередньо через нього.</li>
</ol>
</div>
</div>
</div>
<div id="графічні-можливості-пакету-ggplot2" class="section level3" number="1.4.2">
<h3><span class="header-section-number">1.4.2</span> Графічні можливості пакету ggplot2</h3>
<p>Потужний та гнучкий пакет <code>ggplot2</code> призначений для побудови гарних двовимірних графіків та діаграм. Літери <code>gg</code> означають <code>Grammar of Graphics</code>. Згідно концепції <code>ggplot2</code>, графік представляється як “конструктор”, який складається з окремих частин, які можна комбінувати, щоб отримати бажане зображення: <code>Plot=data+Aestetics+Geometry</code>.</p>
<p>Отже, головними аргументами кожного графіку є</p>
<ul>
<li><code>data</code> – фрейм даних, які треба зобразити;</li>
<li><code>aes()</code> – <code>Aestetics</code> – вказує на зв’язок між даними та їх зображенням, визначає змінні, які мають відображуватися на осях, змінні, що відповідають за колір, розмір та форму точок, графіку, тощо;</li>
<li><code>geom_</code> – <code>Geometry</code> – група функцій, що керує геометричною складовою графіку, тобто визначає тип графічного зображення (точки, гістограми, ящик з вусами, лінії, графік щільності, тощо).</li>
</ul>
<p>Додатковими параметрами є</p>
<ul>
<li><code>scale_</code> – група функцій, що співвідносить реальні дані з їх зображенням (колір, форма, розмір, діапазон координатних осей, тощо);</li>
<li><code>stat_</code> – група функцій, що додають на графік різні статистичні показники (середнє по групі, апроксимація даних, тощо);</li>
<li><code>coord_</code> – група функцій, яка задає систему координат для зображення даних на площині (звичайні координати, полярні, географічні);</li>
<li><code>facet_</code> – група функцій, які дозволяють групувати графіки за заданим параметром (створювати “решітку” з графіками);</li>
<li><code>theme</code> – група функцій, що дозволяє змінювати оформлення графіка (розмір та колір шрифту, координатних осей, поділки на них, фон графіка, рисунка, тощо).</li>
</ul>
<p>Дві головні функції цього пакету використовуються для побудови графіків: <code>qplot()</code> (швидка функція для побудови простіших графіків, дуже схожа на функцію <code>plot()</code> базового R) та <code>ggplot()</code> (більш гнучка функція, для побудови графіків “цеглинка за цеглинкою”).</p>
<p>Для вже створених графіків є такі важливі функції:</p>
<p>– <code>last_plot()</code> – повертає останній графік для роботи з ним:
– <code>ggsave("plot.png", width=5, height=5)</code> – зберігає останній графік в поточну робочу директорію.</p>
<p>Більш детальну інформацію про цей пакет можна знайти, наприклад, за посиланням:
<a href="http://www.sthda.com/english/wiki/be-awesome-in-ggplot2-a-practical-guide-to-be-highly-effective-r-software-and-data-visualization">http://www.sthda.com/english/wiki/be-awesome-in-ggplot2-a-practical-guide-to-be-highly-effective-r-software-and-data-visualization</a> або у відповідній літературі (наприклад, <span class="citation">(Wickham <a href="#ref-Wickham2016" role="doc-biblioref">2016</a>)</span>).</p>
</div>
</div>
<div id="ймовірнісні-розподіли-в-r" class="section level2" number="1.5">
<h2><span class="header-section-number">1.5</span> Ймовірнісні розподіли в R</h2>
<p>R призначений перш за все для статистичної обробки даних, методи та ідеологія якої ґрунтується на теорії ймовірностей. Тому R має багато можливостей для роботи з ймовірностями, випадковими величинами та їх розподілами: рахувати ймовірності, квантилі, значення функції розподілу та щільності розподілу, генерувати випадкові величини, зображувати розподіли, тощо.</p>
<div id="генерування-випадкової-вибірки" class="section level3" number="1.5.1">
<h3><span class="header-section-number">1.5.1</span> Генерування випадкової вибірки</h3>
<p>Багато ранніх робіт в галузі теорії ймовірностей були присвячені іграм та питанням перемішування, що базується на припущеннях симетрії. Тут базовим є припущення про випадкову вибірку: операції з добре перетасованою колодою карт або вибір пронумерованих кульок з добре перемішаної урни.</p>
<p>В R можна моделювати такі ситуації з функцією <code>sample()</code>. Якщо треба, наприклад, вибрати 6 номерів з 49, треба записати:</p>
<div class="sourceCode" id="cb110"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb110-1"><a href="ch1.html#cb110-1"></a><span class="kw">sample</span>(<span class="dv">1</span><span class="op">:</span><span class="dv">49</span>,<span class="dv">6</span>)</span>
<span id="cb110-2"><a href="ch1.html#cb110-2"></a><span class="co">## [1] 30 37 39 28  4 19</span></span></code></pre></div>
<p>Перший аргумент функції <code>sample()</code>, <code>x</code>, – це вектор значень, з яких вибираються значення, другий,<code>size</code>, – це розмір вибірки. Насправді запису <code>sample(49,6)</code> було б цілком достатньо в цьому випадку, оскільки окреме число в якості першого аргументу сприймається як таке, що представляє довжину послідовності натуральних чисел. <code>replace</code> – логічний аргумент, який вказує, чи повертаються вже вибрані числа назад. За замовчуванням <code>replace=FALCE</code>, що означає, що раз обране число не повертається до базового набору чисел, а отже не може бути вибране повторно. Очевидно, що для цього випадку <code>size</code> не може бути меншим за бажану кількість елементів вибірки. Якщо є потреба формувати вибірку з повтореннями, треба вказати значення аргументу <code>replace=TRUE</code>. Утворення вибірки з повторами зручне, наприклад, для моделювання багатократного підкидання монети. Наприклад, для моделювання 10 підкидань монети можна написати:</p>
<div class="sourceCode" id="cb111"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb111-1"><a href="ch1.html#cb111-1"></a><span class="kw">sample</span>(<span class="kw">c</span>(<span class="st">&quot;Р&quot;</span>,<span class="st">&quot;Г&quot;</span>), <span class="dv">10</span>, <span class="dt">replace=</span><span class="ot">TRUE</span>)</span>
<span id="cb111-2"><a href="ch1.html#cb111-2"></a><span class="co">##  [1] &quot;Г&quot; &quot;Г&quot; &quot;Г&quot; &quot;Р&quot; &quot;Р&quot; &quot;Р&quot; &quot;Р&quot; &quot;Р&quot; &quot;Г&quot; &quot;Р&quot;</span></span></code></pre></div>
<p>В даному випадку ймовірності випадіння герба та решки однакова. Проте можна змоделювати нерівноможливий випадок, використовуючи аргумент <code>prob</code>, який задає вектор відповідних ймовірностей:</p>
<div class="sourceCode" id="cb112"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb112-1"><a href="ch1.html#cb112-1"></a><span class="kw">sample</span>(<span class="kw">c</span>(<span class="st">&quot;succ&quot;</span>, <span class="st">&quot;fail&quot;</span>), <span class="dv">10</span>, <span class="dt">replace=</span>T, <span class="dt">prob=</span><span class="kw">c</span>(<span class="fl">0.8</span>, <span class="fl">0.2</span>))</span>
<span id="cb112-2"><a href="ch1.html#cb112-2"></a><span class="co">##  [1] &quot;fail&quot; &quot;succ&quot; &quot;fail&quot; &quot;succ&quot; &quot;succ&quot; &quot;succ&quot; &quot;fail&quot; &quot;succ&quot; &quot;succ&quot; &quot;succ&quot;</span></span></code></pre></div>
<p>Це – згенерована послідовність незалежних випробувань Бернуллі з ймовірністю успіху 0.8. Саме таку послідовність можна простіше змоделювати, використовуючи функцію, що моделює біноміальний розподіл (нижче).</p>
<p>За допомогою функції <code>sample()</code> є можливість не лише згенерувати вибірку з певного датасету, але й випадковим чином перевпорядкувати датасет, утворити перестановку. Виклик функції <code>sample(x)</code>, єдиним аргументом якої є датасет, є еквівалентним виклику</p>
<div class="sourceCode" id="cb113"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb113-1"><a href="ch1.html#cb113-1"></a><span class="kw">sample</span>(x, <span class="dt">size=</span><span class="kw">length</span>(x), <span class="dt">replace=</span><span class="ot">FALSE</span>)</span></code></pre></div>
<p>що означає “вибрати всі елементи датасету <code>x</code> у випадковому порядку, використовуючи кожен елемент лише один раз”. Тобто створити випадкову перестановку елементів датасету:</p>
<div class="sourceCode" id="cb114"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb114-1"><a href="ch1.html#cb114-1"></a><span class="kw">sample</span>(<span class="dv">1</span><span class="op">:</span><span class="dv">10</span>)</span>
<span id="cb114-2"><a href="ch1.html#cb114-2"></a><span class="co">##  [1]  3 10  7  6  9  8  1  2  5  4</span></span></code></pre></div>
</div>
<div id="генерування-комбінацій" class="section level3" number="1.5.2">
<h3><span class="header-section-number">1.5.2</span> Генерування комбінацій</h3>
<p>Якщо є потреба згенерувати всі можливі k-елементні комбінації, що вибрані з n елементів, можна скористатися функцією <code>combn()</code></p>
<div class="sourceCode" id="cb115"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb115-1"><a href="ch1.html#cb115-1"></a><span class="kw">combn</span>(x, m, <span class="dt">FUN =</span> <span class="ot">NULL</span>, <span class="dt">simplify =</span> <span class="ot">TRUE</span>, ...)</span></code></pre></div>
<p>Аргументи цієї функції:</p>
<ul>
<li><code>x</code> – вектор елементів (чисельних чи символьних), з яких вибираються комбінації (підмножини);</li>
<li><code>m</code> – кількість елементів, які вибираються.</li>
</ul>
<div class="sourceCode" id="cb116"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb116-1"><a href="ch1.html#cb116-1"></a><span class="kw">combn</span>(<span class="dv">1</span><span class="op">:</span><span class="dv">5</span>, <span class="dv">2</span>)</span>
<span id="cb116-2"><a href="ch1.html#cb116-2"></a><span class="co">##      [,1] [,2] [,3] [,4] [,5] [,6] [,7] [,8] [,9] [,10]</span></span>
<span id="cb116-3"><a href="ch1.html#cb116-3"></a><span class="co">## [1,]    1    1    1    1    2    2    2    3    3     4</span></span>
<span id="cb116-4"><a href="ch1.html#cb116-4"></a><span class="co">## [2,]    2    3    4    5    3    4    5    4    5     5</span></span></code></pre></div>
<div class="sourceCode" id="cb117"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb117-1"><a href="ch1.html#cb117-1"></a><span class="kw">combn</span>(<span class="kw">c</span>(<span class="st">&quot;Кривоніс&quot;</span>, <span class="st">&quot;Гуляйполе&quot;</span>, <span class="st">&quot;Убийвовк&quot;</span>, <span class="st">&quot;Непийпиво&quot;</span>, <span class="st">&quot;Вернидуб&quot;</span>), <span class="dv">4</span>)</span>
<span id="cb117-2"><a href="ch1.html#cb117-2"></a><span class="co">##      [,1]        [,2]        [,3]        [,4]        [,5]       </span></span>
<span id="cb117-3"><a href="ch1.html#cb117-3"></a><span class="co">## [1,] &quot;Кривоніс&quot;  &quot;Кривоніс&quot;  &quot;Кривоніс&quot;  &quot;Кривоніс&quot;  &quot;Гуляйполе&quot;</span></span>
<span id="cb117-4"><a href="ch1.html#cb117-4"></a><span class="co">## [2,] &quot;Гуляйполе&quot; &quot;Гуляйполе&quot; &quot;Гуляйполе&quot; &quot;Убийвовк&quot;  &quot;Убийвовк&quot; </span></span>
<span id="cb117-5"><a href="ch1.html#cb117-5"></a><span class="co">## [3,] &quot;Убийвовк&quot;  &quot;Убийвовк&quot;  &quot;Непийпиво&quot; &quot;Непийпиво&quot; &quot;Непийпиво&quot;</span></span>
<span id="cb117-6"><a href="ch1.html#cb117-6"></a><span class="co">## [4,] &quot;Непийпиво&quot; &quot;Вернидуб&quot;  &quot;Вернидуб&quot;  &quot;Вернидуб&quot;  &quot;Вернидуб&quot;</span></span></code></pre></div>
</div>
<div id="ймовірнісні-розподіли" class="section level3" number="1.5.3">
<h3><span class="header-section-number">1.5.3</span> Ймовірнісні розподіли</h3>
<p>В базовій установці R реалізовані найчастіше вживані розподіли. Кожен з цих розподілів має скорочене ім’я, яке використовується для визначення відповідних функцій, що відповідають розподілу. Наприклад, ім’я нормального розподілу – <code>norm</code>, і це ім’я використовується як корінь в імені функцій підрахунку значень, пов’язаних з цим розподілом. Для кожного розподілу є чотири базові функції, які можуть бути підраховані. Корінь назви функції вказує на вид розподілу. Перша літера – префікс – визначає, яка саме функція буде реалізована:</p>
<ul>
<li><code>p</code> (<code>probability</code>) позначає функцію розподілу, перший аргумент (<code>q</code>) – точка (або вектор), в якій рахується значення функції розподілу;</li>
<li><code>q</code> (<code>quantile</code>) позначає квантильну функцію (обернену до функції розподілу), перший аргумент (<code>p</code>) – задана ймовірність (або вектор ймовірностей), для якої потрібне значення квантиля;</li>
<li><code>d</code> (<code>density</code>) позначає щільність розподілу, перший аргумент (<code>x</code>) – точка (або вектор), в якій рахується значення функції щільності розподілу (для дискретної випадкової величини під поняттям «щільність» розуміється ймовірність прийняття випадковою величиною конкретного значення );</li>
<li><code>r</code> (<code>random</code>) позначає функцію, яка генерує випадкову величину (величини), яка має вказаний розподіл, перший аргумент (<code>n</code>) – це розмір вибірки, яку треба згенерувати.</li>
</ul>
<p>Якщо перший параметр функцій <code>d</code>, <code>q</code>, <code>p</code> є вектором, то функція порахує відповідні значення для всіх значень елементів вектора та поверне вектор ймовірностей (<code>q</code> – квантилів).</p>
<p>Загальними араметрами для всіх розподілів є</p>
<ul>
<li>логічний параметр для <code>p</code>- та <code>q</code>- функцій <code>log.p</code> (<code>log</code> для <code>d</code>-функцій), який за замовчуваннням має значення <code>FALSE</code>, і рахує ймовірності <code>p</code> як <code>log(p)</code>, якщо задати його значення як <code>TRUE</code>.</li>
<li>логічний параметр <code>lower.tail</code> для функцій з префіксами <code>p</code>, <code>q</code>. Його значення за замовчуванням – <code>FALSE</code>. Якщо задати <code>lower.tail=TRUE</code>, то <code>p</code>-функція буде замість функції розподілу обчислювати так звану функцію виживання <span class="math inline">\(P\{ \xi &gt; x \}=1-F_{\xi}(x),\)</span> а <code>q</code>-функція – верхній квантиль, тобто <span class="math inline">\(z_{1-\alpha}.\)</span></li>
</ul>
<p>Інші параметри є параметрами, особливими для кожного окремого розподілу. Вони мають певну область визначення, отже, бажано ознайомитися з довідкою по конкретному розподілу в R, перш ніж почати роботу з ним. Довідка по розподілу викликається або повною його назвою, або назвою одної з функцій, пов’язаних з ним. Нариклад,</p>
<div class="sourceCode" id="cb118"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb118-1"><a href="ch1.html#cb118-1"></a>?Normal</span>
<span id="cb118-2"><a href="ch1.html#cb118-2"></a>?pnorm</span></code></pre></div>
<p>повернуть сторінку довідки щодо нормального розподілу.</p>
<div id="дискретні-розподіли" class="section level4 unnumbered" number="">
<h4>Дискретні розподіли</h4>
<p>Наведемо параметри та імена деяких основних дискретних розподілів.</p>
<table class="table" style="margin-left: auto; margin-right: auto;">
<thead>
<tr>
<th style="text-align:left;">
Дискр.розподіл
</th>
<th style="text-align:left;">
Ім.я.в.R
</th>
<th style="text-align:left;">
Параметри.розподілу
</th>
<th style="text-align:left;">
Зауваження
</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left;font-weight: bold;color: darkblue !important;">
Біноміальний
</td>
<td style="text-align:left;width: 5em; ">
binom
</td>
<td style="text-align:left;">
size – кількість випробувань Бернуллі;
prob – ймовірність ‘успіху’ в одному випробуванні
</td>
<td style="text-align:left;">
значення квантиля qbinom(p, …) визначається як найменше ціле x таке, що F(x)&gt;=p (на відміну від традиційно прийнятій в українській школі ТЙ визначення квантиля – найбільше ціле значення x, для якого F(x)&lt;=p).
</td>
</tr>
<tr>
<td style="text-align:left;font-weight: bold;color: darkblue !important;">
Геометричний
</td>
<td style="text-align:left;width: 5em; ">
geom
</td>
<td style="text-align:left;">
prob – ймовірність ‘успіху’ в одному випробуванні
</td>
<td style="text-align:left;">
Якщо значення аргумента x в функції dgeom(x,…) не є цілим додатнім числом, то результатом функції буде нуль із відповідним застереженням.
</td>
</tr>
<tr>
<td style="text-align:left;font-weight: bold;color: darkblue !important;">
Гіпергеометричний
</td>
<td style="text-align:left;width: 5em; ">
hyper
</td>
<td style="text-align:left;">
m – кількість білих куль в урні;<br />
n – кількість чорних куль в урні;<br />
k – кількість куль, які вийняли з урни
</td>
<td style="text-align:left;">
З урни, яка містить m білих та n чорних куль виймають, не повертаючи, k куль (0&lt;k&lt;n+m). Випадкова величина, яка є кількістю вийнятих білих куль, має гіпергеометричний розподіл.
</td>
</tr>
<tr>
<td style="text-align:left;font-weight: bold;color: darkblue !important;">
Негативний біноміальний
</td>
<td style="text-align:left;width: 5em; ">
nbinom
</td>
<td style="text-align:left;">
size – задана кількість ‘успіхів’;
prob – ймовірність ‘успіху’ в одному випробуванні;
mu – альтернативний до prob параметр (середнє значення). В цьому випадку ймовірність визначається за формулою prob=size/(size+mu)
</td>
<td style="text-align:left;">
Випадкова величина, що описує кількість ‘невдач’ при досягненні заданої кількості ‘успіхів’, має від’ємно біноміальний розподіл.
</td>
</tr>
<tr>
<td style="text-align:left;font-weight: bold;color: darkblue !important;">
Поліноміальний
</td>
<td style="text-align:left;width: 5em; ">
multinom
</td>
<td style="text-align:left;">
x (перший аргумент) – вектор з r невід’ємних цілих чисел, таких, що x_1+x_2+…+x_k=n;
size – загальна кількість преметів (n), за замовчуванням size=sum(x);
prob – вектор ймовірностей p_1, …, p_k довжини k. Якщо сума елементів prob не рівна 1, аргумент prob буде нормований
</td>
<td style="text-align:left;">
Представлено лише двома функціями: d, r. Функція rmultinorm() повертає матрицю розміру k~n, кожен стовпчик якої – випадковий вектор, що має поліноміальний розподіл.
</td>
</tr>
<tr>
<td style="text-align:left;font-weight: bold;color: darkblue !important;">
Пуассона
</td>
<td style="text-align:left;width: 5em; ">
pois
</td>
<td style="text-align:left;">
lambda – середнє значення, інтенсивність потоку
</td>
<td style="text-align:left;">
</td>
</tr>
</tbody>
</table>
<p><strong>Приклад 1.</strong> Знайдемо ймовірності отримати різну (від 0 до 10) кількість успіхів, якщо кількість випробувань Бернуллі – 10, а ймовірність успіху – 0.5 (ймовірності того, що випадкова величина, що має біноміальний розподіл з параметрами <code>n=10</code>, <code>p=0.5</code>, прийме значення i=1,…,10).</p>
<div class="sourceCode" id="cb119"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb119-1"><a href="ch1.html#cb119-1"></a><span class="kw">dbinom</span>(<span class="dv">1</span><span class="op">:</span><span class="dv">10</span>,<span class="dt">size=</span><span class="dv">10</span>,<span class="dt">prob=</span><span class="fl">0.5</span>) </span>
<span id="cb119-2"><a href="ch1.html#cb119-2"></a><span class="co">##  [1] 0.0097656250 0.0439453125 0.1171875000 0.2050781250 0.2460937500</span></span>
<span id="cb119-3"><a href="ch1.html#cb119-3"></a><span class="co">##  [6] 0.2050781250 0.1171875000 0.0439453125 0.0097656250 0.0009765625</span></span></code></pre></div>
<p>Ймовірність отримати від 3 до 7 успіхів:</p>
<div class="sourceCode" id="cb120"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb120-1"><a href="ch1.html#cb120-1"></a><span class="kw">sum</span>(<span class="kw">pbinom</span>(<span class="dv">3</span><span class="op">:</span><span class="dv">7</span>,<span class="dt">size=</span><span class="dv">10</span>,<span class="dt">prob=</span><span class="fl">0.5</span>)) </span>
<span id="cb120-2"><a href="ch1.html#cb120-2"></a><span class="co">## [1] 2.945312</span></span></code></pre></div>
<p>Значення функції розподілу в точках 1, 3, 6, 10:</p>
<div class="sourceCode" id="cb121"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb121-1"><a href="ch1.html#cb121-1"></a><span class="kw">pbinom</span>(<span class="kw">c</span>(<span class="dv">1</span>, <span class="dv">3</span>, <span class="dv">6</span>, <span class="dv">10</span>),<span class="dt">size=</span><span class="dv">10</span>,<span class="dt">prob=</span><span class="fl">0.5</span>)</span>
<span id="cb121-2"><a href="ch1.html#cb121-2"></a><span class="co">## [1] 0.01074219 0.17187500 0.82812500 1.00000000</span></span></code></pre></div>
<p><strong>Приклад 2.</strong> Побудуємо вибірку з 20 елементів, що мають геометричний розподіл з параметром p=0.1:</p>
<div class="sourceCode" id="cb122"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb122-1"><a href="ch1.html#cb122-1"></a><span class="kw">rgeom</span>(<span class="dv">20</span>, <span class="dt">prob =</span> <span class="fl">0.1</span>)</span>
<span id="cb122-2"><a href="ch1.html#cb122-2"></a><span class="co">##  [1]  4 16 17  3  1 13 18  4  7 29 34 11  8  2  6 24 14 14  3 31</span></span></code></pre></div>
<p>Квантилі цього розподілу (верхні та нижні):</p>
<div class="sourceCode" id="cb123"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb123-1"><a href="ch1.html#cb123-1"></a><span class="kw">qgeom</span>((<span class="dv">1</span><span class="op">:</span><span class="dv">10</span>)<span class="op">/</span><span class="dv">10</span>, <span class="dt">prob =</span> <span class="fl">0.1</span>)</span>
<span id="cb123-2"><a href="ch1.html#cb123-2"></a><span class="co">##  [1]   0   2   3   4   6   8  11  15  21 Inf</span></span>
<span id="cb123-3"><a href="ch1.html#cb123-3"></a><span class="kw">qgeom</span>((<span class="dv">1</span><span class="op">:</span><span class="dv">10</span>)<span class="op">/</span><span class="dv">10</span>, <span class="dt">prob =</span> <span class="fl">0.1</span>, <span class="dt">lower.tail =</span> <span class="ot">FALSE</span>)</span>
<span id="cb123-4"><a href="ch1.html#cb123-4"></a><span class="co">##  [1] 21 15 11  8  6  4  3  2  0  0</span></span></code></pre></div>
<p><strong>Приклад 3.</strong> Гіпергеометричний розподіл. Нехай в урні 50 куль: 20 білих та 30 чорних. З урни, не повертаючи, виймають 10 куль. Побудуємо стовпчикову діаграму для значень в.в., яка є кількістю вийнятих білих куль.</p>
<div class="sourceCode" id="cb124"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb124-1"><a href="ch1.html#cb124-1"></a><span class="kw">barplot</span>(<span class="kw">dhyper</span>(<span class="dv">0</span><span class="op">:</span><span class="dv">10</span>, <span class="dv">20</span>, <span class="dv">30</span>, <span class="dv">10</span>), <span class="dt">names=</span><span class="kw">as.character</span>(<span class="dv">0</span><span class="op">:</span><span class="dv">10</span>), <span class="dt">ylim=</span><span class="kw">c</span>(<span class="dv">0</span>,<span class="fl">0.3</span>), <span class="dt">col=</span><span class="dv">12</span>)</span></code></pre></div>
<p><img src="MMOI-RMarkdown_files/figure-html/unnamed-chunk-125-1.png" width="672" /></p>
<p>Бачимо, що найбільш ймовірно вийняти 4 білих кулі.</p>
</div>
<div id="неперервні-розподіли" class="section level4 unnumbered" number="">
<h4>Неперервні розподіли</h4>
<p><strong>Приклад 4.</strong> Значення функції стандартного нормального розподілу в точці 1.96 можна знайти за допомогою функції</p>
<div class="sourceCode" id="cb125"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb125-1"><a href="ch1.html#cb125-1"></a><span class="kw">pnorm</span>(<span class="fl">1.96</span>)</span>
<span id="cb125-2"><a href="ch1.html#cb125-2"></a><span class="co">## [1] 0.9750021</span></span></code></pre></div>
<p>значення функції нормального розподілу з параметрами 180, 20 в точці 196</p>
<div class="sourceCode" id="cb126"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb126-1"><a href="ch1.html#cb126-1"></a><span class="kw">pnorm</span>(<span class="dv">196</span>, <span class="dt">mean=</span><span class="dv">180</span>, <span class="dt">sd=</span><span class="dv">20</span>)</span>
<span id="cb126-2"><a href="ch1.html#cb126-2"></a><span class="co">## [1] 0.7881446</span></span></code></pre></div>
<p>вектор децилів для стандартного нормального розподілу</p>
<div class="sourceCode" id="cb127"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb127-1"><a href="ch1.html#cb127-1"></a><span class="kw">qnorm</span>(<span class="kw">c</span>(<span class="fl">0.1</span>,<span class="fl">0.2</span>,<span class="fl">0.3</span>,<span class="fl">0.4</span>, <span class="fl">0.5</span>, <span class="fl">0.6</span>, <span class="fl">0.7</span>, <span class="fl">0.8</span>, <span class="fl">0.9</span>)) </span>
<span id="cb127-2"><a href="ch1.html#cb127-2"></a><span class="co">## [1] -1.2815516 -0.8416212 -0.5244005 -0.2533471  0.0000000  0.2533471  0.5244005</span></span>
<span id="cb127-3"><a href="ch1.html#cb127-3"></a><span class="co">## [8]  0.8416212  1.2815516</span></span></code></pre></div>
<p><strong>Приклад 5.</strong> Згенеруємо 100 псевдовипадкових чисел, що мають рівномірний розподіл на інтервалі [0;10]:</p>
<div class="sourceCode" id="cb128"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb128-1"><a href="ch1.html#cb128-1"></a><span class="kw">runif</span>(<span class="dv">100</span>, <span class="dt">min=</span><span class="dv">0</span>, <span class="dt">max=</span><span class="dv">10</span>) </span>
<span id="cb128-2"><a href="ch1.html#cb128-2"></a><span class="co">##   [1] 0.55105222 4.54865877 0.08103917 4.82421326 7.67126322 8.97944466</span></span>
<span id="cb128-3"><a href="ch1.html#cb128-3"></a><span class="co">##   [7] 4.46019590 5.96269782 5.63057862 4.40542885 7.69685850 2.55730271</span></span>
<span id="cb128-4"><a href="ch1.html#cb128-4"></a><span class="co">##  [13] 8.42158320 6.79192452 5.35514422 3.08432095 0.62589640 6.83660758</span></span>
<span id="cb128-5"><a href="ch1.html#cb128-5"></a><span class="co">##  [19] 0.42493941 2.63578825 3.12393368 4.78995207 7.69145140 5.26840986</span></span>
<span id="cb128-6"><a href="ch1.html#cb128-6"></a><span class="co">##  [25] 4.32960751 5.46814520 1.70446450 3.32909980 2.98892571 4.64556761</span></span>
<span id="cb128-7"><a href="ch1.html#cb128-7"></a><span class="co">##  [31] 8.53846583 2.73931572 6.15658230 6.18415554 3.24368979 1.72226815</span></span>
<span id="cb128-8"><a href="ch1.html#cb128-8"></a><span class="co">##  [37] 5.04359250 1.55049752 9.63805909 4.97190581 8.57391617 9.59205598</span></span>
<span id="cb128-9"><a href="ch1.html#cb128-9"></a><span class="co">##  [43] 6.93559505 9.22914738 2.12727591 6.61891115 7.74917893 3.74282972</span></span>
<span id="cb128-10"><a href="ch1.html#cb128-10"></a><span class="co">##  [49] 5.38442592 5.80301425 1.77861118 0.30063198 8.75277123 2.11682435</span></span>
<span id="cb128-11"><a href="ch1.html#cb128-11"></a><span class="co">##  [55] 0.38581871 7.08785609 2.62138029 7.19336211 2.57545191 2.10879907</span></span>
<span id="cb128-12"><a href="ch1.html#cb128-12"></a><span class="co">##  [61] 7.35006790 7.03011007 0.40878682 0.98345813 0.13813271 7.36004107</span></span>
<span id="cb128-13"><a href="ch1.html#cb128-13"></a><span class="co">##  [67] 7.17458284 1.96357548 3.59634907 9.81961675 3.89975076 8.48157113</span></span>
<span id="cb128-14"><a href="ch1.html#cb128-14"></a><span class="co">##  [73] 3.78949485 8.34510045 5.20578551 2.80310341 6.71626217 3.01205977</span></span>
<span id="cb128-15"><a href="ch1.html#cb128-15"></a><span class="co">##  [79] 0.76252962 6.75947125 0.12664924 9.65113542 2.36643262 3.02781127</span></span>
<span id="cb128-16"><a href="ch1.html#cb128-16"></a><span class="co">##  [85] 9.96983738 1.37758559 2.40684582 8.85186067 2.41180323 1.29659819</span></span>
<span id="cb128-17"><a href="ch1.html#cb128-17"></a><span class="co">##  [91] 4.88662705 9.70814896 7.04420143 1.45310145 7.62770724 6.60912114</span></span>
<span id="cb128-18"><a href="ch1.html#cb128-18"></a><span class="co">##  [97] 1.97652907 3.74379294 0.23605293 1.97000032</span></span></code></pre></div>
<p>40 чисел, що мають стандартний нормальний розподіл:</p>
<div class="sourceCode" id="cb129"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb129-1"><a href="ch1.html#cb129-1"></a><span class="kw">rnorm</span>(<span class="dv">40</span>)</span>
<span id="cb129-2"><a href="ch1.html#cb129-2"></a><span class="co">##  [1] -1.162527534 -2.541593651  0.387676581  0.456161095  0.741387642</span></span>
<span id="cb129-3"><a href="ch1.html#cb129-3"></a><span class="co">##  [6] -1.199063799 -0.256909586  0.843446876 -0.430361698 -0.040701509</span></span>
<span id="cb129-4"><a href="ch1.html#cb129-4"></a><span class="co">## [11] -0.883111447  1.006362241 -0.433081986  1.853119566  0.444346694</span></span>
<span id="cb129-5"><a href="ch1.html#cb129-5"></a><span class="co">## [16]  0.806669335  0.494931529  0.012523891  1.117890930 -0.613324728</span></span>
<span id="cb129-6"><a href="ch1.html#cb129-6"></a><span class="co">## [21] -0.107561402 -0.852084669 -1.667505370  0.863715269 -1.384934738</span></span>
<span id="cb129-7"><a href="ch1.html#cb129-7"></a><span class="co">## [26]  0.049469215 -0.007310359 -0.570362960  0.671287810 -0.737401975</span></span>
<span id="cb129-8"><a href="ch1.html#cb129-8"></a><span class="co">## [31]  1.413611011 -0.041488540 -1.056437509 -1.824710570 -2.582652175</span></span>
<span id="cb129-9"><a href="ch1.html#cb129-9"></a><span class="co">## [36]  0.306601664 -2.178124447  1.853522111  0.152857688 -0.316538886</span></span></code></pre></div>
<p>Графік щільності нормального розподілу з параметрами (2; 1):</p>
<div class="sourceCode" id="cb130"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb130-1"><a href="ch1.html#cb130-1"></a><span class="kw">curve</span>(<span class="kw">dnorm</span>(x, <span class="dv">2</span>, <span class="dv">1</span>), <span class="dt">from=</span><span class="op">-</span><span class="dv">2</span>, <span class="dt">to=</span><span class="dv">6</span>, <span class="dt">ylab =</span><span class="kw">paste</span>(<span class="st">&quot;Щільність нормального розподілу&quot;</span>, <span class="kw">expression</span>(<span class="kw">N</span>(<span class="dv">2</span>,<span class="dv">1</span>))), <span class="dt">col=</span><span class="dv">12</span>, <span class="dt">lwd=</span><span class="dv">2</span>)</span></code></pre></div>
<p><img src="MMOI-RMarkdown_files/figure-html/unnamed-chunk-131-1.png" width="672" />
Графік щільності стандартного нормального розподілу:</p>
<div class="sourceCode" id="cb131"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb131-1"><a href="ch1.html#cb131-1"></a><span class="kw">curve</span>(dnorm, <span class="dt">from=</span><span class="op">-</span><span class="dv">4</span>, <span class="dt">to=</span><span class="dv">4</span>, <span class="dt">col=</span><span class="st">&quot;magenta&quot;</span>, <span class="dt">lwd=</span><span class="dv">2</span>) </span></code></pre></div>
<p><img src="MMOI-RMarkdown_files/figure-html/unnamed-chunk-132-1.png" width="672" /></p>
<p>Або можна зобразити пдібні графіки за допомогою функцій пакету ggplot2.
Для цього спочатку треба визначити вектор <code>x</code> – точки, в яких буде порахована щільність, застосувати функцію щільності в точках <code>x</code>, сформувати відповідний фрейм даних та зобразити результат:</p>
<div class="sourceCode" id="cb132"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb132-1"><a href="ch1.html#cb132-1"></a><span class="kw">library</span>(ggplot2)</span>
<span id="cb132-2"><a href="ch1.html#cb132-2"></a>x&lt;-<span class="kw">seq</span>(<span class="op">-</span><span class="dv">4</span>, <span class="dv">4</span>, <span class="fl">.1</span>)</span>
<span id="cb132-3"><a href="ch1.html#cb132-3"></a>dens&lt;-<span class="kw">data.frame</span>(<span class="dt">x=</span>x, <span class="dt">y=</span><span class="kw">dnorm</span>(x))</span>
<span id="cb132-4"><a href="ch1.html#cb132-4"></a><span class="kw">ggplot</span>(dens, <span class="kw">aes</span>(x,y))<span class="op">+</span><span class="kw">geom_line</span>()</span></code></pre></div>
<p><img src="MMOI-RMarkdown_files/figure-html/unnamed-chunk-133-1.png" width="672" /></p>
<p>Наступний код створює 2/2 графік для чотирьох щільностей:</p>
<div class="sourceCode" id="cb133"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb133-1"><a href="ch1.html#cb133-1"></a>x &lt;-<span class="st"> </span><span class="kw">seq</span>(<span class="dt">from =</span> <span class="dv">0</span>, <span class="dt">to =</span> <span class="dv">8</span>, <span class="dt">length.out =</span> <span class="dv">100</span>) <span class="co">#  задання області визначення щільності</span></span>
<span id="cb133-2"><a href="ch1.html#cb133-2"></a><span class="co"># створюємо датафрейм з лотностями кількох розподілів:</span></span>
<span id="cb133-3"><a href="ch1.html#cb133-3"></a>df &lt;-<span class="st"> </span><span class="kw">rbind</span>(</span>
<span id="cb133-4"><a href="ch1.html#cb133-4"></a>   <span class="kw">data.frame</span>(<span class="dt">x =</span> x, <span class="dt">dist_name =</span> <span class="st">&quot;Normal&quot;</span>     , <span class="dt">y =</span> <span class="kw">dnorm</span>(x, <span class="dt">mean  =</span> <span class="dv">4</span>, <span class="dt">sd =</span> <span class="dv">1</span>)),</span>
<span id="cb133-5"><a href="ch1.html#cb133-5"></a>   <span class="kw">data.frame</span>(<span class="dt">x =</span> x, <span class="dt">dist_name =</span> <span class="st">&quot;Exponential&quot;</span>, <span class="dt">y =</span> <span class="kw">dexp</span>(x, <span class="dt">rate  =</span> <span class="fl">0.4</span>)),</span>
<span id="cb133-6"><a href="ch1.html#cb133-6"></a>   <span class="kw">data.frame</span>(<span class="dt">x =</span> x, <span class="dt">dist_name =</span> <span class="st">&quot;Weibull&quot;</span>     , <span class="dt">y =</span> <span class="kw">dweibull</span>(x, <span class="dt">shape =</span> <span class="dv">2</span>, <span class="dt">scale =</span> <span class="dv">2</span>)),</span>
<span id="cb133-7"><a href="ch1.html#cb133-7"></a>   <span class="kw">data.frame</span>(<span class="dt">x =</span> x, <span class="dt">dist_name =</span> <span class="st">&quot;Gamma&quot;</span>      , <span class="dt">y =</span> <span class="kw">dgamma</span>(x, <span class="dt">shape =</span> <span class="dv">2</span>, <span class="dt">rate =</span> <span class="dv">1</span>)) )</span>
<span id="cb133-8"><a href="ch1.html#cb133-8"></a><span class="co"># створюємо графік, як і вище, використовуючи facet_wrapБ щоб об&#39;єдати графіки:</span></span>
<span id="cb133-9"><a href="ch1.html#cb133-9"></a><span class="kw">ggplot</span>(<span class="dt">data =</span> df, <span class="kw">aes</span>(<span class="dt">x =</span> x, <span class="dt">y =</span> y)) <span class="op">+</span></span>
<span id="cb133-10"><a href="ch1.html#cb133-10"></a><span class="st">   </span><span class="kw">geom_line</span>() <span class="op">+</span></span>
<span id="cb133-11"><a href="ch1.html#cb133-11"></a><span class="st">   </span><span class="kw">facet_wrap</span>(<span class="op">~</span>dist_name) </span></code></pre></div>
<p><img src="MMOI-RMarkdown_files/figure-html/unnamed-chunk-134-1.png" width="672" /></p>
<div class="sourceCode" id="cb134"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb134-1"><a href="ch1.html#cb134-1"></a><span class="co"># &quot;згортаємо&quot; графіки за змінною dist_name. </span></span></code></pre></div>
<p>Інколи зручно не просто зобразити графік щільності, але, наприклад, виділити критичну область для певної гіпотези. Покажемо, як це можна зробити на прикладі Хі-квадрат розподілу.</p>
<p>Спочатку створюємо фрейм даних з координатами точок щільності та зображуємо криву щільності:</p>
<div class="sourceCode" id="cb135"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb135-1"><a href="ch1.html#cb135-1"></a>x &lt;-<span class="st"> </span><span class="kw">seq</span>(<span class="dt">from =</span> <span class="dv">0</span>, <span class="dt">to =</span> <span class="dv">15</span>, <span class="dt">length.out =</span> <span class="dv">100</span>) </span>
<span id="cb135-2"><a href="ch1.html#cb135-2"></a>df &lt;-<span class="st"> </span><span class="kw">data.frame</span>(<span class="dt">x =</span> x, <span class="dt">y =</span> <span class="kw">dchisq</span>(x, <span class="dt">df =</span> <span class="dv">4</span>))</span>
<span id="cb135-3"><a href="ch1.html#cb135-3"></a>p &lt;-<span class="st"> </span><span class="kw">ggplot</span>(df, <span class="kw">aes</span>(x, y)) <span class="op">+</span></span>
<span id="cb135-4"><a href="ch1.html#cb135-4"></a><span class="st">  </span><span class="kw">geom_line</span>() <span class="op">+</span></span>
<span id="cb135-5"><a href="ch1.html#cb135-5"></a><span class="st">  </span><span class="kw">labs</span>(</span>
<span id="cb135-6"><a href="ch1.html#cb135-6"></a>    <span class="dt">title =</span> <span class="st">&quot;Хі-квадрат розподіл з чотирма степенями свободи&quot;</span>,</span>
<span id="cb135-7"><a href="ch1.html#cb135-7"></a>    <span class="dt">y =</span> <span class="st">&quot;Щільність&quot;</span>,</span>
<span id="cb135-8"><a href="ch1.html#cb135-8"></a>    <span class="dt">x =</span> <span class="st">&quot;Квантиль&quot;</span></span>
<span id="cb135-9"><a href="ch1.html#cb135-9"></a>  )</span>
<span id="cb135-10"><a href="ch1.html#cb135-10"></a>p</span></code></pre></div>
<p><img src="MMOI-RMarkdown_files/figure-html/unnamed-chunk-135-1.png" width="672" /></p>
<p>Тепер визначаємо на створеному графіку критичну область, наприклад, як таку, що відповідає значенням <code>x</code>, більшим за значення квантиля рівня 0.95, та використовуємо функцію <code>geom_ribbon()</code>, щоб залити кольором відповідну область:</p>
<div class="sourceCode" id="cb136"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb136-1"><a href="ch1.html#cb136-1"></a>p <span class="op">+</span></span>
<span id="cb136-2"><a href="ch1.html#cb136-2"></a><span class="st">  </span><span class="kw">geom_ribbon</span>(</span>
<span id="cb136-3"><a href="ch1.html#cb136-3"></a>    <span class="dt">data =</span> <span class="kw">subset</span>(df, x <span class="op">&gt;</span><span class="st"> </span><span class="kw">qchisq</span>(<span class="fl">0.95</span>, <span class="dt">df =</span> <span class="dv">4</span>)),</span>
<span id="cb136-4"><a href="ch1.html#cb136-4"></a>    <span class="kw">aes</span>(<span class="dt">ymax =</span> y),</span>
<span id="cb136-5"><a href="ch1.html#cb136-5"></a>    <span class="dt">ymin =</span> <span class="dv">0</span>,</span>
<span id="cb136-6"><a href="ch1.html#cb136-6"></a>    <span class="dt">fill =</span> <span class="st">&quot;brown&quot;</span></span>
<span id="cb136-7"><a href="ch1.html#cb136-7"></a>  )</span></code></pre></div>
<p><img src="MMOI-RMarkdown_files/figure-html/unnamed-chunk-136-1.png" width="672" /></p>
<p>В інших пакетах R, реалізовано багато інших розподілів окрім вказаних, їх можна подивитися на відповідній сторінці CRAN: <a href="https://cran.r-project.org/web/views/Distributions.html">https://cran.r-project.org/web/views/Distributions.html</a>. Окрім одно- та багатовимірних дискретних та неперервних розподілів представлено також різноманітні модифіковані версії розподілів та суміші розподілів.</p>
</div>
</div>
</div>
<div id="створення-звітів-за-допомогою-r-markdown" class="section level2" number="1.6">
<h2><span class="header-section-number">1.6</span> Створення звітів за допомогою R Markdown</h2>
<p>R Markdown – це оболонка, яка дозволяє створювати документ, який містить в собі одночасно коди, їх реалізацію, простий текст та форматований текст.</p>
<p>Як і решта пакетів R, R Markdown безкоштовний та відкритий ресурс. Для створення .Rmd файлу потрібні пакети knitr (пакет, який власне дозволяє змішувати R-код з кодом LaTeX), rmarkdown. Головну інформацію про R Markdown можна знайти на офіційному сайті: rmarkdown.rstudio.com.</p>
<p>Для того, щоб створити .Rmd – файл, в RStudio треба вибрати File- New file- R Markdown. З’явиться табличка з двома полями, які краще заповнити: назва документа та автор. Тут же треба вибрати, який тип документа буде створено: html, pdf, doc. З’являється шаблон, в якому є кілька частин:</p>
<ul>
<li>YAML-“шапка”, оточена знаками тіре –––, яка містить заголовок документа та параметр output – тип документа, який буде створено;</li>
<li>так званий “чанк” (Chunk) з вбудованим в текст R-кодом, який виконується (або ні, якщо відповідним чином визначити його параметри) виділений <code>```{r     }```</code> та сірим кольором, – найцінніше, що є в .Rmd файлі;</li>
<li>текст, змішаний з елементами простого форматування.</li>
</ul>
<p>Коли створюється <code>.Rmd</code> файл, він з’являється у вікні ноутбука RStudio. Можна набрати необхідний текст, запустити будь-який чанк з кодом, клікнувши відповідну стрілочку. Текст <code>.Rmd</code> документа передається функції <code>knit()</code> з пакету <code>knitr</code> – в RStudio є відповідна кнопка “Knit” із зображенням клубочку ниток. Ця функція реалізує всі коди, виписані в чанках, та створює остаточний документ в тому форматі, який вказаний в заголовку .Rmd документа. Потім документ автоматично передається конвентору pandoc (<a href="https://pandoc.org">https://pandoc.org</a>), який відповідає за створення остаточного форматування. Генерується новий файл, який поєднує вибраний текст, код та результати коду з <code>.Rmd</code> файлу, та є завершеним <code>.html</code>, <code>.pdf</code> або <code>.docx</code> документом.</p>
<p>Отже, що ж таке чанк? Це код, вписаний безпосередньо в текст документа, який може бути реалізований. Вставити чанк можна або вручну, набравши апострофи та т.ін., або натиснувши комбінацію клавіш Ctrl+Alt+I (OS X: Cmd + Option + I), або в R-Studio в панелі інструментів клікнувши команду Add Chunk. Коли .Rmd файл запускається, R Markdown запускає кожен чанк та вкладає (якщо в параметрах чанка не вказано інше) результати його реалізації в остаточний документ.</p>
<p>Перший чанк, який створюється автоматично при утворенні нового документа - це так званий настроєчний чанк, який задає глобальні параметри, які виконуються для всіх чанків у файлі. Цей чанк краще не чіпати, а переналаштувати за потреби настройки кожного окремого чанку за допомогою локальних параметрів.</p>
<p>Отже, кожен внутрішній чанк має великий набір параметрів, за допомогою яких можна керувати тим, що вийде в остаточному документі після запуску функції knit(). Параметри чанку знаходяться в фігурних дужках у верхньому рядку чанка. Найважливіші параметри такі:</p>
<ul>
<li><code>echo</code> – чи треба наводити код з чанку в остаточному документі, який вийде в результаті роботи knitr? За замовчуванням <code>echo=FALSE</code>. Якщо вказати <code>echo=FALSE</code>, то текст, що відповідає коду, не буде представлений у фінальному документі;</li>
<li><code>eval</code> - чи запускати код, наведений в чанку? За замовчуванням <code>eval=TRUE</code> (можливо, треба лише навести код, але нічого з ним не робити. Тоді треба вказати <code>eval = FALSE</code>, якщо <code>eval=TRUE</code>, цей код буде реалізований);</li>
<li><code>comment</code> – префікс, який передує кожному рядку результату запуску елементу кода (default = ‘##’);</li>
<li><code>collapse</code> - чи з’єднувати всі виходи в єдиний блок? (default = <code>FALSE</code>);</li>
<li><code>fig</code> - набір параметрів для регуляції положення та розміру рисунків, зокрема
<ul>
<li><code>fig.cap="..."</code>додає назву до зображення, що виводиться;</li>
<li><code>fig.align</code> ‘left’, ‘right’, ‘center’;</li>
<li><code>fig.height, fig.width</code> – розміри зображення в дюймах</li>
</ul></li>
<li><code>warning</code> - чи виводити в остаточний документ повідомлення, що попереджають?</li>
</ul>
<p>Результати кода можуть бути вставлені безпосередньо всередину текста, якщо їх виділити <code></code>. R Markdown буде показувати результати кода, але не сам код, причому в тому стилі, в якому форматований текст навколо, тобто вбудований результат кода не буде ніяк виділятися в остаточному документі. Вирази всередині текста не мають параметрів.</p>
<p>Форматування тексту в .Rmd файлі дозволяє створювати різні типи заголовків (за допомогою різної кількості дієзів перед назвою заголовка), нумеровані та ненумеровані списки, посилання, лінки, зображення, формули в форматі LaTeX, таблиці (<a href="http://haozhu233.github.io/kableExtra/awesome_table_in_pdf.pdf">http://haozhu233.github.io/kableExtra/awesome_table_in_pdf.pdf</a>), перелік літератури, жирний текст, курсив, нижні та верхні індекси, тощо.
Наприклад:</p>
<ul>
<li><code>*italic*</code> – це <em>italic</em> ,</li>
<li><code>**bold**</code> – це <strong>bold</strong></li>
<li><code>`шматочок кода`</code> – це <code>шматочок кода</code>,</li>
<li><code>[лінк](rmarkdown.rstudio.com)</code> - це <a href="rmarkdown.rstudio.com">лінк</a>.</li>
</ul>
<p>Абзац створюється, як і в LaTex, двома натисканнями на клавішу Enter.</p>
<p>Деталі синтаксису R Markdown можна знайти тут:
<a href="https://bookdown.org/yihui/rmarkdown/markdown-syntax.html">https://bookdown.org/yihui/rmarkdown/markdown-syntax.html</a></p>
<p>Після того, як текст .Rmd файла набрано, треба натиснути кнопку <code>knit</code> (клубочок зі спицями). В результаті роботи цієї функції з’являється <code>html</code> (<code>pdf</code>, <code>docx</code>)- файл, який можна продивитися.</p>

</div>
</div>
<h3>References</h3>
<div id="refs" class="references">
<div id="ref-Vries2012">
<p>A. Vries, J. Meys. 2012. <em>R for Dummies</em>. <a href="http://sgpwe.izt.uam.mx/files/users/uami/gma/R_for_dummies.pdf">http://sgpwe.izt.uam.mx/files/users/uami/gma/R_for_dummies.pdf</a>.</p>
</div>
<div id="ref-Dalgaard2008">
<p>Dalgaard, P. 2008. <em>Introductory Statistics with R</em>.</p>
</div>
<div id="ref-Murrell2006">
<p>Murrell, Paul. 2006. <em>R Graphics</em>. Chapman &amp; Hall. <a href="https://www.e-reading-lib.com/bookreader.php/137370/paul-murrell-r-graphics.pdf">https://www.e-reading-lib.com/bookreader.php/137370/paul-murrell-r-graphics.pdf</a>.</p>
</div>
<div id="ref-Wickham2016">
<p>Wickham, Hadley. 2016. <em>Ggplot2: Elegant Graphics for Data Analysis</em>. Springer. <a href="https://1lib.eu/book/2738447/cbf47d?dsource=recommend">https://1lib.eu/book/2738447/cbf47d?dsource=recommend</a>.</p>
</div>
<div id="ref-Гнатюк2010">
<p>Гнатюк, С. 2010. <em>Вступ до R на прикладах</em>. ХНЕУ, Харків. <a href="https://sociology.knu.ua/sites/default/files/library/elopen/hnatyuk-r-book-ua.pdf">https://sociology.knu.ua/sites/default/files/library/elopen/hnatyuk-r-book-ua.pdf</a>.</p>
</div>
<div id="ref-Зарядов2010-1">
<p>Зарядов, И. С. 2010. <em>Введение в статистический пакет R: Типы переменных, структуры данных, чтение и запись информации, графика</em>. Москва, Издательство РУДН.</p>
</div>
<div id="ref-Майборода2018">
<p>Майборода, Р. Є. 2018. <em>Комп’ютерна статистика – професійний старт</em>. <a href="http://probability.univ.kiev.ua/userfiles/mre/compsta1.pdf">http://probability.univ.kiev.ua/userfiles/mre/compsta1.pdf</a>.</p>
</div>
<div id="ref-Мастицкий2011-2020">
<p>Мастицкий, Сергей. n.d. <em>Анализ и визуализация данных</em>. <a href="https://r-analytics.blogspot.com/p/blog-page.html">https://r-analytics.blogspot.com/p/blog-page.html</a>.</p>
</div>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="index.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="ch2.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/lunr.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": false,
"facebook": true,
"twitter": true,
"linkedin": false,
"weibo": false,
"instapaper": false,
"vk": false,
"all": ["facebook", "twitter", "linkedin", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": null,
"text": null
},
"history": {
"link": null,
"text": null
},
"view": {
"link": null,
"text": null
},
"download": ["MMOI-RMarkdown.pdf", "MMOI-RMarkdown.epub"],
"toc": {
"collapse": "subsection"
}
});
});
</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    var src = "true";
    if (src === "" || src === "true") src = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-MML-AM_CHTML";
    if (location.protocol !== "file:")
      if (/^https?:/.test(src))
        src = src.replace(/^https?:/, '');
    script.src = src;
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>
</body>

</html>
